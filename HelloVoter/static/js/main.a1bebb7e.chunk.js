(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){e.exports=a(236)},106:function(e,t,a){},236:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(29),o=a.n(s),c=(a(106),a(2)),i=a.n(c),l=a(3),u=a(5),m=a(6),p=a(8),d=a(7),h=a(9),f=a(11),v=a(241),b=a(239),g=a(240),E=a(13),O=a.n(E),w=a(48),j=a.n(w),y=a(92),S=a.n(y),k=a(49),T=a.n(k),x=a(61),C=a(10),A=a(93),N=a.n(A),_=a(63),M=a(94),D=a.n(M);_.a.locale(D.a);var I={AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},V=function(e){return n.a.createElement("div",Object.assign({style:{display:"flex"}},e))},F=function(e){return n.a.createElement("div",Object.assign({style:{width:"22vw",height:"100vh",overlow:"auto",background:"#eee"}},e))},H=function(e){return n.a.createElement("div",Object.assign({style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",padding:"5px 10px"}},e))},B=function(e){return n.a.createElement("div",{style:{flex:1,height:"100vh",overflow:"auto"}},n.a.createElement("div",Object.assign({style:{padding:"20px"}},e)))},P=function(e){return n.a.createElement(x.a,Object.assign({style:{width:25}},e))},U=function(e){return n.a.createElement(x.a,Object.assign({color:"red",size:"2x",icon:C.k},e))},z=function(e){return n.a.createElement(T.a,Object.assign({type:"ThreeDots"},e))},J=function(e){return e.flag?n.a.createElement(z,null):n.a.createElement("div",null,n.a.createElement(P,{icon:C.n,color:"green",onClick:e.func}),n.a.createElement("div",e))},L=function(e){var t=new _.a("en-US");return n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(N.a,{width:50,src:e.canvasser.avatar,loader:n.a.createElement(z,{width:50}),unloader:n.a.createElement(P,{style:{width:50,height:50,color:"gray"},icon:C.o})})),n.a.createElement("div",{style:{flex:1,overflow:"auto"}},"Name: ",e.canvasser.name," (",n.a.createElement(b.a,{to:"/canvassers/"+e.canvasser.id,onClick:function(){return e.refer.setState({thisCanvasser:e.canvasser})}},"view profile"),") ",e.canvasser.admin?n.a.createElement(P,{icon:C.g,color:"gold"}):"",n.a.createElement("br",null),"Location: ",e.canvasser.location?e.canvasser.location:"N/A"," ",n.a.createElement("br",null),"Last Login: ",t.format(new Date(e.canvasser.last_seen-3e4))))};function W(e,t){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(i.a.mark(function e(t,a){var r,n,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.setState({loading:!0}),e.prev=2,n="canvasser/list",a&&(n="team/members/list?teamName="+a),e.next=7,fetch("https://"+t.props.server+"/canvass/v1/"+n,{headers:{Authorization:"Bearer "+(t.props.jwt?t.props.jwt:"of the one ring"),"Content-Type":"application/json"}});case 7:return s=e.sent,e.next=10,s.json();case 10:o=e.sent,r=o.data?o.data:[],e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.warn(e.t0);case 17:return t.setState({loading:!1}),e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}var K=function(e){return n.a.createElement("div",null,n.a.createElement(P,{icon:C.m})," ",e.turf.name," (",n.a.createElement(b.a,{to:"/turf/view/"+e.turf.name,onClick:function(){e.refer.setState({thisTurf:e.turf})}},"view"),")",n.a.createElement("br",null),n.a.createElement("hr",null))};function Y(e,t){return q.apply(this,arguments)}function q(){return(q=Object(l.a)(i.a.mark(function e(t,a){var r,n,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.setState({loading:!0}),e.prev=2,n="turf/list",a&&(n="team/turf/list?teamName="+a),e.next=7,fetch("https://"+t.props.server+"/canvass/v1/"+n,{headers:{Authorization:"Bearer "+(t.props.jwt?t.props.jwt:"of the one ring"),"Content-Type":"application/json"}});case 7:return s=e.sent,e.next=10,s.json();case 10:o=e.sent,r=o.data?o.data:[],e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.warn(e.t0);case 17:return t.setState({loading:!1}),e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}var G=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e)))._loadData=Object(l.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a.setState({loading:!0}),e.prev=2,e.next=5,fetch("https://"+a.props.server+"/canvass/v1/dashboard",{headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"}});case 5:return r=e.sent,e.next=8,r.json();case 8:t=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.warn(e.t0);case 14:a.setState({data:t,loading:!1});case 15:case"end":return e.stop()}},e,this,[[2,11]])})),a.state={loading:!0},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){return n.a.createElement(J,{flag:this.state.loading,func:this._loadData},JSON.stringify(this.state.data))}}]),t}(r.Component),Z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,W(Object(f.a)(Object(f.a)(a)));case 3:e.t1=e.sent,e.t2={canvassers:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)})),a._loadSingle=Object(l.a)(i.a.mark(function e(){var t,r,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a.setState({loading:!0}),e.prev=2,r=a.props.location.pathname.split("/").pop(),e.next=6,fetch("https://"+a.props.server+"/canvass/v1/canvasser/get?id="+r,{headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"}});case 6:return n=e.sent,e.next=9,n.json();case 9:s=e.sent,t=s.data?s.data:{},e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.warn(e.t0);case 16:a.setState({loading:!1,thisCanvasser:t});case 17:case"end":return e.stop()}},e,this,[[2,13]])})),a.state={loading:!0,canvassers:[],thisCanvasser:{}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(v.a,null,n.a.createElement("div",null,n.a.createElement(g.a,{exact:!0,path:"/canvassers/",render:function(){return n.a.createElement(J,{flag:e.state.loading,func:Object(l.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,W(e);case 3:return t.t1=t.sent,t.t2={canvassers:t.t1},t.abrupt("return",t.t0.setState.call(t.t0,t.t2));case 6:case"end":return t.stop()}},t,this)}))},e.state.canvassers.map(function(t){return n.a.createElement(L,{key:t.id,canvasser:t,refer:e})}))}}),n.a.createElement(g.a,{path:"/canvassers/:id",render:function(t){return n.a.createElement(J,{flag:e.state.loading,func:e._loadSingle},JSON.stringify(e.state.thisCanvasser))}})))}}]),t}(r.Component),Q=a(32),X=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleMembersChange=function(e){a.setState({selectedMembersOption:e})},a.handleTurfChange=function(e){a.setState({selectedTurfOption:e})},a._saveTeam=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({saving:!0}),e.prev=1,e.next=4,fetch("https://"+a.props.server+"/canvass/v1/team/members/wipe",{method:"POST",headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({teamName:a.state.thisTeam})});case 4:return e.sent,e.next=7,fetch("https://"+a.props.server+"/canvass/v1/team/turf/wipe",{method:"POST",headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({teamName:a.state.thisTeam})});case 7:e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn(e.t0);case 13:return a.state.selectedMembersOption.map(function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://"+a.props.server+"/canvass/v1/team/members/add",{method:"POST",headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({teamName:a.state.thisTeam,cId:t.id})});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),e.prev=14,e.next=17,fetch("https://"+a.props.server+"/canvass/v1/team/turf/add",{method:"POST",headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({teamName:a.state.thisTeam,turfName:a.state.selectedTurfOption.value})});case 17:e.sent,e.next=23;break;case 20:e.prev=20,e.t1=e.catch(14),console.warn(e.t1);case 23:a.setState({saving:!1});case 24:case"end":return e.stop()}},e,this,[[1,10],[14,20]])})),a._deleteTeam=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://"+a.props.server+"/canvass/v1/team/delete",{method:"POST",headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({name:a.state.thisTeam})});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:window.location.href="/HelloVoter/#/teams/",a._loadTeams();case 11:case"end":return e.stop()}},e,this,[[0,6]])})),a._createTeam=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.addTeamForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("https://"+a.props.server+"/canvass/v1/team/create",{method:"POST",headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({name:t.name})});case 5:e.sent,window.location.href="/HelloVoter/#/teams/",a._loadTeams();case 8:case"end":return e.stop()}},e,this)})),a._loadTeams=Object(l.a)(i.a.mark(function e(){var t,r,s,o,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a.setState({loading:!0}),e.prev=2,e.next=5,fetch("https://"+a.props.server+"/canvass/v1/team/list",{headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"}});case 5:return r=e.sent,e.next=8,r.json();case 8:t=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.warn(e.t0);case 14:return a.setState({teams:t.data}),e.next=17,W(Object(f.a)(Object(f.a)(a)));case 17:return s=e.sent,e.next=20,Y(Object(f.a)(Object(f.a)(a)));case 20:o=e.sent,c=[],l=[],s.map(function(e){c.push({value:e.name+e.email+e.location,id:e.id,label:n.a.createElement(L,{key:e.id,canvasser:e,refer:Object(f.a)(Object(f.a)(a))})})}),o.map(function(e){l.push({value:e.name,label:n.a.createElement(K,{key:e.name,turf:e})})}),a.setState({memberOptions:c,turfOptions:l});case 26:case"end":return e.stop()}},e,this,[[2,11]])})),a.state={loading:!0,saving:!1,selectedMembersOption:null,selectedTurfOption:null,teams:[],MemberOptions:[{value:"loading",label:n.a.createElement(z,null)}],thisTeam:null,thisTeamMembers:[]},a.formServerItems=O.a.struct({name:O.a.String}),a.formServerOptions={fields:{server:{label:"Team Name",error:"You must enter a team name."}}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onChangeTeam",value:function(e){this.setState({addTeamForm:e})}},{key:"componentDidMount",value:function(){this._loadTeams()}},{key:"render",value:function(){var e=this;return n.a.createElement(v.a,null,n.a.createElement("div",null,n.a.createElement(g.a,{exact:!0,path:"/teams/",render:function(){return n.a.createElement(J,{flag:e.state.loading,func:e._loadTeams},e.state.loading?"loading":e.state.teams.map(function(t){return n.a.createElement($,{key:t.name,team:t,refer:e})}),n.a.createElement(b.a,{to:"/teams/add"},n.a.createElement("button",null,"Add Team")))}}),n.a.createElement(g.a,{exact:!0,path:"/teams/add",render:function(){return n.a.createElement("div",null,n.a.createElement(O.a.form.Form,{ref:function(t){return e.addTeamForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTeam(t)},value:e.state.addTeamForm}),n.a.createElement("button",{onClick:function(){return e._createTeam()}},"Submit"))}}),n.a.createElement(g.a,{path:"/teams/edit/:name",render:function(){return n.a.createElement("div",null,n.a.createElement("h3",null,e.state.thisTeam),"Canvassers:",n.a.createElement(Q.a,{value:e.state.selectedMembersOption,onChange:e.handleMembersChange,options:e.state.memberOptions,isMulti:!0,isSearchable:!0,placeholder:"Select team members to add"}),n.a.createElement("br",null),"Turf:",n.a.createElement(Q.a,{value:e.state.selectedTurfOption,onChange:e.handleTurfChange,options:e.state.turfOptions,isSearchable:!0,placeholder:"Select turf for this team"}),n.a.createElement("br",null),e.state.saving?n.a.createElement(z,null):n.a.createElement("button",{onClick:function(){return e._saveTeam()}},"Save Team"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{onClick:function(){return e._deleteTeam()}},"Delete Team"))}})))}}]),t}(r.Component),$=function(e){return n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(P,{style:{width:35,height:35,color:"gray"},icon:C.p})),n.a.createElement("div",{style:{flex:1,overflow:"auto"}},e.team.name," (",n.a.createElement(b.a,{to:"/teams/edit/"+e.team.name,onClick:Object(l.a)(i.a.mark(function t(){var a,r,s,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.refer.setState({thisTeam:e.team.name,selectedMembersOption:null,selectedTurfOption:null}),a=[],r=[],t.next=5,W(e.refer,e.team.name);case 5:return s=t.sent,t.next=8,Y(e.refer,e.team.name);case 8:o=t.sent,s.map(function(t){a.push({value:t.name+t.email+t.location,id:t.id,label:n.a.createElement(L,{key:t.id,canvasser:t,refer:e.refer})})}),o.map(function(e){r.push({value:e.name,label:n.a.createElement(K,{key:e.name,turf:e})})}),e.refer.setState({selectedMembersOption:a,selectedTurfOption:r});case 12:case"end":return t.stop()}},t,this)}))},"edit"),")"))},ee=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleStateChange=function(e){a.setState({selectedStateOption:e})},a.handleTypeChange=function(e){a.setState({selectedTypeOption:e})},a.handleDistrictChange=function(e){a.setState({selectedDistrictOption:e})},a._deleteTurf=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://"+a.props.server+"/canvass/v1/turf/delete",{method:"POST",headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({name:a.state.thisTurf.name})});case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:a._loadTurf(Object(f.a)(Object(f.a)(a))),window.location.href="/HelloVoter/#/turf/";case 11:case"end":return e.stop()}},e,this,[[0,6]])})),a._createTurf=Object(l.a)(i.a.mark(function e(){var t,r,n,s,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.addTurfForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:a.setState({saving:!0}),n=a.state.selectedStateOption.value,e.t0=a.state.selectedTypeOption.value,e.next="state"===e.t0?8:"cd"===e.t0?10:"sldu"===e.t0?12:"sldl"===e.t0?14:16;break;case 8:return r="states/"+n+"/shape.geojson",e.abrupt("break",17);case 10:return r="cds/2016/"+a.state.selectedDistrictOption.value+"/shape.geojson",e.abrupt("break",17);case 12:return r="states/"+n+"/sldu/"+a.state.selectedDistrictOption.value+".geojson",e.abrupt("break",17);case 14:return r="states/"+n+"/sldl/"+a.state.selectedDistrictOption.value+".geojson",e.abrupt("break",17);case 16:throw"unknown selectedTypeOption";case 17:return e.prev=17,e.next=20,fetch("https://raw.githubusercontent.com/OurVoiceUSA/districts/gh-pages/"+r);case 20:return s=e.sent,e.next=23,s.json();case 23:return o=e.sent,c=o.geometry?o.geometry:o,e.next=27,fetch("https://"+a.props.server+"/canvass/v1/turf/create",{method:"POST",headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({name:t.name,geometry:c})});case 27:s=e.sent,e.next=33;break;case 30:e.prev=30,e.t1=e.catch(17),console.warn(e.t1);case 33:a.setState({saving:!1}),window.location.href="/HelloVoter/#/turf/",a._loadTurf();case 36:case"end":return e.stop()}},e,this,[[17,30]])})),a.selectedTypeFetch=Object(l.a)(i.a.mark(function e(){var t,r,n,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.selectedTypeOption){e.next=2;break}return e.abrupt("return");case 2:a.setState({districtOptions:[]}),r=a.state.selectedStateOption.value,e.t0=a.state.selectedTypeOption.value,e.next="cd"===e.t0?7:"sldu"===e.t0?9:"sldl"===e.t0?11:13;break;case 7:return t="cds/2016/",e.abrupt("break",14);case 9:return t="states/"+r+"/sldu/",e.abrupt("break",14);case 11:return t="states/"+r+"/sldl/",e.abrupt("break",14);case 13:return e.abrupt("return");case 14:return e.next=16,fetch("https://api.github.com/repos/OurVoiceUSA/districts/contents/"+t);case 16:return n=e.sent,s=[],e.next=20,n.json();case 20:o=e.sent,e.t1=a.state.selectedTypeOption.value,e.next="cd"===e.t1?24:26;break;case 24:return o.map(function(e){e.name.includes(a.state.selectedStateOption.value)&&s.push({value:e.name,label:e.name})}),e.abrupt("break",27);case 26:o.map(function(e){var t=e.name.replace(".geojson","");s.push({value:t,label:t})});case 27:a.setState({districtOptions:s});case 28:case"end":return e.stop()}},e,this)})),a._loadTurf=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,Y(Object(f.a)(Object(f.a)(a)));case 3:t=e.sent,a.setState({loading:!1,turf:t});case 5:case"end":return e.stop()}},e,this)})),a.state={loading:!0,saving:!1,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,districtOptions:[],turf:[],thisTurf:{}},a.formServerItems=O.a.struct({name:O.a.String}),a.formServerOptions={fields:{server:{label:"Turf Name",error:"You must enter a turf name."}}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onChangeTurf",value:function(e){this.setState({addTurfForm:e})}},{key:"_showDistrictOption",value:function(){if(!this.state.selectedTypeOption)return!1;switch(this.state.selectedTypeOption.value){case"cd":case"sldu":case"sldl":return!0}return!1}},{key:"componentDidMount",value:function(){this._loadTurf()}},{key:"render",value:function(){var e=this,t=[],a=[{value:"state",label:"State"},{value:"cd",label:"Congressional"},{value:"sldu",label:"State Senate"},{value:"sldl",label:"State House"}];return Object.keys(I).map(function(e){return t.push({value:e,label:I[e]})}),n.a.createElement(v.a,null,n.a.createElement("div",null,n.a.createElement(g.a,{exact:!0,path:"/turf/",render:function(){return n.a.createElement(J,{flag:e.state.loading,func:e._loadTurf},e.state.loading?"loading":e.state.turf.map(function(t){return n.a.createElement(K,{key:t.name,turf:t,refer:e})}),n.a.createElement(b.a,{to:"/turf/add"},n.a.createElement("button",null,"Add Turf")))}}),n.a.createElement(g.a,{exact:!0,path:"/turf/add",render:function(){return n.a.createElement("div",null,"Turf Name:",n.a.createElement(O.a.form.Form,{ref:function(t){return e.addTurfForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTurf(t)},value:e.state.addTurfForm}),"State or region:",n.a.createElement(Q.a,{value:e.state.selectedStateOption,onChange:e.handleStateChange,options:t,isSearchable:!0,placeholder:"Select state or region"}),e.state.selectedStateOption?n.a.createElement("div",null,n.a.createElement("br",null),"District Type:",n.a.createElement(Q.a,{value:e.state.selectedTypeOption,onChange:e.handleTypeChange,onMenuClose:e.selectedTypeFetch,options:a,isSearchable:!0,placeholder:"Select district for this turf"})):"",e._showDistrictOption()?n.a.createElement("div",null,n.a.createElement("br",null),"District Number:",e.state.districtOptions.length?n.a.createElement(Q.a,{value:e.state.selectedDistrictOption,onChange:e.handleDistrictChange,options:e.state.districtOptions,isSearchable:!0,placeholder:"Select district for this turf"}):n.a.createElement(z,null)):"",n.a.createElement("button",{onClick:function(){return e._createTurf()}},"Submit"))}}),n.a.createElement(g.a,{path:"/turf/view/:name",render:function(){return n.a.createElement("div",null,n.a.createElement("h3",null,e.state.thisTurf.name),e.state.thisTurf.geometry,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{onClick:function(){return e._deleteTurf()}},"Delete Turf"))}})))}}]),t}(r.Component),te=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,"Questions Component")}}]),t}(r.Component),ae=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,"Forms Component")}}]),t}(r.Component),re=a(98),ne=a.n(re),se=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=Object(l.a)(i.a.mark(function e(){var t,r,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.prev=1,e.next=4,fetch("https://"+a.props.server+"/canvass/v1/google_maps_key",{headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:s=e.sent,t=s.google_maps_key,s.error&&(r=!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.warn(e.t0);case 15:a.setState({google_maps_key:t?{key:t}:null,loading:!1,error:r});case 16:case"end":return e.stop()}},e,this,[[1,12]])})),a.state={loading:!0,google_maps_key:null,pins:[{lat:33.921823,lng:-118.3281371},{lat:33.9328242,lng:-118.3381376},{lat:33.9438254,lng:-118.3481379}]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.loading?n.a.createElement("div",null,"loading"):this.state.error?n.a.createElement("div",null,"Awaiting assignment"):n.a.createElement("div",{style:{height:"100vh",width:"100%"}},n.a.createElement(ne.a,{bootstrapURLKeys:this.state.google_maps_key,defaultCenter:{lat:33.9208231,lng:-118.328137},defaultZoom:11},this.state.pins.map(function(e){return n.a.createElement(U,{lat:e.lat,lng:e.lng})})))}}]),t}(r.Component),oe=a(99),ce=a.n(oe),ie=O.a.enums({address1:"Address 1",address2:"Address 2",city:"City",state:"State",zip:"Zip Code"},"HEADER"),le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).preProcess=function(){var e=Object(l.a)(i.a.mark(function e(t){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.shift(),t.pop(),a.setState({data:t,headers:r});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.onHeadersSubmit=function(e){e.preventDefault(),a.setState({loading:!0}),setTimeout(function(){return a.setState({loading:!1,headers:[]})},3e3)},a.state={loading:!1,data:null,headers:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"preProcessError",value:function(e){console.warn("BOOO = "+e)}},{key:"render",value:function(){if(this.state.loading)return n.a.createElement(z,null);if(this.state.headers.length){var e={},t={fields:{}};for(var a in this.state.headers)e[a]=O.a.maybe(ie),t.fields[a]={label:this.state.headers[a]};var r=O.a.struct(e);return n.a.createElement("div",null,"Assign each header to its data type ",n.a.createElement("br",null),n.a.createElement("form",{onSubmit:this.onHeadersSubmit},n.a.createElement(O.a.form.Form,{ref:"form",type:r,options:t}),n.a.createElement("div",{className:"form-group"},n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"))),n.a.createElement("hr",null),"NOTE: This import tool does not work on all voter files, as there is no standard format. We do our best to accommodate the most common patterns. If your import doesn't work,\xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/issues/new"},"submit an issue")," and a volunteer programmer can work to fix the issue in the future. If you need the import done now, contact someone you know who's good with Microsoft\xa9 Excel or LibreOffice\xa9 and they can reformat your voter file so it works with this import tool.")}return n.a.createElement(ce.a,{label:"Data Importa",onError:this.preProcessError,onFileLoaded:this.preProcess})}}]),t}(r.Component),ue=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,"Analytics")}}]),t}(r.Component),me=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,"Settings Component")}}]),t}(r.Component),pe=a(237),de=a(242),he=function(e){function t(e){var a,r;Object(u.a)(this,t),a=Object(p.a)(this,Object(d.a)(t).call(this,e));try{r=a.props.location.pathname.split("/").pop(),j()(r)}catch(n){console.warn("Unable to extract jwt from URI: "+n),r="error"}return a.state={jwt:r},a.props.refer.setState({jwt:r}),localStorage.setItem("jwt",r),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return"error"===this.state.jwt?n.a.createElement("div",null,"There was an error parsing the jwt"):n.a.createElement(pe.a,{render:function(){return n.a.createElement(de.a,{to:"/"})}})}}]),t}(r.Component),fe=a(40),ve=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=Object(l.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,fetch("https://"+a.props.server+"/canvass/v1/dashboard",{headers:{Authorization:"Bearer "+(a.props.jwt?a.props.jwt:"of the one ring"),"Content-Type":"application/json"}});case 4:return r=e.sent,e.next=7,r.json();case 7:t=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn(e.t0);case 13:a.setState({cb_version:t.version});case 14:case"end":return e.stop()}},e,this,[[1,10]])})),a.state={cb_version:null},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",null,"HelloVoter"," version ","0.1.0"),n.a.createElement("div",null,this.state.cb_version?"canvass-broker version "+this.state.cb_version:n.a.createElement(T.a,{height:15,type:"ThreeDots"})),n.a.createElement("div",null,"\xa9 2018, Our Voice USA, a 501(c)(3) Non-Profit Organization. Not for any candidate or political party."),n.a.createElement("div",null,"This program is free software; refer to our ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/blob/master/LICENSE"},"License")," for more details."),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/OurVoiceUSA"},n.a.createElement(P,{icon:fe.c})," @OurVoiceUSA")),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/OurVoiceUsa"},n.a.createElement(P,{icon:fe.a})," @OurVoiceUSA")),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ourvoiceusa.org/"},n.a.createElement(P,{icon:C.i})," ourvoiceusa.org")))}}]),t}(r.Component),be=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).doSave=Object(l.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.refs.mainForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:if(!0===t.ack){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,a.singHello(t.server);case 7:!0!==(r=e.sent).flag?console.warn(r.error?"Error":"Connection Successful",r.msg,[{text:"OK"}],{cancelable:!1}):console.warn(r);case 9:case"end":return e.stop()}},e,this)})),a.singHello=function(){var e=Object(l.a)(i.a.mark(function e(t){var r,n,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("server",t),e.prev=1,e.next=4,fetch("https://"+t+"/canvass/v1/hello",{method:"POST",headers:{Authorization:"Bearer "+(a.state.jwt?a.state.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({longitude:-118,latitude:40})});case 4:if(r=e.sent,n=r.headers.get("x-sm-oauth-url")){e.next=8;break}return e.abrupt("return",{error:!0,msg:"Missing required header."});case 8:e.t0=r.status,e.next=200===e.t0?11:400===e.t0?12:401===e.t0?13:403===e.t0?15:16;break;case 11:return e.abrupt("break",17);case 12:return e.abrupt("return",{error:!0,msg:"The server didn't understand the request sent from this device."});case 13:return window.location.href=n+"/gm?app=HelloVoter",e.abrupt("return",{error:!1,flag:!0});case 15:return e.abrupt("return",{error:!0,msg:"We're sorry, but your request to canvass with this server has been rejected."});case 16:return e.abrupt("return",{error:!0,msg:"Unknown error connecting to server."});case 17:return e.next=19,r.json();case 19:if(s=e.sent,console.warn(s),a.setState({server:t}),localStorage.setItem("server",t),!0===s.data.ready){e.next=27;break}return e.abrupt("return",{error:!1,msg:"The server said: "+s.msg});case 27:return console.warn({server:t,dbx:null,user:a.state.user}),e.abrupt("return",{error:!1,flag:!0});case 29:e.next=35;break;case 31:return e.prev=31,e.t1=e.catch(1),console.warn("singHello: "+e.t1),e.abrupt("return",{error:!0,msg:"Unable to make a connection to target server"});case 35:case"end":return e.stop()}},e,this,[[1,31]])}));return function(t){return e.apply(this,arguments)}}();var r=S.a.parse(window.location.search);return a.state={jwt:localStorage.getItem("jwt"),server:localStorage.getItem("server"),connectForm:{server:r.server}},a.formServerItems=O.a.struct({server:O.a.String,ack:O.a.subtype(O.a.Boolean,function(e){return e})}),a.formServerOptions={fields:{server:{label:"Server Domain Name",help:"Enter the domain name of the server you wish to connect to.",error:"You must enter a domain name."},ack:{label:"Terms of Use",help:"By checking this you acknowledge that the server to which you are connecting is not affiliated with Our Voice USA and the data you send and receive is governed by that server's terms of use.",error:"You must acknowledge the terms of use."}}},a.onChange=a.onChange.bind(Object(f.a)(Object(f.a)(a))),a.doSave=a.doSave.bind(Object(f.a)(Object(f.a)(a))),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onChange",value:function(e){this.setState({connectForm:e})}},{key:"getName",value:function(){var e;try{e=j()(this.state.jwt).name}catch(t){console.warn(t)}return e}},{key:"_logout",value:function(){localStorage.removeItem("server"),localStorage.removeItem("jwt"),this.setState({server:null,jwt:null})}},{key:"render",value:function(){var e=this,t=this.state,a=t.server,r=t.jwt;return a?n.a.createElement(v.a,null,n.a.createElement(V,null,n.a.createElement(F,null,n.a.createElement("div",{style:{margin:10}},"Welcome, ",this.getName(),"!",n.a.createElement("br",null),"Server: ",this.state.server),n.a.createElement("hr",null),n.a.createElement(H,null,n.a.createElement(P,{icon:C.f})," ",n.a.createElement(b.a,{to:"/"},"Dashboard")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.o})," ",n.a.createElement(b.a,{to:"/canvassers/"},"Canvassers")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.p})," ",n.a.createElement(b.a,{to:"/teams/"},"Teams")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.j})," ",n.a.createElement(b.a,{to:"/turf/"},"Turf")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.b})," ",n.a.createElement(b.a,{to:"/questions/"},"Questions")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.d})," ",n.a.createElement(b.a,{to:"/forms/"},"Forms")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.i})," ",n.a.createElement(b.a,{to:"/map/"},"Map")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.h})," ",n.a.createElement(b.a,{to:"/import/"},"Import Data")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.c})," ",n.a.createElement(b.a,{to:"/analytics/"},"Analytics")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.e})," ",n.a.createElement(b.a,{to:"/settings/"},"Settings")),n.a.createElement(H,null,n.a.createElement(P,{icon:C.l})," ",n.a.createElement("button",{onClick:function(){return e._logout()}},"Logout")),n.a.createElement("hr",null),n.a.createElement(H,null,n.a.createElement(P,{icon:C.a})," ",n.a.createElement(b.a,{to:"/about/"},"About")),n.a.createElement(H,null,n.a.createElement(P,{icon:fe.b})," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/tree/master/docs/"},"Help"))),n.a.createElement(B,null,n.a.createElement(g.a,{exact:!0,path:"/",render:function(){return n.a.createElement(G,{server:a,jwt:r})}}),n.a.createElement(g.a,{path:"/canvassers/",render:function(e){return n.a.createElement(Z,Object.assign({server:a,jwt:r},e))}}),n.a.createElement(g.a,{path:"/teams/",render:function(){return n.a.createElement(X,{server:a,jwt:r})}}),n.a.createElement(g.a,{path:"/turf/",render:function(){return n.a.createElement(ee,{server:a,jwt:r})}}),n.a.createElement(g.a,{path:"/questions/",render:function(){return n.a.createElement(te,{server:a,jwt:r})}}),n.a.createElement(g.a,{path:"/forms/",render:function(){return n.a.createElement(ae,{server:a,jwt:r})}}),n.a.createElement(g.a,{path:"/map/",render:function(){return n.a.createElement(se,{server:a,jwt:r})}}),n.a.createElement(g.a,{path:"/import/",render:function(){return n.a.createElement(le,{server:a,jwt:r})}}),n.a.createElement(g.a,{path:"/analytics/",render:function(){return n.a.createElement(ue,{server:a,jwt:r})}}),n.a.createElement(g.a,{path:"/settings/",render:function(){return n.a.createElement(me,{server:a,jwt:r})}}),n.a.createElement(g.a,{path:"/jwt/",render:function(t){return n.a.createElement(he,Object.assign({},t,{refer:e}))}}),n.a.createElement(g.a,{path:"/about/",render:function(){return n.a.createElement(ve,{server:a,jwt:r})}})))):n.a.createElement("div",{align:"center"},n.a.createElement("br",null),n.a.createElement("strong",null,"HelloVoter"),n.a.createElement("div",null,"Version ","0.1.0"),n.a.createElement("br",null),n.a.createElement(O.a.form.Form,{ref:"mainForm",type:this.formServerItems,options:this.formServerOptions,onChange:this.onChange,value:this.state.connectForm}),n.a.createElement("div",{className:"form-group"},n.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.doSave},"Connect to Server")))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[101,2,1]]]);
//# sourceMappingURL=main.a1bebb7e.chunk.js.map