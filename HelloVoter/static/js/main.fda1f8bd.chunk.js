(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{224:function(e,t,a){e.exports=a(521)},229:function(e,t,a){},284:function(e,t){},521:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(36),o=a.n(s),c=(a(229),a(4)),l=a.n(c),i=a(11),u=a(19),m=a(20),d=a(22),p=a(21),f=a(23),h=a(9),v=a(528),b=a(525),g=a(526),E=a(16),O=a.n(E),y=a(104),k=a.n(y),w=a(201),x=a.n(w),S=a(82),j=a.n(S),T=a(202),C=a(17),F=a(60),D=a.n(F),A=a(105),N=a.n(A),_=a(34),I=a(203),M=a.n(I),P=a(136),V=a(204),L=a.n(V);P.a.locale(L.a);var U={AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};function H(e,t,a,r){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(l.a.mark(function e(t,a,r,n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r||(r="GET"),t.hostname){e.next=4;break}return console.error("server is undefined in fetch"),e.abrupt("return");case 4:return e.abrupt("return",fetch("https://"+t.hostname+a,{method:r,headers:{Authorization:"Bearer "+t.jwt,"Content-Type":"application/json"},body:n?JSON.stringify(n):null}));case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var W=function(e){return n.a.createElement("div",Object.assign({style:{display:"flex"}},e))},B=function(e){return n.a.createElement("div",Object.assign({style:{width:"22vw",height:"100vh",overlow:"auto",background:"#eee"}},e))},J=function(e){return n.a.createElement("div",Object.assign({style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",padding:"5px 10px"}},e))},K=function(e){return n.a.createElement("div",{style:{flex:1,height:"100vh",overflow:"auto"}},n.a.createElement("div",Object.assign({style:{padding:"20px"}},e)))},G=function(e){return n.a.createElement(T.a,Object.assign({style:{width:25},"data-tip":e["data-tip"]?e["data-tip"]:e.icon.iconName},e))},Y=function(e){return n.a.createElement(N.a,Object.assign({type:"ThreeDots"},e))},q=function(e){return e.flag?n.a.createElement(Y,null):n.a.createElement("div",null,n.a.createElement(G,{icon:C.q,color:"green",onClick:e.func,"data-tip":"Reload Data"}),n.a.createElement("div",null,e.children))};function z(e){return(e.name+e.email+e.homeaddress+(e.admin?"admin":"")).toLowerCase()}function X(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(i.a)(l.a.mark(function e(t,a){var r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,H(t.state.server,"/canvass/v1/canvasser/get?id="+a);case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn(e.t0);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this,[[1,10]])}))).apply(this,arguments)}var $=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleTeamsChange=function(){var e=Object(i.a)(l.a.mark(function e(t){var r,n,s,o,c,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=a.state.selectedTeamsOption.map(function(e){return e.value}),n=t.map(function(e){return e.value}),e.t0=l.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=12;break}if(s=e.t1.value,o=n[s],-1!==r.indexOf(o)){e.next=10;break}return e.next=10,H(a.state.server,"/canvass/v1/team/members/add","POST",{teamName:o,cId:a.props.id});case 10:e.next=4;break;case 12:e.t2=l.a.keys(r);case 14:if((e.t3=e.t2()).done){e.next=22;break}if(c=e.t3.value,i=r[c],-1!==n.indexOf(i)){e.next=20;break}return e.next=20,H(a.state.server,"/canvass/v1/team/members/remove","POST",{teamName:i,cId:a.props.id});case 20:e.next=14;break;case 22:return e.next=25,X(Object(h.a)(Object(h.a)(a)),a.props.id);case 25:u=e.sent,a.setState({selectedTeamsOption:t,selectedFormsOption:{},selectedTurfOption:{},canvasser:u}),e.next=31;break;case 29:e.prev=29,e.t4=e.catch(0);case 31:case"end":return e.stop()}},e,this,[[0,29]])}));return function(t){return e.apply(this,arguments)}}(),a.handleFormsChange=function(){var e=Object(i.a)(l.a.mark(function e(t){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a.state.selectedFormsOption.value){e.next=4;break}return e.next=4,H(a.state.server,"/canvass/v1/form/assigned/canvasser/remove","POST",{fId:a.state.selectedFormsOption.value,cId:a.props.id});case 4:if(!t.value){e.next=7;break}return e.next=7,H(a.state.server,"/canvass/v1/form/assigned/canvasser/add","POST",{fId:t.value,cId:a.props.id});case 7:return e.next=9,X(Object(h.a)(Object(h.a)(a)),a.props.id);case 9:r=e.sent,a.setState({canvasser:r,selectedFormsOption:t}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.warn(e.t0);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}(),a.handleTurfChange=function(){var e=Object(i.a)(l.a.mark(function e(t){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a.state.selectedTurfOption.value){e.next=4;break}return e.next=4,H(a.state.server,"/canvass/v1/turf/assigned/canvasser/remove","POST",{turfName:a.state.selectedTurfOption.value,cId:a.props.id});case 4:if(!t.value){e.next=7;break}return e.next=7,H(a.state.server,"/canvass/v1/turf/assigned/canvasser/add","POST",{turfName:t.value,cId:a.props.id});case 7:return e.next=9,X(Object(h.a)(Object(h.a)(a)),a.props.id);case 9:r=e.sent,a.setState({canvasser:r,selectedTurfOption:t}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.warn(e.t0);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}(),a._loadData=Object(i.a)(l.a.mark(function e(){var t,r,s,o,c,i,u,m,d,p,f,v;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a.setState({loading:!0}),e.prev=2,e.next=5,X(Object(h.a)(Object(h.a)(a)),a.props.id);case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.warn(e.t0);case 11:return e.next=13,me(a.props.refer);case 13:return r=e.sent,e.next=16,oe(a.props.refer);case 16:return s=e.sent,e.next=19,ie(a.props.refer);case 19:o=e.sent,c=[],i=[],u={},m={},d=[{value:"",label:"None"}],p=[{value:"",label:"None"},{value:"auto",label:n.a.createElement(se,{key:"auto",turf:{name:"Area surrounnding this canvasser's home address"},icon:C.l})}],o.forEach(function(e){c.push({value:e.name,label:n.a.createElement(Q,{key:e.name,t:e})}),t.ass.teams.forEach(function(t){t.name===e.name&&i.push({value:e.name,label:n.a.createElement(Q,{key:e.name,t:e})})})}),r.forEach(function(e){d.push({value:e.id,label:n.a.createElement(le,{key:e.id,form:e})})}),t.ass.forms.length&&(f=t.ass.forms[0],u={value:f.id,label:n.a.createElement(le,{key:f.id,form:f})}),s.forEach(function(e){p.push({value:e.name,label:n.a.createElement(se,{key:e.id,turf:e})})}),t.ass.turf.length&&(v=t.ass.turf[0],m={value:v.name,label:n.a.createElement(se,{key:v.id,turf:v,icon:t.autoturf?C.l:null})}),a.setState({canvasser:t,teamOptions:c,formOptions:d,turfOptions:p,selectedTeamsOption:i,selectedFormsOption:u,selectedTurfOption:m,loading:!1});case 32:case"end":return e.stop()}},e,this,[[2,8]])})),a._lockCanvasser=function(){var e=Object(i.a)(l.a.mark(function e(t,r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(a.state.server,"/canvass/v1/canvasser/"+(r?"lock":"unlock"),"POST",{id:t.id});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn(e.t0);case 8:a._loadData();case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t,a){return e.apply(this,arguments)}}(),a.state={server:a.props.refer.props.server,canvasser:a.props.canvasser,selectedTeamsOption:null,selectedFormsOption:{},selectedTurfOption:{}},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.state.canvasser||this._loadData(),j.a.rebuild()}},{key:"componentDidUpdate",value:function(){j.a.rebuild()}},{key:"render",value:function(){var e=this,t=this.state.canvasser;if(!t||this.state.loading)return n.a.createElement(Y,null);var a=new P.a("en-US");return n.a.createElement("div",null,n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(M.a,{width:50,src:this.state.canvasser.avatar,loader:n.a.createElement(Y,{width:50}),unloader:n.a.createElement(G,{style:{width:50,height:50,color:"gray"},icon:C.s})})),n.a.createElement("div",{style:{flex:1,overflow:"auto"}},"Name: ",t.name," ",this.props.edit?"":n.a.createElement(b.a,{to:"/canvassers/"+t.id,onClick:function(){return e.props.refer.setState({thisCanvasser:e.props.canvasser})}},"view profile"),n.a.createElement(ae,{canvasser:t}),n.a.createElement("br",null),"Location: ",t.homeaddress?t.homeaddress:"N/A"," ",n.a.createElement("br",null),"Last Login: ",a.format(new Date(t.last_seen-3e4)))),this.props.edit?n.a.createElement(ee,{canvasser:t,refer:this}):"")}}]),t}(r.Component),Q=function(e){return n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(G,{style:{width:50,height:50,color:"gray"},icon:C.t})),n.a.createElement("div",{style:{flex:1,overflow:"auto"}},e.t.name))},ee=function(e){return n.a.createElement("div",null,n.a.createElement("br",null),e.canvasser.locked?n.a.createElement("button",{onClick:function(){return e.refer._lockCanvasser(e.canvasser,!1)}},"Restore Access"):n.a.createElement("button",{onClick:function(){return e.refer._lockCanvasser(e.canvasser,!0)}},"Deny Access"),n.a.createElement("br",null),"Email: ",e.canvasser.email?e.canvasser.email:"N/A",n.a.createElement("br",null),"Phone: ",e.canvasser.phone?e.canvasser.phone:"N/A",n.a.createElement("br",null),"Address: ",n.a.createElement(te,{refer:e.refer,canvasser:e.canvasser}),n.a.createElement("br",null),"# of doors knocked: 0",n.a.createElement("br",null),n.a.createElement("br",null),e.canvasser.ass.direct?n.a.createElement("div",null,"This canvasser is not assigned to any teams. To do so, you must remove the direct form and turf assignments below."):n.a.createElement("div",null,"Teams this canvasser is a part of:",n.a.createElement(_.a,{value:e.refer.state.selectedTeamsOption,onChange:e.refer.handleTeamsChange,options:e.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})),n.a.createElement("br",null),e.refer.state.selectedTeamsOption.length?n.a.createElement("div",null,"Forms / Turf this users sees based on the above team(s):",n.a.createElement("br",null),e.canvasser.ass.forms.map(function(e){return n.a.createElement(le,{key:e.name,form:e})}),e.canvasser.ass.turf.map(function(e){return n.a.createElement(se,{key:e.name,turf:e})})):n.a.createElement("div",null,"Forms this canvasser is directly assigned to:",n.a.createElement(_.a,{value:e.refer.state.selectedFormsOption,onChange:e.refer.handleFormsChange,options:e.refer.state.formOptions,isSearchable:!0,placeholder:"None"}),n.a.createElement("br",null),"Turf this canvasser is directly assigned to:",n.a.createElement(_.a,{value:e.refer.state.selectedTurfOption,onChange:e.refer.handleTurfChange,options:e.refer.state.turfOptions,isSearchable:!0,placeholder:"None"})))},te=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).submitAddress=function(){var e=Object(i.a)(l.a.mark(function e(t){var r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({address:t}),e.prev=1,e.next=4,Object(F.geocodeByAddress)(t);case 4:return r=e.sent,e.next=7,Object(F.getLatLng)(r[0]);case 7:return n=e.sent,e.next=10,H(a.props.refer.state.server,"/canvass/v1/canvasser/update","POST",{id:a.props.canvasser.id,address:t,lat:n.lat,lng:n.lng});case 10:a.props.refer._loadData(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.warn(e.t0);case 16:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),a.state={edit:!1,address:a.props.canvasser.homeaddress?a.props.canvasser.homeaddress:""},a.onTypeAddress=function(e){return a.setState({address:e})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return this.state.edit?n.a.createElement(he,{debounce:500,value:this.state.address,onChange:this.onTypeAddress,onSelect:this.submitAddress}):n.a.createElement("div",null,this.state.address," ",n.a.createElement("button",{onClick:function(){return e.setState({edit:!0})}},"click to edit"))}}]),t}(r.Component),ae=function(e){var t=[],a=e.canvasser.id;return e.canvasser.admin&&t.push(n.a.createElement(G,{icon:C.h,color:"gold",key:a+"admin","data-tip":"Administrator"})),e.canvasser.locked?t.push(n.a.createElement(G,{icon:C.b,color:"red",key:a+"locked","data-tip":"Denied access"})):e.canvasser.ass.ready?t.push(n.a.createElement(G,{icon:C.d,color:"green",key:a+"ready","data-tip":"Ready to Canvass"})):t.push(n.a.createElement(G,{icon:C.i,color:"red",key:a+"notready","data-tip":"Not ready to canvass, check assignments"})),t};function re(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(i.a)(l.a.mark(function e(t,a){var r,n,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.setState({loading:!0}),e.prev=2,n="canvasser/list",a&&(n="team/members/list?teamName="+a),e.next=7,H(t.props.server,"/canvass/v1/"+n);case 7:return s=e.sent,e.next=10,s.json();case 10:r=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.warn(e.t0);case 16:return t.setState({loading:!1}),e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this,[[2,13]])}))).apply(this,arguments)}var se=function(e){return n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(G,{style:{width:50,height:50,color:"gray"},icon:e.icon?e.icon:C.p})),n.a.createElement("div",{style:{flex:1,overflow:"auto"}},e.turf.name))};function oe(e,t){return ce.apply(this,arguments)}function ce(){return(ce=Object(i.a)(l.a.mark(function e(t,a){var r,n,s,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.setState({loading:!0}),e.prev=2,n="turf/list",a&&(n="team/turf/list?teamName="+a),e.next=7,H(t.props.server,"/canvass/v1/"+n);case 7:return s=e.sent,e.next=10,s.json();case 10:o=e.sent,r=o.data?o.data:[],e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.warn(e.t0);case 17:return t.setState({loading:!1}),e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}var le=function(e){return n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(G,{style:{width:50,height:50,color:"gray"},icon:C.e})),n.a.createElement("div",{style:{flex:1,overflow:"auto"}},e.form.name))};function ie(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(i.a)(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,H(t.props.server,"/canvass/v1/team/list");case 4:return r=e.sent,e.next=7,r.json();case 7:a=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn(e.t0);case 13:return e.abrupt("return",a.data);case 14:case"end":return e.stop()}},e,this,[[1,10]])}))).apply(this,arguments)}function me(e,t){return de.apply(this,arguments)}function de(){return(de=Object(i.a)(l.a.mark(function e(t,a){var r,n,s,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.setState({loading:!0}),e.prev=2,n=a?"team/form/list?teamName="+a:"form/list",e.next=6,H(t.props.server,"/canvass/v1/"+n);case 6:return s=e.sent,e.next=9,s.json();case 9:o=e.sent,r=o.data?o.data:[],e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.warn(e.t0);case 16:return t.setState({loading:!1}),e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this,[[2,13]])}))).apply(this,arguments)}function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(i.a)(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,e.next=4,H(t.props.server,"/canvass/v1/sync","POST",{nodes:{}});case 4:return r=e.sent,e.next=7,r.json();case 7:a=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn(e.t0);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e,this,[[1,10]])}))).apply(this,arguments)}var he=function(e){return n.a.createElement(D.a,e,ve)},ve=function(e){var t=e.getInputProps,a=e.getSuggestionItemProps,r=e.suggestions,s=e.loading;return n.a.createElement("div",{className:"autocomplete-root"},n.a.createElement("input",t()),n.a.createElement("div",{className:"autocomplete-dropdown-container"},s&&n.a.createElement("div",null,"Loading..."),r.map(function(e){return n.a.createElement("div",a(e),n.a.createElement("span",null,e.description))})))},be=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e)))._loadData=Object(i.a)(l.a.mark(function e(){var t,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},a.setState({loading:!0}),e.prev=2,e.next=5,H(a.props.server,"/canvass/v1/dashboard");case 5:return r=e.sent,e.next=8,r.json();case 8:t=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.warn(e.t0);case 14:a.setState({data:t,loading:!1});case 15:case"end":return e.stop()}},e,this,[[2,11]])})),a.state={loading:!0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){return n.a.createElement(q,{flag:this.state.loading,func:this._loadData},JSON.stringify(this.state.data))}}]),t}(r.Component),ge=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e)))._loadData=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,re(Object(h.a)(Object(h.a)(a)));case 3:e.t1=e.sent,e.t2={canvassers:e.t1,search:""},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)})),a.state={loading:!0,canvassers:[],search:""},a.onTypeSearch=a.onTypeSearch.bind(Object(h.a)(Object(h.a)(a))),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase()})}},{key:"render",value:function(){var e=this,t=[],a=[],r=[];return this.state.canvassers.forEach(function(s){e.state.search&&!z(s).includes(e.state.search)||(s.locked?t.push(n.a.createElement($,{key:s.id,canvasser:s,refer:e})):s.ass.ready||s.ass.teams.length?a.push(n.a.createElement($,{key:s.id,canvasser:s,refer:e})):r.push(n.a.createElement($,{key:s.id,canvasser:s,refer:e})))}),n.a.createElement(v.a,null,n.a.createElement("div",null,n.a.createElement(g.a,{exact:!0,path:"/canvassers/",render:function(){return n.a.createElement(q,{flag:e.state.loading,func:function(){return e._loadData()}},"Search: ",n.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),n.a.createElement("br",null),r.length?n.a.createElement("div",null,n.a.createElement("h3",null,"Unassigned Canvassers (",r.length,")"),r):"",n.a.createElement("h3",null,"Canvassers (",a.length,")"),a,t.length?n.a.createElement("div",null,n.a.createElement("h3",null,"Denied access (",t.length,")"),t):"")}}),n.a.createElement(g.a,{path:"/canvassers/:id",render:function(t){return n.a.createElement($,{key:t.match.params.id,id:t.match.params.id,edit:!0,refer:e})}})))}}]),t}(r.Component),Ee=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleMembersChange=function(e){a.setState({selectedMembersOption:e})},a.handleTurfChange=function(e){a.setState({selectedTurfOption:e})},a.handleFormChange=function(e){a.setState({selectedFormOption:e})},a._saveTeam=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({saving:!0}),e.prev=1,e.next=4,H(a.props.server,"/canvass/v1/team/members/wipe","POST",{teamName:a.state.thisTeam});case 4:return e.next=6,H(a.props.server,"/canvass/v1/team/turf/wipe","POST",{teamName:a.state.thisTeam});case 6:return e.next=8,H(a.props.server,"/canvass/v1/team/form/wipe","POST",{teamName:a.state.thisTeam});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn(e.t0);case 13:return a.state.selectedMembersOption.map(function(){var e=Object(i.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(a.props.server,"/canvass/v1/team/members/add","POST",{teamName:a.state.thisTeam,cId:t.id});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn(e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()),e.prev=14,e.next=17,H(a.props.server,"/canvass/v1/team/turf/add","POST",{teamName:a.state.thisTeam,turfName:a.state.selectedTurfOption.value});case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(14),console.warn(e.t1);case 22:return e.prev=22,e.next=25,H(a.props.server,"/canvass/v1/team/form/add","POST",{teamName:a.state.thisTeam,fId:a.state.selectedFormOption.value});case 25:e.next=30;break;case 27:e.prev=27,e.t2=e.catch(22),console.warn(e.t2);case 30:a.setState({saving:!1});case 31:case"end":return e.stop()}},e,this,[[1,10],[14,19],[22,27]])})),a._deleteTeam=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(a.props.server,"/canvass/v1/team/delete","POST",{name:a.state.thisTeam});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn(e.t0);case 8:window.location.href="/HelloVoter/#/teams/",a._loadData();case 10:case"end":return e.stop()}},e,this,[[0,5]])})),a._createTeam=Object(i.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.addTeamForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,H(a.props.server,"/canvass/v1/team/create","POST",{name:t.name});case 5:window.location.href="/HelloVoter/#/teams/",a._loadData();case 7:case"end":return e.stop()}},e,this)})),a._loadData=Object(i.a)(l.a.mark(function e(){var t,r,s,o,c,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,ie(Object(h.a)(Object(h.a)(a)));case 3:return t=e.sent,a.setState({teams:t}),e.next=7,re(Object(h.a)(Object(h.a)(a)));case 7:return r=e.sent,e.next=10,oe(Object(h.a)(Object(h.a)(a)));case 10:return s=e.sent,e.next=13,me(Object(h.a)(Object(h.a)(a)));case 13:o=e.sent,c=[],i=[],u=[],r.forEach(function(e){e.locked||e.ass.direct||c.push({value:z(e),id:e.id,label:n.a.createElement($,{key:e.id,canvasser:e,refer:Object(h.a)(Object(h.a)(a))})})}),s.forEach(function(e){i.push({value:e.name,label:n.a.createElement(se,{key:e.name,turf:e})})}),o.forEach(function(e){u.push({value:e.id,label:n.a.createElement(le,{key:e.id,form:e})})}),a.setState({memberOptions:c,turfOptions:i,formOptions:u});case 21:case"end":return e.stop()}},e,this)})),a.state={loading:!0,saving:!1,selectedMembersOption:null,selectedTurfOption:null,selectedFormOption:null,teams:[],thisTeam:null},a.formServerItems=O.a.struct({name:O.a.String}),a.formServerOptions={fields:{server:{label:"Team Name",error:"You must enter a team name."}}},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"onChangeTeam",value:function(e){this.setState({addTeamForm:e})}},{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this;return n.a.createElement(v.a,null,n.a.createElement("div",null,n.a.createElement(g.a,{exact:!0,path:"/teams/",render:function(){return n.a.createElement(q,{flag:e.state.loading,func:e._loadData},e.state.loading?"loading":e.state.teams.map(function(t){return n.a.createElement(Oe,{key:t.name,team:t,refer:e})}),n.a.createElement(b.a,{to:"/teams/add"},n.a.createElement("button",null,"Add Team")))}}),n.a.createElement(g.a,{exact:!0,path:"/teams/add",render:function(){return n.a.createElement("div",null,n.a.createElement(O.a.form.Form,{ref:function(t){return e.addTeamForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTeam(t)},value:e.state.addTeamForm}),n.a.createElement("button",{onClick:function(){return e._createTeam()}},"Submit"))}}),n.a.createElement(g.a,{path:"/teams/edit/:name",render:function(){return n.a.createElement("div",null,n.a.createElement("h3",null,e.state.thisTeam),"Canvassers:",n.a.createElement(_.a,{value:e.state.selectedMembersOption,onChange:e.handleMembersChange,options:e.state.memberOptions,isMulti:!0,isSearchable:!0,placeholder:"Select team members to add"}),n.a.createElement("br",null),"Turf:",n.a.createElement(_.a,{value:e.state.selectedTurfOption,onChange:e.handleTurfChange,options:e.state.turfOptions,isSearchable:!0,placeholder:"Select turf for this team"}),n.a.createElement("br",null),"Form:",n.a.createElement(_.a,{value:e.state.selectedFormOption,onChange:e.handleFormChange,options:e.state.formOptions,isSearchable:!0,placeholder:"Select form for this team"}),n.a.createElement("br",null),e.state.saving?n.a.createElement(Y,null):n.a.createElement("button",{onClick:function(){return e._saveTeam()}},"Save Team"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{onClick:function(){return e._deleteTeam()}},"Delete Team"))}})))}}]),t}(r.Component),Oe=function(e){return n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(G,{style:{width:35,height:35,color:"gray"},icon:C.t})),n.a.createElement("div",{style:{flex:1,overflow:"auto"}},e.team.name," (",n.a.createElement(b.a,{to:"/teams/edit/"+e.team.name,onClick:Object(i.a)(l.a.mark(function t(){var a,r,s,o,c;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.refer.setState({thisTeam:e.team.name,selectedMembersOption:null,selectedTurfOption:null,selectedFormOption:null}),a=[],r=null,s=null,t.prev=4,t.next=7,re(e.refer,e.team.name);case 7:t.sent.forEach(function(t){t.locked||t.ass.direct||a.push({value:z(t),id:t.id,label:n.a.createElement($,{key:t.id,canvasser:t,refer:e.refer})})}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.warn(t.t0);case 14:return t.prev=14,t.next=17,oe(e.refer,e.team.name);case 17:(o=t.sent).length&&(r={value:o[0].name,label:n.a.createElement(se,{key:o[0].name,turf:o[0]})}),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(14),console.warn(t.t1);case 24:return t.prev=24,t.next=27,me(e.refer,e.team.name);case 27:(c=t.sent).length&&(s={value:c[0].id,label:n.a.createElement(le,{key:c[0].id,form:c[0]})}),t.next=34;break;case 31:t.prev=31,t.t2=t.catch(24),console.warn(t.t2);case 34:e.refer.setState({selectedMembersOption:a,selectedTurfOption:r,selectedFormOption:s});case 35:case"end":return t.stop()}},t,this,[[4,11],[14,21],[24,31]])}))},"edit"),")"))},ye=a(207),ke=a.n(ye),we=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).submitAddress=function(){var e=Object(i.a)(l.a.mark(function e(t){var r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({address:t}),e.prev=1,e.next=4,Object(F.geocodeByAddress)(t);case 4:return r=e.sent,e.next=7,Object(F.getLatLng)(r[0]);case 7:n=e.sent,a.setState({addressCoords:n}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),a.handleDrawChange=function(e){a.setState({selectedDrawOption:e,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,importFileData:null,addressCoords:null,address:""})},a.handleStateChange=function(e){a.setState({selectedStateOption:e})},a.handleTypeChange=function(e){a.setState({selectedTypeOption:e})},a.handleDistrictChange=function(e){a.setState({selectedDistrictOption:e})},a.handleImportFiles=function(e){var t=new FileReader;t.onload=function(e){a.setState({importFileData:e.target.result})},t.readAsText(e[0])},a._deleteTurf=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(a.props.server,"/canvass/v1/turf/delete","POST",{name:a.state.thisTurf.name});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.warn(e.t0);case 8:a._loadTurf(Object(h.a)(Object(h.a)(a))),window.location.href="/HelloVoter/#/turf/";case 10:case"end":return e.stop()}},e,this,[[0,5]])})),a._createTurf=Object(i.a)(l.a.mark(function e(){var t,r,n,s,o,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.addTurfForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:if(a.setState({saving:!0}),r={},null===a.state.importFileData){e.next=16;break}e.prev=6,r=JSON.parse(a.state.importFileData),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(6),console.warn(e.t0),e.abrupt("return");case 14:e.next=46;break;case 16:if("radius"!==a.state.selectedDrawOption.value){e.next=20;break}r=ke()([a.state.addressCoords.lng,a.state.addressCoords.lat],1e3),e.next=46;break;case 20:s=a.state.selectedStateOption.value,e.t1=a.state.selectedTypeOption.value,e.next="state"===e.t1?24:"cd"===e.t1?26:"sldu"===e.t1?28:"sldl"===e.t1?30:32;break;case 24:return n="states/"+s+"/shape.geojson",e.abrupt("break",33);case 26:return n="cds/2016/"+a.state.selectedDistrictOption.value+"/shape.geojson",e.abrupt("break",33);case 28:return n="states/"+s+"/sldu/"+a.state.selectedDistrictOption.value+".geojson",e.abrupt("break",33);case 30:return n="states/"+s+"/sldl/"+a.state.selectedDistrictOption.value+".geojson",e.abrupt("break",33);case 32:throw new Error("unknown selectedTypeOption");case 33:return e.prev=33,e.next=36,fetch("https://raw.githubusercontent.com/OurVoiceUSA/districts/gh-pages/"+n);case 36:return o=e.sent,e.next=39,o.json();case 39:r=e.sent,e.next=46;break;case 42:return e.prev=42,e.t2=e.catch(33),console.warn(e.t2),e.abrupt("return");case 46:return e.prev=46,c=r.geometry?r.geometry:r,e.next=50,H(a.props.server,"/canvass/v1/turf/create","POST",{name:t.name,geometry:c});case 50:e.next=55;break;case 52:e.prev=52,e.t3=e.catch(46),console.warn(e.t3);case 55:a.setState({saving:!1}),window.location.href="/HelloVoter/#/turf/",a._loadTurf();case 58:case"end":return e.stop()}},e,this,[[6,10],[33,42],[46,52]])})),a.selectedTypeFetch=Object(i.a)(l.a.mark(function e(){var t,r,n,s,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.selectedTypeOption){e.next=2;break}return e.abrupt("return");case 2:a.setState({districtOptions:[]}),r=a.state.selectedStateOption.value,e.t0=a.state.selectedTypeOption.value,e.next="cd"===e.t0?7:"sldu"===e.t0?9:"sldl"===e.t0?11:13;break;case 7:return t="cds/2016/",e.abrupt("break",14);case 9:return t="states/"+r+"/sldu/",e.abrupt("break",14);case 11:return t="states/"+r+"/sldl/",e.abrupt("break",14);case 13:return e.abrupt("return");case 14:return e.next=16,fetch("https://api.github.com/repos/OurVoiceUSA/districts/contents/"+t);case 16:return n=e.sent,s=[],e.next=20,n.json();case 20:o=e.sent,e.t1=a.state.selectedTypeOption.value,e.next="cd"===e.t1?24:26;break;case 24:return o.forEach(function(e){e.name.includes(a.state.selectedStateOption.value)&&s.push({value:e.name,label:e.name})}),e.abrupt("break",27);case 26:o.forEach(function(e){var t=e.name.replace(".geojson","");s.push({value:t,label:t})});case 27:a.setState({districtOptions:s});case 28:case"end":return e.stop()}},e,this)})),a._loadTurf=Object(i.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,oe(Object(h.a)(Object(h.a)(a)));case 3:t=e.sent,a.setState({loading:!1,turf:t});case 5:case"end":return e.stop()}},e,this)})),a.state={loading:!0,saving:!1,selectedDrawOption:null,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,districtOptions:[],turf:[],thisTurf:{},importFileData:null,address:"",addressCoords:null},a.formServerItems=O.a.struct({name:O.a.String}),a.formServerOptions={fields:{server:{label:"Turf Name",error:"You must enter a turf name."}}},a.onTypeAddress=function(e){return a.setState({address:e})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"onChangeTurf",value:function(e){this.setState({addTurfForm:e})}},{key:"_showDistrictOption",value:function(){if(!this.state.selectedTypeOption)return!1;switch(this.state.selectedTypeOption.value){case"cd":case"sldu":case"sldl":return!0;default:return!1}}},{key:"_showSubmitButton",value:function(){return!!this.state.selectedDrawOption&&(!(!this.state.selectedTypeOption||"state"!==this.state.selectedTypeOption.value)||(!(!this._showDistrictOption()||!this.state.selectedDistrictOption)||(null!==this.state.importFileData||null!==this.state.addressCoords)))}},{key:"componentDidMount",value:function(){this._loadTurf()}},{key:"render",value:function(){var e=this,t=[{value:"select",label:"Select from legislative boundary"},{value:"import",label:"Import GeoJSON shape file"},{value:"radius",label:"Area surrounding an address"},{value:"draw",label:"Manually draw with your mouse"}];return n.a.createElement(v.a,null,n.a.createElement("div",null,n.a.createElement(g.a,{exact:!0,path:"/turf/",render:function(){return n.a.createElement(q,{flag:e.state.loading,func:e._loadTurf},e.state.loading?"loading":e.state.turf.map(function(t){return n.a.createElement(se,{key:t.name,turf:t,refer:e})}),n.a.createElement(b.a,{to:"/turf/add"},n.a.createElement("button",null,"Add Turf")))}}),n.a.createElement(g.a,{exact:!0,path:"/turf/add",render:function(){return n.a.createElement("div",null,"Turf Name:",n.a.createElement(O.a.form.Form,{ref:function(t){return e.addTurfForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTurf(t)},value:e.state.addTurfForm}),n.a.createElement("br",null),"Method of generating turf:",n.a.createElement(_.a,{value:e.state.selectedDrawOption,onChange:e.handleDrawChange,options:t,placeholder:"Select method"}),n.a.createElement(xe,{refer:e}),e._showSubmitButton()?n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("button",{onClick:function(){return e._createTurf()}},"Submit")):"")}}),n.a.createElement(g.a,{path:"/turf/view/:name",render:function(){return n.a.createElement("div",null,n.a.createElement("h3",null,e.state.thisTurf.name),e.state.thisTurf.geometry,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("button",{onClick:function(){return e._deleteTurf()}},"Delete Turf"))}})))}}]),t}(r.Component),xe=function(e){if(!e.refer.state.selectedDrawOption)return n.a.createElement("br",null);var t=[];Object.keys(U).map(function(e){return t.push({value:e,label:U[e]})});switch(e.refer.state.selectedDrawOption.value){case"select":return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("br",null),"State or region:",n.a.createElement(_.a,{value:e.refer.state.selectedStateOption,onChange:e.refer.handleStateChange,options:t,isSearchable:!0,placeholder:"Select state or region"})),e.refer.state.selectedStateOption?n.a.createElement("div",null,n.a.createElement("br",null),"District Type:",n.a.createElement(_.a,{value:e.refer.state.selectedTypeOption,onChange:e.refer.handleTypeChange,onMenuClose:e.refer.selectedTypeFetch,options:[{value:"state",label:"State"},{value:"cd",label:"Congressional"},{value:"sldu",label:"State Senate"},{value:"sldl",label:"State House"}],isSearchable:!0,placeholder:"Select district for this turf"})):"",e.refer._showDistrictOption()?n.a.createElement("div",null,n.a.createElement("br",null),"District Number:",e.refer.state.districtOptions.length?n.a.createElement(_.a,{value:e.refer.state.selectedDistrictOption,onChange:e.refer.handleDistrictChange,options:e.refer.state.districtOptions,isSearchable:!0,placeholder:"Select district for this turf"}):n.a.createElement(Y,null)):"");case"import":return n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("input",{type:"file",accept:".geojson,.json",onChange:function(t){return e.refer.handleImportFiles(t.target.files)}}));case"radius":return n.a.createElement("div",null,n.a.createElement("br",null),"Type your address:",n.a.createElement(he,{debounce:500,value:e.refer.state.address,onChange:e.refer.onTypeAddress,onSelect:e.refer.submitAddress}));case"draw":return n.a.createElement("div",null,n.a.createElement("br",null),"Use a ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://google-developers.appspot.com/maps/documentation/utils/geojson/"},"GeoJSON Draw Tool"),', save the file, and then select the "Import GeoJSON shape file" option.');default:return n.a.createElement("div",null,"Unknown generation method.")}},Se=a(137),je=a.n(Se);je.a.setAppElement(document.getElementById("root"));var Te={content:{top:"15%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},Ce=O.a.enums({String:"Text Input",TEXTBOX:"Large Text Box",Number:"Number",Boolean:"On/Off Switch",SAND:"Agree/Disagree"},"FTYPE"),Fe={key:O.a.String,label:O.a.String,type:Ce},De={fields:{key:{label:"Input Key",help:"The spreadsheet column name."},label:{label:"Input Label",help:"Label the user sees on the form."},type:{help:"The type of input the user can enter."}}},Ae={FullName:{label:"Full Name",type:"String",optional:!0},Phone:{label:"Phone Number",type:"Number",optional:!0},Email:{label:"Email Address",type:"String",optional:!0},RegisteredToVote:{label:"Are you registered to vote?",type:"Boolean",optional:!0},PartyAffiliation:{label:"Party Affiliation",type:"List",optional:!0,options:["No Party Preference","Democratic","Republican","Green","Libertarian","Other"]}},Ne=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e)))._loadForms=Object(i.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,me(Object(h.a)(Object(h.a)(a)));case 3:e.t1=e.sent,e.t2={forms:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)})),a._createForm=Object(i.a)(l.a.mark(function e(){var t,r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.addFormForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:if(a.setState({saving:!0}),(r=t.name.trim()).match(/^[a-zA-Z0-9\-_ ]+$/)){e.next=8;break}return console.warn("From name can only contain alphanumeric characters, and spaces and dashes."),e.abrupt("return");case 8:if(!(r.length>255)){e.next=11;break}return console.warn("Form name cannot be longer than 255 characters."),e.abrupt("return");case 11:return e.prev=11,n={name:r,questions:a.state.fields,questions_order:a.state.order},e.next=15,H(a.props.server,"/canvass/v1/form/create","POST",n);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),console.warn(e.t0);case 20:a.setState({saving:!1}),window.location.href="/HelloVoter/#/forms/",a._loadForms();case 23:case"end":return e.stop()}},e,this,[[11,17]])}));var r=JSON.parse(JSON.stringify(Ae)),n=Object.keys(r);return a.mainForm=O.a.struct({name:O.a.String}),a.state={loading:!0,forms:[],thisForm:{},fields:r,order:n,customForm:null},a.formServerItems=O.a.struct({name:O.a.String}),a.customFormItems=O.a.struct(Fe),a.formServerOptions={fields:{name:{label:"Form Name",error:"You must enter a form name."}}},a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a.openModal=a.openModal.bind(Object(h.a)(Object(h.a)(a))),a.closeModal=a.closeModal.bind(Object(h.a)(Object(h.a)(a))),a.doAddCustom=a.doAddCustom.bind(Object(h.a)(Object(h.a)(a))),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"openModal",value:function(){this.setState({customForm:O.a.struct(Fe)})}},{key:"closeModal",value:function(){this.setState({customForm:null})}},{key:"doAddCustom",value:function(){var e=this.state,t=e.fields,a=e.order,r=this.customForm.getValue();if(null!==r){var n=JSON.parse(JSON.stringify(r)),s=n.key;delete n.key,n.optional=!0,t[s]?console.warn("Duplicate"):(t[s]=n,a[a.length]=s,this.setState({customForm:null,fields:t,order:a}))}}},{key:"doShowCustom",value:function(){this.setState({customForm:O.a.struct(Fe)})}},{key:"inputTypeToReadable",value:function(e){switch(e){case"String":return"Text Input";case"TEXTBOX":return"Text Box";case"Number":return"Number";case"Boolean":return"On/Off Switch";case"SAND":return"Agree/Disagree";case"List":return"Select from List";default:return e}}},{key:"rmField",value:function(e){var t=this.state,a=t.fields,r=t.order;for(var n in a)a[n]===e&&(delete a[n],r.splice(r.indexOf(n),1));this.setState({fields:a,order:r}),this.forceUpdate()}},{key:"onChange",value:function(e){"List"===e.type&&(e=O.a.String)}},{key:"onChangeForm",value:function(e){this.setState({addFormForm:e})}},{key:"componentDidMount",value:function(){this._loadForms()}},{key:"render",value:function(){var e=this;return n.a.createElement(v.a,null,n.a.createElement("div",null,n.a.createElement(g.a,{exact:!0,path:"/forms/",render:function(){return n.a.createElement(q,{flag:e.state.loading,func:function(){return e._loadForms()}},e.state.forms.map(function(t){return n.a.createElement(le,{key:t.id,form:t,refer:e})}),n.a.createElement(b.a,{to:"/forms/add"},n.a.createElement("button",null,"Add Form")))}}),n.a.createElement(g.a,{path:"/forms/add",render:function(t){return n.a.createElement("div",null,n.a.createElement(O.a.form.Form,{ref:function(t){return e.addFormForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeForm(t)},value:e.state.addFormForm}),n.a.createElement("div",{style:{margin:25}},"Items in your Canvassing form: ",n.a.createElement("button",{onClick:e.openModal},n.a.createElement(G,{icon:C.n})," Add Item")),Object.keys(e.state.fields).map(function(t){var a=e.state.fields[t];return n.a.createElement("li",{key:t,style:{marginLeft:25}},a.label+(a.required?" *":"")," : ",e.inputTypeToReadable(a.type)," ",n.a.createElement(G,{icon:C.r,color:"red"}))}),e.state.saving?n.a.createElement(Y,null):n.a.createElement("button",{style:{margin:25},onClick:function(){return e._createForm()}},"Create Form"),n.a.createElement(je.a,{isOpen:null!==e.state.customForm,onAfterOpen:e.afterOpenModal,onRequestClose:e.closeModal,style:Te,contentLabel:"Add item to form"},n.a.createElement(O.a.form.Form,{ref:function(t){return e.customForm=t},type:e.customFormItems,options:De,onChange:e.onChange,value:e.state.customForm}),n.a.createElement("button",{onClick:e.doAddCustom},"Add this item"),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0",n.a.createElement("button",{onClick:function(){return e.setState({customForm:null})}},"Dismiss")))}}),n.a.createElement(g.a,{path:"/forms/edit/:id",render:function(t){return n.a.createElement(le,{key:e.state.thisForm.id,form:e.state.thisForm,refer:e})}})))}}]),t}(r.Component),_e=a(68),Ie=a(208),Me=a(209),Pe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e)))._loadData=Object(i.a)(l.a.mark(function e(){var t,r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,oe(Object(h.a)(Object(h.a)(a)));case 3:return r=e.sent,e.next=6,pe(Object(h.a)(Object(h.a)(a)));case 6:(n=e.sent.nodes)||(n={}),Object.keys(n).forEach(function(e){n[e]&&"address"===n[e].type&&t.push(n[e])}),a.setState({turfs:r,addresses:t});case 10:case"end":return e.stop()}},e,this)})),a.onMarkerClick=function(e,t,r){a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onMapClicked=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.state={turfs:[],addresses:[],showingInfoWindow:!1,selectedPlace:{}},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e,t=this,a=[],r=this.state.addresses,s=(e=this.props).isGeolocationAvailable&&e.isGeolocationEnabled?e.coords?{access:!0,lng:e.coords.longitude,lat:e.coords.latitude}:{access:!0}:{access:!1};return this.state.turfs.forEach(function(e){Object(Ie.geojson2polygons)(JSON.parse(e.geometry)).forEach(function(e){return a.push(e)})}),n.a.createElement(_e.Map,{google:this.props.google,zoom:14,center:s,onClick:this.onMapClicked},r.map(function(e,a){return n.a.createElement(_e.Marker,{key:a,onClick:t.onMarkerClick,title:e.address.join(" "),position:{lat:e.latlng.latitude,lng:e.latlng.longitude}})}),a.map(function(e,t){return n.a.createElement(_e.Polygon,{key:t,paths:e,strokeColor:"#0000FF",strokeWeight:5,fillColor:"#000000",fillOpacity:0})}),n.a.createElement(_e.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},n.a.createElement("div",null,n.a.createElement("h1",null,this.state.selectedPlace.title))))}}]),t}(r.Component),Ve=Object(_e.GoogleApiWrapper)(function(e){return{apiKey:e.apiKey}})(Object(Me.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})(Pe)),Le=a(210),Ue=a.n(Le),He=O.a.enums({address1:"Address 1",address2:"Address 2",city:"City",state:"State",zip:"Zip Code"},"HEADER"),Re=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).preProcess=function(){var e=Object(i.a)(l.a.mark(function e(t){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.shift(),t.pop(),a.setState({data:t,headers:r});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.onHeadersSubmit=function(e){e.preventDefault(),a.setState({loading:!0}),setTimeout(function(){return a.setState({loading:!1,headers:[]})},3e3)},a.state={loading:!1,data:null,headers:[]},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"preProcessError",value:function(e){console.warn("BOOO = "+e)}},{key:"render",value:function(){if(this.state.loading)return n.a.createElement(Y,null);if(this.state.headers.length){var e={},t={fields:{}};for(var a in this.state.headers)e[a]=O.a.maybe(He),t.fields[a]={label:this.state.headers[a]};var r=O.a.struct(e);return n.a.createElement("div",null,"Assign each header to its data type ",n.a.createElement("br",null),n.a.createElement("form",{onSubmit:this.onHeadersSubmit},n.a.createElement(O.a.form.Form,{ref:"form",type:r,options:t}),n.a.createElement("div",{className:"form-group"},n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save"))),n.a.createElement("hr",null),"NOTE: This import tool does not work on all voter files, as there is no standard format. We do our best to accommodate the most common patterns. If your import doesn't work,\xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/issues/new"},"submit an issue")," and a volunteer programmer can work to fix the issue in the future. If you need the import done now, contact someone you know who's good with Microsoft\xa9 Excel or LibreOffice\xa9 and they can reformat your voter file so it works with this import tool.")}return n.a.createElement(Ue.a,{label:"Data Importa",onError:this.preProcessError,onFileLoaded:this.preProcess})}}]),t}(r.Component),We=a(527),Be=a(200),Je=a(518),Ke=a(520),Ge=a(31),Ye=a(519),qe=[{name:"Republican",value:400,v:89,color:"red"},{name:"Democratic",value:300,v:100},{name:"UUP",value:200,v:200},{name:"Unaffiliated",value:200,v:20}],ze=[{name:"Republican",value:2400},{name:"Democratic",value:4567},{name:"UUP",value:1398},{name:"Unaffiliated",value:9800}],Xe=function(e){var t=e.value,a=e.percent,r=e.x,s=e.y,o=e.midAngle;return n.a.createElement("g",{transform:"translate(".concat(r,", ").concat(s,")"),textAnchor:o<-90||o>=90?"end":"start"},n.a.createElement("text",{x:0,y:0},"Count: ".concat(t)),n.a.createElement("text",{x:0,y:20},"(Percent: ".concat((100*a).toFixed(2),"%)")))},Ze=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={animation:!0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h3",null,"Analytics"),n.a.createElement(We.a,{width:800,height:400},n.a.createElement(Be.a,null),n.a.createElement(Je.a,{data:qe,dataKey:"value",cx:200,cy:200,startAngle:180,endAngle:0,outerRadius:80,label:!0},qe.map(function(e,t){return n.a.createElement(Ke.a,{key:"slice-".concat(t),fill:["red","blue","yellow","grey"][t]})}),n.a.createElement(Ge.a,{value:"Canvassing",position:"outside"}),n.a.createElement(Ye.a,{position:"outside"})),n.a.createElement(Je.a,{data:ze,dataKey:"value",cx:600,cy:200,startAngle:180,endAngle:-180,innerRadius:60,outerRadius:80,label:Xe,paddingAngle:5,isAnimationActive:this.state.animation},ze.map(function(e,t){return n.a.createElement(Ke.a,{key:"slice-".concat(t),fill:["red","blue","yellow","grey"][t]})}),n.a.createElement(Ge.a,{width:50,position:"center"},"Agreed with you"))))}}]),t}(r.Component),$e=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,"Settings Component")}}]),t}(r.Component),Qe=a(522),et=a(529),tt=function(e){function t(e){var a,r;Object(u.a)(this,t),a=Object(d.a)(this,Object(p.a)(t).call(this,e));try{r=a.props.location.pathname.split("/").pop(),k()(r)}catch(n){console.warn("Unable to extract jwt from URI: "+n),r="error"}return a.state={jwt:r},a.props.refer.setState({jwt:r}),localStorage.setItem("jwt",r),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return"error"===this.state.jwt?n.a.createElement("div",null,"There was an error parsing the jwt"):n.a.createElement(Qe.a,{render:function(){return n.a.createElement(et.a,{to:"/"})}})}}]),t}(r.Component),at=a(88),rt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=Object(i.a)(l.a.mark(function e(){var t,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,H(a.props.server,"/canvass/v1/dashboard");case 4:return r=e.sent,e.next=7,r.json();case 7:t=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.warn(e.t0);case 13:a.setState({cb_version:t.version?t.version:"unknown"});case 14:case"end":return e.stop()}},e,this,[[1,10]])})),a.state={cb_version:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",null,"HelloVoter"," version ","0.1.0"),n.a.createElement("div",null,this.state.cb_version?"canvass-broker version "+this.state.cb_version:n.a.createElement(N.a,{height:15,type:"ThreeDots"})),n.a.createElement("div",null,"\xa9 2018, Our Voice USA, a 501(c)(3) Non-Profit Organization. Not for any candidate or political party."),n.a.createElement("div",null,"This program is free software; refer to our ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/blob/master/LICENSE"},"License")," for more details."),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/OurVoiceUSA"},n.a.createElement(G,{icon:at.c})," @OurVoiceUSA")),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/OurVoiceUsa"},n.a.createElement(G,{icon:at.a})," @OurVoiceUSA")),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ourvoiceusa.org/"},n.a.createElement(G,{icon:C.k})," ourvoiceusa.org")))}}]),t}(r.Component),nt=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e)))._loadKeys=Object(i.a)(l.a.mark(function e(){var t,r,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.server.hostname){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,H(a.state.server,"/canvass/v1/google_maps_key");case 4:return t=e.sent,e.next=7,t.json();case 7:r=e.sent,(n=document.createElement("script")).type="text/javascript",n.src="https://maps.googleapis.com/maps/api/js?key="+r.google_maps_key+"&libraries=places",document.head.appendChild(n),a.setState({google_maps_key:r.google_maps_key});case 13:case"end":return e.stop()}},e,this)})),a.doSave=Object(i.a)(l.a.mark(function e(){var t,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.refs.mainForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:if(!0===t.ack){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,a.singHello(t.server);case 7:!0!==(r=e.sent).flag?console.warn(r.error?"Error":"Connection Successful",r.msg,[{text:"OK"}],{cancelable:!1}):console.warn(r);case 9:case"end":return e.stop()}},e,this)})),a.singHello=function(){var e=Object(i.a)(l.a.mark(function e(t){var r,n,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("server",t),e.prev=1,e.next=4,fetch("https://"+t+"/canvass/v1/hello",{method:"POST",headers:{Authorization:"Bearer "+(a.state.jwt?a.state.jwt:"of the one ring"),"Content-Type":"application/json"},body:JSON.stringify({longitude:-118,latitude:40})});case 4:if(r=e.sent,n=r.headers.get("x-sm-oauth-url")){e.next=8;break}return e.abrupt("return",{error:!0,msg:"Missing required header."});case 8:e.t0=r.status,e.next=200===e.t0?11:400===e.t0?12:401===e.t0?13:403===e.t0?15:16;break;case 11:return e.abrupt("break",17);case 12:return e.abrupt("return",{error:!0,msg:"The server didn't understand the request sent from this device."});case 13:return window.location.href=n+"/gm?app=HelloVoter",e.abrupt("return",{error:!1,flag:!0});case 15:return e.abrupt("return",{error:!0,msg:"We're sorry, but your request to canvass with this server has been rejected."});case 16:return e.abrupt("return",{error:!0,msg:"Unknown error connecting to server."});case 17:return e.next=19,r.json();case 19:if(s=e.sent,console.warn(s),a.setState({server:{hostname:t}}),localStorage.setItem("server",t),!0===s.data.ready){e.next=27;break}return e.abrupt("return",{error:!1,msg:"The server said: "+s.msg});case 27:return console.warn({server:t,dbx:null,user:a.state.user}),e.abrupt("return",{error:!1,flag:!0});case 29:e.next=35;break;case 31:return e.prev=31,e.t1=e.catch(1),console.warn("singHello: "+e.t1),e.abrupt("return",{error:!0,msg:"Unable to make a connection to target server"});case 35:case"end":return e.stop()}},e,this,[[1,31]])}));return function(t){return e.apply(this,arguments)}}();var r=x.a.parse(window.location.search);return a.state={server:{hostname:localStorage.getItem("server"),jwt:localStorage.getItem("jwt")},connectForm:{server:r.server}},a.formServerItems=O.a.struct({server:O.a.String,ack:O.a.subtype(O.a.Boolean,function(e){return e})}),a.formServerOptions={fields:{server:{label:"Server Domain Name",help:"Enter the domain name of the server you wish to connect to.",error:"You must enter a domain name."},ack:{label:"Terms of Use",help:"By checking this you acknowledge that the server to which you are connecting is not affiliated with Our Voice USA and the data you send and receive is governed by that server's terms of use.",error:"You must acknowledge the terms of use."}}},a.onChange=a.onChange.bind(Object(h.a)(Object(h.a)(a))),a.doSave=a.doSave.bind(Object(h.a)(Object(h.a)(a))),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this._loadKeys()}},{key:"onChange",value:function(e){this.setState({connectForm:e})}},{key:"getName",value:function(){var e;try{e=k()(this.state.server.jwt).name}catch(t){console.warn(t)}return e}},{key:"_logout",value:function(){localStorage.removeItem("server"),localStorage.removeItem("jwt"),this.setState({server:{}})}},{key:"render",value:function(){var e=this,t=this.state.server;return t.hostname?n.a.createElement(v.a,null,n.a.createElement(W,null,n.a.createElement(j.a,null),n.a.createElement(B,null,n.a.createElement("div",{style:{margin:10}},"Welcome, ",this.getName(),"!",n.a.createElement("br",null),"Server: ",this.state.server.hostname),n.a.createElement("hr",null),n.a.createElement(J,null,n.a.createElement(G,{icon:C.g,"data-tip":"Dashboard"})," ",n.a.createElement(b.a,{to:"/"},"Dashboard")),n.a.createElement(J,null,n.a.createElement(G,{icon:C.s,"data-tip":"Canvassers"})," ",n.a.createElement(b.a,{to:"/canvassers/"},"Canvassers")),n.a.createElement(J,null,n.a.createElement(G,{icon:C.t,"data-tip":"Teams"})," ",n.a.createElement(b.a,{to:"/teams/"},"Teams")),n.a.createElement(J,null,n.a.createElement(G,{icon:C.m,"data-tip":"Turf"})," ",n.a.createElement(b.a,{to:"/turf/"},"Turf")),n.a.createElement(J,null,n.a.createElement(G,{icon:C.e,"data-tip":"Forms"})," ",n.a.createElement(b.a,{to:"/forms/"},"Forms")),n.a.createElement(J,null,n.a.createElement(G,{icon:C.k,"data-tip":"Map"})," ",n.a.createElement(b.a,{to:"/map/"},"Map")),n.a.createElement(J,null,n.a.createElement(G,{icon:C.j,"data-tip":"Import Data"})," ",n.a.createElement(b.a,{to:"/import/"},"Import Data")),n.a.createElement(J,null,n.a.createElement(G,{icon:C.c,"data-tip":"Analytics"})," ",n.a.createElement(b.a,{to:"/analytics/"},"Analytics")),n.a.createElement(J,null,n.a.createElement(G,{icon:C.f,"data-tip":"Settings"})," ",n.a.createElement(b.a,{to:"/settings/"},"Settings")),n.a.createElement(J,null,n.a.createElement(G,{icon:C.o,"data-tip":"Logout"})," ",n.a.createElement("button",{onClick:function(){return e._logout()}},"Logout")),n.a.createElement("hr",null),n.a.createElement(J,null,n.a.createElement(G,{icon:C.a,"data-tip":"About"})," ",n.a.createElement(b.a,{to:"/about/"},"About")),n.a.createElement(J,null,n.a.createElement(G,{icon:at.b,"data-tip":"Help"})," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/tree/master/docs/"},"Help"))),n.a.createElement(K,null,n.a.createElement(g.a,{exact:!0,path:"/",render:function(){return n.a.createElement(be,{server:t})}}),n.a.createElement(g.a,{path:"/canvassers/",render:function(e){return n.a.createElement(ge,Object.assign({server:t},e))}}),n.a.createElement(g.a,{path:"/teams/",render:function(){return n.a.createElement(Ee,{server:t})}}),n.a.createElement(g.a,{path:"/turf/",render:function(){return n.a.createElement(we,{server:t})}}),n.a.createElement(g.a,{path:"/forms/",render:function(){return n.a.createElement(Ne,{server:t})}}),n.a.createElement(g.a,{path:"/map/",render:function(){return n.a.createElement(Ve,{server:t,apiKey:e.state.google_maps_key})}}),n.a.createElement(g.a,{path:"/import/",render:function(){return n.a.createElement(Re,{server:t})}}),n.a.createElement(g.a,{path:"/analytics/",render:function(){return n.a.createElement(Ze,{server:t})}}),n.a.createElement(g.a,{path:"/settings/",render:function(){return n.a.createElement($e,{server:t})}}),n.a.createElement(g.a,{path:"/jwt/",render:function(t){return n.a.createElement(tt,Object.assign({},t,{refer:e}))}}),n.a.createElement(g.a,{path:"/about/",render:function(){return n.a.createElement(rt,{server:t})}})))):n.a.createElement("div",{align:"center"},n.a.createElement("br",null),n.a.createElement("strong",null,"HelloVoter"),n.a.createElement("div",null,"Version ","0.1.0"),n.a.createElement("br",null),n.a.createElement(O.a.form.Form,{ref:"mainForm",type:this.formServerItems,options:this.formServerOptions,onChange:this.onChange,value:this.state.connectForm}),n.a.createElement("div",{className:"form-group"},n.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.doSave},"Connect to Server")))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[224,2,1]]]);
//# sourceMappingURL=main.fda1f8bd.chunk.js.map