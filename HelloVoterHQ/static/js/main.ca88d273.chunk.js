(window.webpackJsonpHelloVoterReact=window.webpackJsonpHelloVoterReact||[]).push([[0],{194:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return k});var n=a(20),r=a(5),l=a.n(r),o=a(11),s=a(13),c=a(12),i=a(15),u=a(16),d=a(4),p=a(17),m=a(0),f=a.n(m),b=a(28),h=a(135),v=a(32),g=a(68),O=a(54),E=a(195),y=a(3),k=function(t){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).handleTeamsChange=function(){var e=Object(o.a)(l.a.mark(function e(a){var n,r,o,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,r=Object(y.h)(t.state.selectedTeamsOption,a),e.t0=l.a.keys(r.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(y.g)(n,y.a+"/turf/assigned/team/add","POST",{teamId:r.add[o],turfId:t.props.id});case 10:e.next=6;break;case 12:e.t2=l.a.keys(r.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(y.g)(n,y.a+"/turf/assigned/team/remove","POST",{teamId:r.rm[s],turfId:t.props.id});case 17:e.next=13;break;case 19:Object(y.z)("Team assignments saved."),t.setState({selectedTeamsOption:a}),e.next=26;break;case 23:e.prev=23,e.t4=e.catch(3),Object(y.y)(e.t4,"Unable to add/remove teams.");case 26:t.props.refer.setState({saving:!1});case 27:case"end":return e.stop()}},e,null,[[3,23]])}));return function(t){return e.apply(this,arguments)}}(),t.handleMembersChange=function(){var e=Object(o.a)(l.a.mark(function e(a){var n,r,o,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,r=Object(y.h)(t.state.selectedMembersOption,a),e.t0=l.a.keys(r.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(y.g)(n,y.a+"/turf/assigned/volunteer/add","POST",{vId:r.add[o],turfId:t.props.id});case 10:e.next=6;break;case 12:e.t2=l.a.keys(r.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(y.g)(n,y.a+"/turf/assigned/volunteer/remove","POST",{vId:r.rm[s],turfId:t.props.id});case 17:e.next=13;break;case 19:Object(y.z)("Volunteer assignments saved."),t.setState({selectedMembersOption:a}),e.next=26;break;case 23:e.prev=23,e.t4=e.catch(3),Object(y.y)(e.t4,"Unable to add/remove teams.");case 26:t.props.refer.setState({saving:!1});case 27:case"end":return e.stop()}},e,null,[[3,23]])}));return function(t){return e.apply(this,arguments)}}(),t._loadData=Object(o.a)(l.a.mark(function e(){var a,r,o,s,c,i,u,p,m,b,h,v;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r={},o=[],s=[],c=[],i=[],t.setState({loading:!0}),e.prev=3,e.next=6,Promise.all([Object(y.r)(a,t.props.id,!0),Object(y.u)(a),Object(y.u)(a,"turf",t.props.id),Object(y.q)(a),Object(y.q)(a,"turf",t.props.id)]);case 6:u=e.sent,p=Object(n.a)(u,5),r=p[0],o=p[1],s=p[2],c=p[3],i=p[4],e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(3),Object(y.y)(e.t0,"Unable to load turf info."),e.abrupt("return",t.setState({loading:!1}));case 19:m=[],b=[],h=[],v=[],c.forEach(function(e){m.push({value:Object(y.v)(e),id:e.id,label:f.a.createElement(O.a,{global:a,key:e.id,team:e,refer:Object(d.a)(t)})})}),i.forEach(function(e){h.push({value:Object(y.v)(e),id:e.id,label:f.a.createElement(O.a,{global:a,key:e.id,team:e,refer:Object(d.a)(t)})})}),o.forEach(function(e){b.push({value:Object(y.v)(e),id:e.id,label:f.a.createElement(g.a,{global:a,key:e.id,volunteer:e,refer:Object(d.a)(t)})})}),s.forEach(function(e){v.push({value:Object(y.v)(e),id:e.id,label:f.a.createElement(g.a,{global:a,key:e.id,volunteer:e,refer:Object(d.a)(t)})})}),t.setState({turf:r,volunteers:o,teamOptions:m,membersOption:b,selectedTeamsOption:h,selectedMembersOption:v,loading:!1});case 28:case"end":return e.stop()}},e,null,[[3,15]])})),t.state={global:e.global,turf:t.props.turf,selectedTeamsOption:[],selectedMembersOption:[]},t}return Object(p.a)(a,t),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.state.turf||this._loadData()}},{key:"render",value:function(){var t=this.state.turf;return!t||this.state.loading?f.a.createElement(h.a,null):f.a.createElement("div",null,f.a.createElement("div",{style:{display:"flex",padding:"10px"}},f.a.createElement("div",{style:{padding:"5px 10px"}},f.a.createElement(y.c,{icon:v.o,style:{width:20,height:20,color:"gray"}})," ",t.name," ",this.props.edit?"":f.a.createElement(b.b,{to:"/turf/view/"+t.id},"view"))),this.props.edit?f.a.createElement(E.a,{global:e,turf:t,refer:this}):"")}}]),a}(m.Component)}).call(this,a(35))},195:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(0),r=a.n(n),l=a(26),o=function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("pre",null,JSON.stringify(e.refer.state.turf.stats,null,2)),r.a.createElement("br",null),"Teams assigned to this turf:",r.a.createElement(l.a,{value:e.refer.state.selectedTeamsOption,onChange:e.refer.handleTeamsChange,options:e.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),r.a.createElement("br",null),"Volunteers assigned directly to this turf:",r.a.createElement(l.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.membersOption,isMulti:!0,isSearchable:!0,placeholder:"None"})))}},3:function(e,t,a){"use strict";a.d(t,"a",function(){return O}),a.d(t,"x",function(){return E}),a.d(t,"w",function(){return y}),a.d(t,"z",function(){return k}),a.d(t,"y",function(){return j}),a.d(t,"g",function(){return x}),a.d(t,"f",function(){return S}),a.d(t,"c",function(){return C}),a.d(t,"e",function(){return T}),a.d(t,"b",function(){return D}),a.d(t,"v",function(){return P}),a.d(t,"m",function(){return I}),a.d(t,"t",function(){return _}),a.d(t,"u",function(){return A}),a.d(t,"r",function(){return L}),a.d(t,"s",function(){return V}),a.d(t,"n",function(){return B}),a.d(t,"p",function(){return R}),a.d(t,"q",function(){return W}),a.d(t,"k",function(){return G}),a.d(t,"l",function(){return Y}),a.d(t,"j",function(){return X}),a.d(t,"i",function(){return $}),a.d(t,"o",function(){return te}),a.d(t,"h",function(){return ne}),a.d(t,"d",function(){return re});var n=a(5),r=a.n(n),l=a(11),o=a(0),s=a.n(o),c=a(418),i=a(32),u=a(98),d=a.n(u),p=a(155),m=a(419),f=a.n(m),b=a(420),h=a.n(b),v=a(283),g=a(135),O="/HelloVoterHQ/api/v1";function E(e,t){return t?h()(t-e):""}function y(e){return e?f()(e,{fractionDigits:0}):""}function k(e){p.NotificationManager.success(e,"Success",3e3)}function j(e,t){p.NotificationManager.error(t,"Error",6e3),console.warn(e)}function x(e,t,a,n){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(r.a.mark(function e(t,a,n,l){var o,s,c,i,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.state){e.next=2;break}return e.abrupt("return");case 2:return o=t.state,s=o.server,c=o.token,i=!0,s.match(/^localhost/)&&(i=!1),n||(n="GET"),e.next=8,fetch("http"+(i?"s":"")+"://"+s+a,{method:n,headers:{Authorization:"Bearer "+c,"Content-Type":"application/json"},body:l?JSON.stringify(l):null});case 8:if(!((u=e.sent).status>=400)){e.next=15;break}return e.t0=Error,e.next=13,u.text();case 13:throw e.t1=e.sent,new e.t0(e.t1);case 15:return e.abrupt("return",u.json());case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e){return e.isGeolocationAvailable&&e.isGeolocationEnabled?e.coords?{access:!0,lng:e.coords.longitude,lat:e.coords.latitude}:{access:!0}:{access:!1}}var C=function(e){return s.a.createElement(c.a,Object.assign({style:{width:25},"data-tip":e["data-tip"]?e["data-tip"]:e.icon.iconName},e))},T=function(e){return e.flag?s.a.createElement(g.a,null):s.a.createElement("div",null,s.a.createElement(C,{icon:i.p,color:"green",onClick:e.func,"data-tip":"Reload Data"}),s.a.createElement("div",null,e.children))},D=function(e){return e.flag?s.a.createElement(v.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:!0},s.a.createElement("div",{style:{position:"absolute",top:100,left:"40%",right:"40%",backgroundColor:"white",padding:40}},s.a.createElement("center",null,"Saving changes...",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(g.a,{disableShrink:!0})))):s.a.createElement("div",null)};function P(e){var t=JSON.parse(JSON.stringify(e));return delete t.last_seen,delete t.created,delete t.id,JSON.stringify(t).toLowerCase()}function I(e){return N.apply(this,arguments)}function N(){return(N=Object(l.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,x(t,O+"/import/list");case 4:n=e.sent,a=n&&n.data?n.data:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),j(e.t0,"Unable to load import info.");case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function _(e,t){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,x(t,O+"/volunteer/get?id="+a);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j(e.t0,"Unable to load volunteer info.");case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function A(e,t,a){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(r.a.mark(function e(t,a,n){var l,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],e.prev=1,o="volunteer/list","team"===a?o="team/members/list?teamId="+n:"turf"===a?o="turf/assigned/volunteer/list?turfId="+n:"form"===a&&(o="form/assigned/volunteer/list?formId="+n),e.next=6,x(t,O+"/"+o);case 6:l=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),j(e.t0,"Unable to load volunteer data.");case 12:return e.abrupt("return",l);case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function L(e,t){return U.apply(this,arguments)}function U(){return(U=Object(l.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,x(t,O+"/turf/get?turfId="+a);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j(e.t0,"Unable to load turf data.");case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function V(e,t,a){return H.apply(this,arguments)}function H(){return(H=Object(l.a)(r.a.mark(function e(t,a,n){var l,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],e.prev=1,o="turf/list"+(n?"?geometry=true":""),a&&(o="team/turf/list?teamId="+a+(n?"&geometry=true":"")),e.next=6,x(t,O+"/"+o);case 6:s=e.sent,l=s.data?s.data:[],e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),j(e.t0,"Unable to load turf data.");case 13:return e.abrupt("return",l);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function B(e,t,a,n){return z.apply(this,arguments)}function z(){return(z=Object(l.a)(r.a.mark(function e(t,a,n,l){var o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.prev=1,e.next=4,x(t,O+"/turf/list/byposition?longitude="+a+"&latitude="+n+(l?"&dist="+l:""));case 4:s=e.sent,o=s.data?s.data:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),j(e.t0,"Unable to load turf data.");case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function R(e,t){return q.apply(this,arguments)}function q(){return(q=Object(l.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,x(t,O+"/team/get?teamId="+a);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j(e.t0,"Unable to load team data.");case 10:return e.abrupt("return",n.data[0]);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function W(e,t,a){return Q.apply(this,arguments)}function Q(){return(Q=Object(l.a)(r.a.mark(function e(t,a,n){var l,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],e.prev=1,o="team/list","turf"===a?o="turf/assigned/team/list?turfId="+n:"form"===a&&(o="form/assigned/team/list?formId="+n),e.next=6,x(t,O+"/"+o);case 6:s=e.sent,l=s.data?s.data:[],e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),j(e.t0,"Unable to load teams data.");case 13:return e.abrupt("return",l);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function G(e,t){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,x(t,O+"/form/get?formId="+a);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j(e.t0,"Unable to load form data.");case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function Y(e,t){return K.apply(this,arguments)}function K(){return(K=Object(l.a)(r.a.mark(function e(t,a){var n,l,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,l=a?"team/form/list?teamId="+a:"form/list",e.next=5,x(t,O+"/"+l);case 5:o=e.sent,n=o.data?o.data:[],e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),j(e.t0,"Unable to load form data.");case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,x(t,O+"/attribute/list");case 4:n=e.sent,a=n.data?n.data:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),j(e.t0,"Unable to load attribute data.");case 11:return a.forEach(function(e){e.label||(e.label=e.name)}),e.abrupt("return",a);case 13:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function $(e,t,a,n){return ee.apply(this,arguments)}function ee(){return(ee=Object(l.a)(r.a.mark(function e(t,a,n,l){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.prev=1,e.next=4,x(t,O+"/address/get/byposition?limit=1000&longitude="+a+"&latitude="+n+(l?"&formId="+l:""));case 4:o=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j(e.t0,"Unable to load address information.");case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function te(e,t,a){return ae.apply(this,arguments)}function ae(){return(ae=Object(l.a)(r.a.mark(function e(t,a,n){var l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],e.prev=1,e.next=4,x(t,O+"/people/get/byaddress?aId="+a+(n?"&formId="+n:""));case 4:l=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),j(e.t0,"Unable to load address information.");case 10:return e.abrupt("return",l);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function ne(e,t){var a=[],n=[];e||(e=[]),t||(t=[]);var r=e.map(function(e){return e.id}),l=t.map(function(e){return e.id});for(var o in l){var s=l[o];-1===r.indexOf(s)&&a.push(s)}for(var c in r){var i=r[c];-1===l.indexOf(i)&&n.push(i)}return{add:a,rm:n}}var re=function(e){return s.a.createElement(d.a,e,le)},le=function(e){var t=e.getInputProps,a=e.getSuggestionItemProps,n=e.suggestions,r=e.loading;return s.a.createElement("div",{className:"autocomplete-root"},s.a.createElement("input",t()),s.a.createElement("div",{className:"autocomplete-dropdown-container"},r&&s.a.createElement("div",null,"Loading..."),n.map(function(e){return s.a.createElement("div",a(e),s.a.createElement("span",null,e.description))})))}},413:function(e,t,a){},415:function(e,t,a){"use strict";(function(e){var n=a(5),r=a.n(n),l=a(20),o=a(11),s=a(13),c=a(12),i=a(15),u=a(16),d=a(4),p=a(17),m=a(0),f=a.n(m),b=a(107),h=a(26),v=a(106),g=a(442),O=a(3),E=a(69),y=function(t){function a(t){var n;return Object(s.a)(this,a),(n=Object(i.a)(this,Object(u.a)(a).call(this,t)))._loadData=Object(o.a)(r.a.mark(function e(){var t,a,o,s,c,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.global,a=[],o=[],s=[{label:"None"}],e.next=4,Promise.all([Object(O.s)(t,null,!0),Object(O.l)(t)]);case 4:c=e.sent,i=Object(l.a)(c,2),a=i[0],(o=i[1]).forEach(function(e){s.push({value:Object(O.v)(e),id:e.id,label:f.a.createElement(E.a,{global:t,key:e.id,form:e,refer:Object(d.a)(n)})})}),n.setState({turfs:a,forms:o,formOptions:s});case 10:case"end":return e.stop()}},e)})),n.handleFormsChange=function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),n.setState({selectedFormsOption:t,formId:t.id},function(){return n.loadMarkerData()});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.onMarkerClick=function(){var t=Object(o.a)(r.a.mark(function t(a,l,o){var s,c,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.state.formId,n.setState({showingInfoWindow:!0}),t.next=4,Object(O.o)(e,a.address.id,s);case 4:c=t.sent,(i=c[0]).title=a.title,n.setState({selectedPlace:i,activeMarker:l});case 8:case"end":return t.stop()}},t)}));return function(e,a,n){return t.apply(this,arguments)}}(),n.onTurfClick=function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n.setState({infoLocation:t.paths[0],activeTurf:t.name});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.loadMarkerData=function(){var e=Object(o.a)(r.a.mark(function e(t,a){var l,o,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.state.global,a?(o=a.center.lng(),s=a.center.lat(),n.setState({longitude:o,latitude:s})):(o=n.state.longitude,s=n.state.latitude),e.next=4,Object(O.i)(l,o,s,n.state.formId);case 4:c=e.sent,n.setState({addresses:c});case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),n.onMapClicked=function(e){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1,activeMarker:null})},n.state={global:t.global,turfs:[],addresses:[],showingInfoWindow:!1,selectedPlace:{},selectedFormsOption:{},formId:null},n}return Object(p.a)(a,t),Object(c.a)(a,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"statusColor",value:function(e){if(!e.visits||0===e.visits.length)return"purple";switch(e.visits[0].status){case 0:return"yellow";case 1:return"green";case 2:return"red";default:return"purple"}}},{key:"render",value:function(){var e=this,t=[],a=this.state,n=a.addresses,r=a.selectedPlace,l=Object(O.f)(this.props);return l.lng&&l.lat?(this.state.turfs.forEach(function(e){e.geometry&&Object(v.geojson2polygons)(JSON.parse(e.geometry)).forEach(function(a){return t.push({name:e.name,polygon:a})})}),f.a.createElement(O.e,{flag:this.state.loading,func:function(){return e.loadMarkerData()}},f.a.createElement("div",{style:{display:"flex"}},"Show interaction status by Form:",f.a.createElement(h.a,{value:this.state.selectedFormsOption,onChange:this.handleFormsChange,options:this.state.formOptions,isSearchable:!0,placeholder:"None"})),f.a.createElement(b.Map,{google:this.props.google,zoom:17,initialCenter:l,onReady:this.loadMarkerData,onDragend:this.loadMarkerData,onClick:this.onMapClicked},n.map(function(t,a){return f.a.createElement(b.Marker,{key:a,onClick:e.onMarkerClick,title:t.address.street+", "+t.address.city+", "+t.address.state+", "+t.address.zip,icon:{url:"http://maps.google.com/mapfiles/ms/icons/"+e.statusColor(t)+"-dot.png"},address:t.address,position:{lng:t.address.longitude,lat:t.address.latitude}})}),t.map(function(t,a){return f.a.createElement(b.Polygon,{key:a,paths:t.polygon,name:t.name,onClick:e.onTurfClick,strokeColor:"#0000FF",strokeWeight:5,fillColor:"#000000",fillOpacity:0})}),f.a.createElement(b.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},f.a.createElement(k,{place:r})),f.a.createElement(b.InfoWindow,{position:this.state.infoLocation,visible:!!this.state.activeTurf},f.a.createElement("h1",null,"Turf: ",this.state.activeTurf))))):f.a.createElement("div",null,"Loading map...")}}]),a}(m.Component),k=function(e){var t=e.place.people,a=e.place.units;return t||(t=[]),a||(a=[]),f.a.createElement("div",null,f.a.createElement("h1",null,e.place.title),a.length?"This is a multi unit address with "+a.length+" units.":"",t.map(function(e){return f.a.createElement(j,{person:e})}))},j=function(e){var t=e.person.attrs;t||(t=[]);var a="",n="";return t.forEach(function(e){"Name"===e.name&&(a=e.value),"Party Affiliation"===e.name&&(n=e.value)}),f.a.createElement("div",null,f.a.createElement("b",null,"Name: ",a),f.a.createElement("br",null),f.a.createElement("b",null,"Party: ",n))};t.a=Object(b.GoogleApiWrapper)(function(e){return{apiKey:e.apiKey}})(Object(g.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})(y))}).call(this,a(35))},508:function(e,t,a){e.exports=a(949)},513:function(e,t,a){},534:function(e,t){},536:function(e,t){},54:function(e,t,a){"use strict";(function(e){a.d(t,"b",function(){return A}),a.d(t,"a",function(){return L});var n=a(20),r=a(5),l=a.n(r),o=a(11),s=a(13),c=a(12),i=a(15),u=a(16),d=a(4),p=a(17),m=a(0),f=a.n(m),b=a(28),h=a(44),v=a(96),g=a.n(v),O=a(26),E=a(43),y=a.n(E),k=a(135),j=a(108),x=a(459),w=a(462),S=a(463),C=a(3),T=a(60),D=a(69),P=a(68),I=a(32),N=a(282),_=a(203),F=a.n(_);N.a.locale(F.a);var A=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a._deleteTeam=function(){var e=Object(o.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.global,a.setState({saving:!0,menuDelete:!1}),e.prev=2,e.next=5,Object(C.g)(n,C.a+"/team/delete","POST",{teamId:t});case 5:Object(C.z)("Team has been deleted."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(C.y)(e.t0,"Unable to delete teams.");case 11:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/teams/",a._loadData();case 14:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),a._createTeam=Object(o.a)(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.global,null!==(n=a.addTeamForm.getValue())){e.next=4;break}return e.abrupt("return");case 4:return a.setState({saving:!0}),e.prev=5,e.next=8,Object(C.g)(t,C.a+"/team/create","POST",{name:n.name});case 8:Object(C.z)("Team has been created."),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),Object(C.y)(e.t0,"Unable to create team.");case 14:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/teams/",a._loadData();case 17:case"end":return e.stop()}},e,null,[[5,11]])})),a._loadData=Object(o.a)(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,a.setState({loading:!0,search:""}),n=[],e.prev=3,e.next=6,Object(C.q)(t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(C.y)(e.t0,"Unable to load volunteers.");case 12:a.setState({loading:!1,teams:n});case 13:case"end":return e.stop()}},e,null,[[3,9]])})),a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})};var n=localStorage.getItem("teamsperpage");return n||(n=5),a.state={global:e.global,loading:!0,teams:[],search:"",perPage:n,pageNum:1,menuDelete:!1},a.formServerItems=y.a.struct({name:y.a.String}),a.formServerOptions={fields:{server:{label:"Team Name",error:"You must enter a team name."}}},a.onTypeSearch=a.onTypeSearch.bind(Object(d.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"onChangeTeam",value:function(e){this.setState({addTeamForm:e})}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("teamsperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"render",value:function(){var e=this,t=this.state.global,a=[];return this.state.teams.forEach(function(t){e.state.search&&!Object(C.v)(t).includes(e.state.search)||a.push(t)}),f.a.createElement(b.a,null,f.a.createElement("div",null,f.a.createElement(h.a,{exact:!0,path:"/teams/",render:function(){return f.a.createElement(C.e,{flag:e.state.loading,func:e._loadData},"Search:"," ",f.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),f.a.createElement(M,{global:t,refer:e,teams:a}))}}),f.a.createElement(h.a,{exact:!0,path:"/teams/add",render:function(){return f.a.createElement("div",null,f.a.createElement(y.a.form.Form,{ref:function(t){return e.addTeamForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTeam(t)},value:e.state.addTeamForm}),f.a.createElement("button",{onClick:function(){return e._createTeam()}},"Submit"))}}),f.a.createElement(h.a,{path:"/teams/view/:id",render:function(a){return f.a.createElement("div",null,f.a.createElement(L,{global:t,key:a.match.params.id,id:a.match.params.id,edit:!0,refer:e}),f.a.createElement("br",null),f.a.createElement("br",null),f.a.createElement("br",null),f.a.createElement(j.a,{onClick:e.handleClickDelete,color:"primary"},"Delete Team"),f.a.createElement(x.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},f.a.createElement(w.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this team?"),f.a.createElement(S.a,null,f.a.createElement(j.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),f.a.createElement(j.a,{onClick:function(){return e._deleteTeam(a.match.params.id)},color:"primary"},"Yes"))))}}),f.a.createElement(C.b,{flag:this.state.saving})))}}]),t}(m.Component),M=function(e){var t=e.refer.state.perPage,a=f.a.createElement("div",null),n=[];return e.teams.forEach(function(a,r){Math.floor(r/t)+1===e.refer.state.pageNum&&n.push(f.a.createElement(L,{global:e.global,key:a.id,team:a,refer:e.refer}))}),a=f.a.createElement("div",{style:{display:"flex"}},f.a.createElement(g.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.teams.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",f.a.createElement("div",{style:{width:75}},"# Per Page"," ",f.a.createElement(O.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),f.a.createElement("div",null,f.a.createElement("h3",null,e.type,"Teams (",e.teams.length,")"),f.a.createElement(b.b,{to:"/teams/add"},f.a.createElement("button",null,"Add Team")),a,n,a)},L=function(t){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).handleMembersChange=function(){var e=Object(o.a)(l.a.mark(function e(a){var n,r,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,r=Object(C.h)(t.state.selectedMembersOption,a),e.t0=l.a.keys(r.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(C.g)(n,C.a+"/team/members/add","POST",{teamId:t.props.id,vId:r.add[o]});case 10:e.next=6;break;case 12:e.t2=l.a.keys(r.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(C.g)(n,C.a+"/team/members/remove","POST",{teamId:t.props.id,vId:r.rm[s]});case 17:e.next=13;break;case 19:return e.next=21,Object(C.p)(n,t.props.id);case 21:c=e.sent,Object(C.z)("Team assignments saved."),t.setState({selectedMembersOption:a,team:c}),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(3),Object(C.y)(e.t4,"Unable to add/remove team members.");case 29:t.props.refer.setState({saving:!1});case 30:case"end":return e.stop()}},e,null,[[3,26]])}));return function(t){return e.apply(this,arguments)}}(),t.handleFormsChange=function(){var e=Object(o.a)(l.a.mark(function e(a){var n,r,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,r=Object(C.h)(t.state.selectedFormsOption,a),e.t0=l.a.keys(r.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(C.g)(n,C.a+"/form/assigned/team/add","POST",{formId:r.add[o],teamId:t.props.id});case 10:e.next=6;break;case 12:e.t2=l.a.keys(r.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(C.g)(n,C.a+"/form/assigned/team/remove","POST",{formId:r.rm[s],teamId:t.props.id});case 17:e.next=13;break;case 19:return e.next=21,Object(C.p)(n,t.props.id);case 21:c=e.sent,Object(C.z)("Form selection saved."),t.setState({teamn:c,selectedFormsOption:a}),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(3),Object(C.y)(e.t4,"Unable to add/remove form.");case 29:t.props.refer.setState({saving:!1});case 30:case"end":return e.stop()}},e,null,[[3,26]])}));return function(t){return e.apply(this,arguments)}}(),t.handleTurfChange=function(){var e=Object(o.a)(l.a.mark(function e(a){var n,r,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,r=Object(C.h)(t.state.selectedTurfOption,a),e.t0=l.a.keys(r.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(C.g)(n,C.a+"/turf/assigned/team/add","POST",{turfId:r.add[o],teamId:t.props.id});case 10:e.next=6;break;case 12:e.t2=l.a.keys(r.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(C.g)(n,C.a+"/turf/assigned/team/remove","POST",{turfId:r.rm[s],teamId:t.props.id});case 17:e.next=13;break;case 19:return e.next=21,Object(C.p)(n,t.props.id);case 21:c=e.sent,Object(C.z)("Turf selection saved."),t.setState({team:c,selectedTurfOption:a}),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(3),Object(C.y)(e.t4,"Unable to add/remove turf.");case 29:t.props.refer.setState({saving:!1});case 30:case"end":return e.stop()}},e,null,[[3,26]])}));return function(t){return e.apply(this,arguments)}}(),t._loadData=Object(o.a)(l.a.mark(function e(){var a,r,o,s,c,i,u,p,m,b,h,v,g,O,E,y;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r={},o=[],s=[],c=[],i=[],u=[],p=[],t.setState({loading:!0}),e.prev=3,e.next=6,Promise.all([Object(C.p)(a,t.props.id),Object(C.u)(a),Object(C.u)(a,"team",t.props.id),Object(C.s)(a,t.props.id),Object(C.s)(a),Object(C.l)(a,t.props.id),Object(C.l)(a)]);case 6:m=e.sent,b=Object(n.a)(m,7),r=b[0],o=b[1],s=b[2],c=b[3],i=b[4],u=b[5],p=b[6],e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(3),Object(C.y)(e.t0,"Unable to load team info."),e.abrupt("return",t.setState({loading:!1}));case 21:h=[],v=[],g=[],O=[],E=[],y=[],o.forEach(function(e){h.push({value:Object(C.v)(e),id:e.id,label:f.a.createElement(P.a,{global:a,key:e.id,volunteer:e,refer:Object(d.a)(t)})})}),s.forEach(function(e){O.push({value:Object(C.v)(e),id:e.id,label:f.a.createElement(P.a,{global:a,key:e.id,volunteer:e,refer:Object(d.a)(t)})})}),i.forEach(function(e){g.push({value:Object(C.v)(e),id:e.id,label:f.a.createElement(T.a,{global:a,key:e.id,turf:e,refer:Object(d.a)(t)})})}),c.forEach(function(e){E.push({value:Object(C.v)(e),id:e.id,label:f.a.createElement(T.a,{global:a,key:e.id,turf:e,refer:Object(d.a)(t)})})}),p.forEach(function(e){v.push({value:Object(C.v)(e),id:e.id,label:f.a.createElement(D.a,{global:a,key:e.id,form:e,refer:Object(d.a)(t)})})}),u.forEach(function(e){y.push({value:Object(C.v)(e),id:e.id,label:f.a.createElement(D.a,{global:a,key:e.id,form:e,refer:Object(d.a)(t)})})}),t.setState({team:r,memberOptions:h,turfOptions:g,formOptions:v,selectedMembersOption:O,selectedTurfOption:E,selectedFormsOption:y,loading:!1});case 34:case"end":return e.stop()}},e,null,[[3,17]])})),t.state={global:e.global,team:t.props.team,selectedMembersOption:[],selectedFormsOption:[],selectedTurfOption:[]},t}return Object(p.a)(a,t),Object(c.a)(a,[{key:"componentDidMount",value:function(){this.state.team||this._loadData()}},{key:"render",value:function(){var t=this.state.team;return!t||this.state.loading?f.a.createElement(k.a,null):f.a.createElement("div",null,f.a.createElement("div",{style:{display:"flex",padding:"10px"}},f.a.createElement("div",{style:{flex:1,overflow:"auto",padding:"5px 10px"}},f.a.createElement(C.c,{icon:I.r,style:{width:20,height:20,color:"gray"}})," ",t.name," ",this.props.edit?"":f.a.createElement(b.b,{to:"/teams/view/"+t.id},"view"))),this.props.edit?f.a.createElement(U,{global:e,team:t,refer:this}):"")}}]),a}(m.Component),U=function(e){return f.a.createElement("div",null,f.a.createElement("br",null),f.a.createElement("div",null,"Members of this team:",f.a.createElement(O.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.memberOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})),f.a.createElement("br",null),f.a.createElement("div",null,"Form this team is assigned to:",f.a.createElement(O.a,{value:e.refer.state.selectedFormsOption,onChange:e.refer.handleFormsChange,options:e.refer.state.formOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),f.a.createElement("br",null),"Turf this team assigned to:",f.a.createElement(O.a,{value:e.refer.state.selectedTurfOption,onChange:e.refer.handleTurfChange,options:e.refer.state.turfOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})))}}).call(this,a(35))},573:function(e,t){},574:function(e,t){},60:function(e,t,a){"use strict";var n=a(194),r=(a(195),a(0)),l=a.n(r),o=a(28),s=a(96),c=a.n(s),i=a(26),u=function(e){var t=e.refer.state.perPage,a=l.a.createElement("div",null),r=[];return e.turf.forEach(function(a,o){Math.floor(o/t)+1===e.refer.state.pageNum&&r.push(l.a.createElement(n.a,{global:e.global,key:a.id,turf:a,refer:e.refer}))}),a=l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(c.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.turf.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",l.a.createElement("div",{style:{width:75}},"# Per Page"," ",l.a.createElement(i.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),l.a.createElement("div",null,l.a.createElement("h3",null,e.type,"Turf (",e.turf.length,")"),l.a.createElement(o.b,{to:"/turf/add"},l.a.createElement("button",null,"Add Turf")),a,r,a)},d=a(13),p=a(12),m=a(15),f=a(16),b=a(17),h=a(135),v=a(106),g=a(3),O=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleStateChange=function(e){e||(e=[]),a.setState({typeOptions:[{value:"state",label:"State"},{value:"cd",label:"Congressional"},{value:"sldu",label:v.us_states[e.value].sldu},{value:"sldl",label:v.us_states[e.value].sldl}]}),a.props.refer.handleStateChange(e)},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.refer.state.selectedDrawOption)return l.a.createElement("br",null);var t=[];switch(Object.keys(v.us_states).map(function(e){return t.push({value:e,label:v.us_states[e].name})}),this.props.refer.state.selectedDrawOption.value){case"select":return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("br",null),"State or region:",l.a.createElement(i.a,{value:this.props.refer.state.selectedStateOption,onChange:this.handleStateChange,options:t,isSearchable:!0,placeholder:"Select state or region"})),this.props.refer.state.selectedStateOption?l.a.createElement("div",null,l.a.createElement("br",null),"District Type:",l.a.createElement(i.a,{value:this.props.refer.state.selectedTypeOption,onChange:this.props.refer.handleTypeChange,onMenuClose:this.props.refer.selectedTypeFetch,options:this.state.typeOptions,isSearchable:!1,placeholder:"Select district for this turf"})):"",this.props.refer._showDistrictOption()?l.a.createElement("div",null,l.a.createElement("br",null),"District Number:",this.props.refer.state.districtOptions.length?l.a.createElement(i.a,{value:this.props.refer.state.selectedDistrictOption,onChange:this.props.refer.handleDistrictChange,options:this.props.refer.state.districtOptions,isSearchable:!0,placeholder:"Select district for this turf"}):l.a.createElement(h.a,null)):"");case"import":return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("input",{type:"file",accept:".geojson,.json",onChange:function(t){return e.props.refer.handleImportFiles(t.target.files)}}));case"radius":return l.a.createElement("div",null,l.a.createElement("br",null),"Type the address:",l.a.createElement(g.d,{debounce:500,value:this.props.refer.state.address,onChange:this.props.refer.onTypeAddress,onSelect:this.props.refer.submitAddress}));case"draw":return l.a.createElement("div",null,l.a.createElement("br",null),"Use a"," ",l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://google-developers.appspot.com/maps/documentation/utils/geojson/"},"GeoJSON Draw Tool"),', save the file, and then select the "Import GeoJSON shape file" option.');default:return l.a.createElement("div",null,"Unknown generation method.")}}}]),t}(r.Component),E=a(5),y=a.n(E),k=a(11),j=a(4),x=a(44),w=a(98),S=a(435),C=a.n(S),T=a(43),D=a.n(T),P=a(108),I=a(459),N=a(462),_=a(463),F=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})},a.submitAddress=function(){var e=Object(k.a)(y.a.mark(function e(t){var n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({address:t,saving:!0}),e.prev=1,e.next=4,Object(w.geocodeByAddress)(t);case 4:return n=e.sent,e.next=7,Object(w.getLatLng)(n[0]);case 7:r=e.sent,a.setState({addressCoords:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),Object(g.y)(e.t0,"Unable to search or geocode address.");case 14:a.setState({saving:!1});case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),a.handleDrawChange=function(e){a.setState({selectedDrawOption:e,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,importFileData:null,addressCoords:null,address:""})},a.handleStateChange=function(e){a.setState({selectedStateOption:e})},a.handleTypeChange=function(e){a.setState({selectedTypeOption:e})},a.handleDistrictChange=function(e){a.setState({selectedDistrictOption:e})},a.handleImportFiles=function(e){a.setState({saving:!0});var t=new FileReader;t.onload=function(e){a.setState({importFileData:e.target.result,saving:!1})},t.readAsText(e[0])},a._deleteTurf=function(){var e=Object(k.a)(y.a.mark(function e(t){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.global,a.setState({saving:!0,menuDelete:!1}),e.prev=2,e.next=5,Object(g.g)(n,g.a+"/turf/delete","POST",{turfId:t});case 5:Object(g.z)("Turf has been deleted."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(g.y)(e.t0,"Unable to delete turf.");case 11:a.setState({saving:!1}),a._loadData(),window.location.href="/HelloVoterHQ/#/turf/";case 14:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),a._createTurf=Object(k.a)(y.a.mark(function e(){var t,n,r,l,o,s,c,i,u,d,p,m;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.global,null!==(n=a.addTurfForm.getValue())){e.next=4;break}return e.abrupt("return");case 4:if(a.setState({saving:!0}),r=[],null===a.state.importFileData){e.next=17;break}e.prev=7,r.push(JSON.parse(a.state.importFileData)),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(7),Object(g.y)(e.t0,"Unable to parse import data file."),e.abrupt("return",a.setState({saving:!1}));case 15:e.next=55;break;case 17:if("radius"!==a.state.selectedDrawOption.value){e.next=21;break}r.push(C()([a.state.addressCoords.lng,a.state.addressCoords.lat],1e3)),e.next=55;break;case 21:if(l=a.state.selectedStateOption.value,e.prev=22,!a.state.selectedDistrictOption||"all"!==a.state.selectedDistrictOption.value){e.next=41;break}e.t1=y.a.keys(a.state.districtOptions);case 25:if((e.t2=e.t1()).done){e.next=39;break}if(o=e.t2.value,"all"!==a.state.districtOptions[o].value){e.next=29;break}return e.abrupt("continue",25);case 29:return e.next=31,fetch(a.urlFromDist(l,a.state.selectedTypeOption.value,a.state.districtOptions[o].value));case 31:return s=e.sent,e.next=34,s.json();case 34:(c=e.sent).name=a.state.districtOptions[o].value,r.push(c),e.next=25;break;case 39:e.next=49;break;case 41:return e.next=43,fetch(a.urlFromDist(l,a.state.selectedTypeOption.value,a.state.selectedDistrictOption?a.state.selectedDistrictOption.value:null));case 43:return i=e.sent,e.t3=r,e.next=47,i.json();case 47:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 49:e.next=55;break;case 51:return e.prev=51,e.t5=e.catch(22),Object(g.y)(e.t5,"Unable to fetch district info data."),e.abrupt("return",a.setState({saving:!1}));case 55:e.prev=55,e.t6=y.a.keys(r);case 57:if((e.t7=e.t6()).done){e.next=68;break}return u=e.t7.value,d=r[u],p=void 0,m=void 0,p=d.geometry?d.geometry:d,m=a.state.selectedDistrictOption&&"all"===a.state.selectedDistrictOption.value?n.name+" "+d.name:n.name,e.next=66,Object(g.g)(t,g.a+"/turf/create","POST",{name:m,geometry:p});case 66:e.next=57;break;case 68:Object(g.z)("Turf has been created."),e.next=74;break;case 71:e.prev=71,e.t8=e.catch(55),Object(g.y)(e.t8,"Unable to create turf.");case 74:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/turf/",a._loadData();case 77:case"end":return e.stop()}},e,null,[[7,11],[22,51],[55,71]])})),a.selectedTypeFetch=Object(k.a)(y.a.mark(function e(){var t,n,r,l,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.selectedTypeOption){e.next=2;break}return e.abrupt("return");case 2:a.setState({districtOptions:[]}),n=a.state.selectedStateOption.value,e.t0=a.state.selectedTypeOption.value,e.next="cd"===e.t0?7:"sldu"===e.t0?9:"sldl"===e.t0?11:13;break;case 7:return t="cds/2016/",e.abrupt("break",14);case 9:return t="states/"+n+"/sldu/",e.abrupt("break",14);case 11:return t="states/"+n+"/sldl/",e.abrupt("break",14);case 13:return e.abrupt("return");case 14:return e.next=16,fetch("https://api.github.com/repos/OurVoiceUSA/districts/contents/"+t);case 16:return r=e.sent,l=[{value:"all",label:"Create all of them!"}],e.next=20,r.json();case 20:o=e.sent,e.t1=a.state.selectedTypeOption.value,e.next="cd"===e.t1?24:26;break;case 24:return o.forEach(function(e){e.name.includes(a.state.selectedStateOption.value)&&l.push({value:e.name,label:e.name})}),e.abrupt("break",27);case 26:o.forEach(function(e){var t=e.name.replace(".geojson","");l.push({value:t,label:t})});case 27:a.setState({districtOptions:l});case 28:case"end":return e.stop()}},e)})),a._loadData=Object(k.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,a.setState({loading:!0,search:""}),n=[],e.prev=3,e.next=6,Object(g.s)(t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(g.y)(e.t0,"Unable to load turf.");case 12:a.setState(a.initState()),a.setState({loading:!1,turf:n});case 14:case"end":return e.stop()}},e,null,[[3,9]])})),a.state=a.initState(e),a.state.global=e.global,a.formServerItems=D.a.struct({name:D.a.String}),a.formServerOptions={fields:{name:{label:"Turf Name",error:"You must enter a turf name."}}},a.onTypeAddress=function(e){return a.setState({address:e})},a.onTypeSearch=a.onTypeSearch.bind(Object(j.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(j.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"initState",value:function(e){var t=localStorage.getItem("turfperpage");return t||(t=5),{loading:!0,selectedDrawOption:null,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,districtOptions:[],turf:[],thisTurf:{},importFileData:null,address:"",addressCoords:null,search:"",perPage:t,pageNum:1,menuDelete:!1}}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"onChangeTurf",value:function(e){this.setState({addTurfForm:e})}},{key:"_showDistrictOption",value:function(){if(!this.state.selectedTypeOption)return!1;switch(this.state.selectedTypeOption.value){case"cd":case"sldu":case"sldl":return!0;default:return!1}}},{key:"_showSubmitButton",value:function(){return!this.state.saving&&(!!this.state.selectedDrawOption&&(!(!this.state.selectedTypeOption||"state"!==this.state.selectedTypeOption.value)||(!(!this._showDistrictOption()||!this.state.selectedDistrictOption)||(null!==this.state.importFileData||null!==this.state.addressCoords))))}},{key:"urlFromDist",value:function(e,t,a){var n;switch(t){case"state":n="states/"+e+"/shape.geojson";break;case"cd":n="cds/2016/"+a+"/shape.geojson";break;case"sldu":n="states/"+e+"/sldu/"+a+".geojson";break;case"sldl":n="states/"+e+"/sldl/"+a+".geojson";break;default:throw new Error("unknown selectedTypeOption")}return"https://raw.githubusercontent.com/OurVoiceUSA/districts/gh-pages/"+n}},{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state.global,a=[{value:"select",label:"Select from legislative boundary"},{value:"import",label:"Import GeoJSON shape file"},{value:"radius",label:"Area surrounding an address"},{value:"draw",label:"Manually draw with your mouse"}],r=[];return this.state.turf.forEach(function(t){e.state.search&&!Object(g.v)(t).includes(e.state.search)||r.push(t)}),l.a.createElement(o.a,null,l.a.createElement("div",null,l.a.createElement(x.a,{exact:!0,path:"/turf/",render:function(){return l.a.createElement(g.e,{flag:e.state.loading,func:e._loadData},"Search:"," ",l.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),l.a.createElement("br",null),l.a.createElement(u,{global:t,turf:r,refer:e}))}}),l.a.createElement(x.a,{exact:!0,path:"/turf/add",render:function(){return l.a.createElement("div",null,l.a.createElement(D.a.form.Form,{ref:function(t){return e.addTurfForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTurf(t)},value:e.state.addTurfForm}),l.a.createElement("br",null),"Method of generating turf:",l.a.createElement(i.a,{value:e.state.selectedDrawOption,onChange:e.handleDrawChange,options:a,isSearchable:!1,placeholder:"Select method"}),l.a.createElement(O,{refer:e}),e._showSubmitButton()?l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){return e._createTurf()}},"Submit")):"")}}),l.a.createElement(x.a,{path:"/turf/view/:id",render:function(a){return l.a.createElement("div",null,l.a.createElement(n.a,{global:t,key:a.match.params.id,id:a.match.params.id,edit:!0,refer:e}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(P.a,{onClick:e.handleClickDelete,color:"primary"},"Delete Turf"),l.a.createElement(I.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(N.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this turf?"),l.a.createElement(_.a,null,l.a.createElement(P.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),l.a.createElement(P.a,{onClick:function(){return e._deleteTurf(a.match.params.id)},color:"primary"},"Yes"))))}}),l.a.createElement(g.b,{flag:this.state.saving})))}}]),t}(r.Component);a.d(t,"a",function(){return n.a}),a.d(t,"b",function(){return u}),a.d(t,"d",function(){return O}),a.d(t,"c",function(){return F})},68:function(e,t,a){"use strict";(function(e){a.d(t,"b",function(){return H}),a.d(t,"a",function(){return z});var n=a(20),r=a(5),l=a.n(r),o=a(11),s=a(13),c=a(12),i=a(15),u=a(16),d=a(4),p=a(17),m=a(0),f=a.n(m),b=a(28),h=a(44),v=a(98),g=a(96),O=a.n(g),E=a(156),y=a.n(E),k=a(26),j=a(283),x=a(954),w=a(464),S=a(467),C=a(465),T=a(135),D=a(466),P=a(108),I=a(3),N=a(60),_=a(69),F=a(54),A=a(32),M=a(282),L=a(203),U=a.n(L);M.a.locale(U.a);var V=50,H=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e)))._loadData=Object(o.a)(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,n=[],a.setState({loading:!0,search:""}),e.prev=3,e.next=6,Object(I.u)(t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(I.y)(e.t0,"Unable to load volunteers.");case 12:a.setState({loading:!1,volunteers:n});case 13:case"end":return e.stop()}},e,null,[[3,9]])})),a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})};var n=localStorage.getItem("volunteersperpage");return n||(n=5),a.state={global:e.global,loading:!0,thisVolunteer:{},volunteers:[],search:"",perPage:n,pageNum:1},a.onTypeSearch=a.onTypeSearch.bind(Object(d.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"render",value:function(){var e=this,t=this.state.global,a=[],n=[],r=[],s=[];return this.state.volunteers.forEach(function(t){e.state.search&&!Object(I.v)(t).includes(e.state.search)||(t.locked?r.push(t):t.invited?s.push(t):t.ass.ready||t.ass.teams.length?a.push(t):n.push(t))}),f.a.createElement(I.e,{flag:this.state.loading,func:function(){return e._loadData()}},f.a.createElement(b.a,null,f.a.createElement("div",null,"Search:"," ",f.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),f.a.createElement("br",null),f.a.createElement(b.b,{to:"/volunteers/",onClick:function(){return e.setState({pageNum:1})}},"Volunteers (",a.length,")"),"\xa0-\xa0",f.a.createElement(b.b,{to:"/volunteers/unassigned",onClick:function(){return e.setState({pageNum:1})}},"Unassigned (",n.length,")"),"\xa0-\xa0",f.a.createElement(b.b,{to:"/volunteers/invited",onClick:function(){return e.setState({pageNum:1})}},"Invited (",s.length,")"),"\xa0-\xa0",f.a.createElement(b.b,{to:"/volunteers/denied",onClick:function(){return e.setState({pageNum:1})}},"Denied (",r.length,")"),f.a.createElement(h.a,{exact:!0,path:"/volunteers/",render:function(){return f.a.createElement(B,{global:t,refer:e,volunteers:a})}}),f.a.createElement(h.a,{exact:!0,path:"/volunteers/unassigned",render:function(){return f.a.createElement(B,{global:t,refer:e,type:"Unassigned",volunteers:n})}}),f.a.createElement(h.a,{exact:!0,path:"/volunteers/invited",render:function(){return f.a.createElement("div",null,f.a.createElement(B,{global:t,refer:e,type:"Invited",volunteers:s}),f.a.createElement(P.a,{onClick:Object(o.a)(l.a.mark(function a(){var n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(I.g)(t,I.a+"/volunteer/invite","POST");case 2:(n=a.sent).token?e.setState({thisVolunteer:{id:"invite:"+n.token}}):Object(I.y)({},"Invite failed.");case 4:case"end":return a.stop()}},a)})),color:"primary"},"Invite Someone"))}}),f.a.createElement(h.a,{exact:!0,path:"/volunteers/denied",render:function(){return f.a.createElement(B,{global:t,refer:e,type:"Denied",volunteers:r})}}),f.a.createElement(h.a,{path:"/volunteers/view/:id",render:function(e){return f.a.createElement(z,{global:t,key:e.match.params.id,id:e.match.params.id,edit:!0})}}),f.a.createElement(j.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:!!this.state.thisVolunteer.id,onClose:function(){return e.setState({thisVolunteer:{}})}},f.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},f.a.createElement(z,{global:t,key:this.state.thisVolunteer.id,id:this.state.thisVolunteer.id,edit:!0,refer:this}))),f.a.createElement(I.b,{flag:this.state.saving}))))}}]),t}(m.Component),B=function(t){var a=t.refer.state.perPage,n=f.a.createElement("div",null),r=[];return t.volunteers.forEach(function(n,l){Math.floor(l/a)+1===t.refer.state.pageNum&&r.push(f.a.createElement(z,{global:e,key:n.id,volunteer:n,refer:t.refer}))}),n=f.a.createElement("div",{style:{display:"flex"}},f.a.createElement(O.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:t.volunteers.length/a,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:t.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",f.a.createElement("div",{style:{width:75}},"# Per Page"," ",f.a.createElement(k.a,{value:{value:a,label:a},onChange:t.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),f.a.createElement("div",null,f.a.createElement("h3",null,t.type,"Volunteers (",t.volunteers.length,")"),n,f.a.createElement(x.a,{component:"nav"},r),n)},z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleTeamsChange=function(){var e=Object(o.a)(l.a.mark(function e(t){var n,r,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.global,t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=3,r=Object(I.h)(a.state.selectedTeamsOption,t),e.t0=l.a.keys(r.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(I.g)(n,I.a+"/team/members/add","POST",{teamId:r.add[o],vId:a.props.id});case 10:e.next=6;break;case 12:e.t2=l.a.keys(r.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(I.g)(n,I.a+"/team/members/remove","POST",{teamId:r.rm[s],vId:a.props.id});case 17:e.next=13;break;case 19:return e.next=21,Object(I.t)(n,a.props.id);case 21:c=e.sent,Object(I.z)("Team assignments saved."),a.setState({selectedTeamsOption:t,volunteer:c}),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(3),Object(I.y)(e.t4,"Unable to add/remove teams.");case 29:a.props.refer.setState({saving:!1});case 30:case"end":return e.stop()}},e,null,[[3,26]])}));return function(t){return e.apply(this,arguments)}}(),a.handleLeaderChange=function(){var e=Object(o.a)(l.a.mark(function e(t){var n,r,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.global,t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=3,r=Object(I.h)(a.state.selectedLeaderOption,t),e.t0=l.a.keys(r.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(I.g)(n,I.a+"/team/members/promote","POST",{teamId:r.add[o],vId:a.props.id});case 10:e.next=6;break;case 12:e.t2=l.a.keys(r.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(I.g)(n,I.a+"/team/members/demote","POST",{teamId:r.rm[s],vId:a.props.id});case 17:e.next=13;break;case 19:return e.next=21,Object(I.t)(n,a.props.id);case 21:c=e.sent,Object(I.z)("Team leaders saved."),a.setState({selectedLeaderOption:t,volunteer:c}),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(3),Object(I.y)(e.t4,"Unable to edit team leadership.");case 29:a.props.refer.setState({saving:!1});case 30:case"end":return e.stop()}},e,null,[[3,26]])}));return function(t){return e.apply(this,arguments)}}(),a.handleFormsChange=function(){var e=Object(o.a)(l.a.mark(function e(t){var n,r,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.global,t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=3,r=Object(I.h)(a.state.selectedFormsOption,t),e.t0=l.a.keys(r.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(I.g)(n,I.a+"/form/assigned/volunteer/add","POST",{formId:r.add[o],vId:a.props.id});case 10:e.next=6;break;case 12:e.t2=l.a.keys(r.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(I.g)(n,I.a+"/form/assigned/volunteer/remove","POST",{formId:r.rm[s],vId:a.props.id});case 17:e.next=13;break;case 19:return e.next=21,Object(I.t)(n,a.props.id);case 21:c=e.sent,Object(I.z)("Form selection saved."),a.setState({selectedFormsOption:t,volunteer:c}),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(3),Object(I.y)(e.t4,"Unable to add/remove form.");case 29:a.props.refer.setState({saving:!1});case 30:case"end":return e.stop()}},e,null,[[3,26]])}));return function(t){return e.apply(this,arguments)}}(),a.handleTurfChange=function(){var e=Object(o.a)(l.a.mark(function e(t){var n,r,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.global,t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=3,r=Object(I.h)(a.state.selectedTurfOption,t),e.t0=l.a.keys(r.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(I.g)(n,I.a+"/turf/assigned/volunteer/add","POST",{turfId:r.add[o],vId:a.props.id});case 10:e.next=6;break;case 12:e.t2=l.a.keys(r.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(I.g)(n,I.a+"/turf/assigned/volunteer/remove","POST",{turfId:r.rm[s],vId:a.props.id});case 17:e.next=13;break;case 19:return e.next=21,Object(I.t)(n,a.props.id);case 21:c=e.sent,Object(I.z)("Turf selection saved."),a.setState({selectedTurfOption:t,volunteer:c}),e.next=29;break;case 26:e.prev=26,e.t4=e.catch(3),Object(I.y)(e.t4,"Unable to add/remove turf.");case 29:a.props.refer.setState({saving:!1});case 30:case"end":return e.stop()}},e,null,[[3,26]])}));return function(t){return e.apply(this,arguments)}}(),a._loadData=Object(o.a)(l.a.mark(function e(){var t,r,o,s,c,i,u,p,m,b,h,v,g,O,E,y,k;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,r={},o=[],s=[],c=[],i=[],u=[],a.setState({loading:!0}),e.prev=3,e.next=6,Promise.all([Object(I.t)(t,a.props.id),Object(I.l)(t),Object(I.s)(t),Object(I.q)(t)]);case 6:p=e.sent,m=Object(n.a)(p,4),r=m[0],o=m[1],s=m[2],c=m[3],e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(3),Object(I.y)(e.t0,"Unable to load canavasser info."),e.abrupt("return",a.setState({loading:!1}));case 18:if(!r.location){e.next=25;break}return e.next=21,Object(I.n)(t,r.location.x,r.location.y,0);case 21:return i=e.sent,e.next=24,Object(I.n)(t,r.location.x,r.location.y,V);case 24:u=e.sent;case 25:b=[],h=[],v=[],g=[],O=[],E=[],y=[{value:"",label:"None"}],k=[{value:"",label:"None"},{value:"auto",id:"auto",label:f.a.createElement(N.a,{global:t,key:"auto",turf:{id:"auto",name:"Area surrounnding this volunteer's home address"},refer:Object(d.a)(a),icon:A.k})}],c.forEach(function(e){b.push({value:Object(I.v)(e),id:e.id,label:f.a.createElement(F.a,{global:t,key:e.id,team:e,refer:Object(d.a)(a)})}),r.ass.teams.forEach(function(n,r){n.id===e.id&&(v.push({value:Object(I.v)(e),id:e.id,label:f.a.createElement(F.a,{global:t,key:e.id,team:e,refer:Object(d.a)(a)})}),h.push({value:Object(I.v)(e),id:e.id,label:f.a.createElement(F.a,{global:t,key:e.id,team:e,refer:Object(d.a)(a)})}),n.leader&&g.push({value:Object(I.v)(e),id:e.id,label:f.a.createElement(F.a,{global:t,key:e.id,team:e,refer:Object(d.a)(a)})}))})}),o.forEach(function(e){y.push({value:Object(I.v)(e),id:e.id,label:f.a.createElement(_.a,{global:t,key:e.id,form:e,refer:Object(d.a)(a)})})}),r.ass.forms.forEach(function(e){e.direct&&O.push({value:Object(I.v)(e),id:e.id,label:f.a.createElement(_.a,{global:t,key:e.id,form:e,refer:Object(d.a)(a)})})}),s.forEach(function(e){k.push({value:Object(I.v)(e),id:e.id,label:f.a.createElement(N.a,{global:t,key:e.id,turf:e,refer:Object(d.a)(a)})})}),r.ass.turfs.forEach(function(e){e.direct&&E.push({value:Object(I.v)(e),id:e.id,label:f.a.createElement(N.a,{global:t,key:e.id,turf:e,refer:Object(d.a)(a),icon:r.autoturf?A.k:null})})}),a.setState({loading:!1,volunteer:r,teamOptions:b,leaderOptions:h,formOptions:y,turfOptions:k,selectedTeamsOption:v,selectedLeaderOption:g,selectedFormsOption:O,selectedTurfOption:E,hometurf:i,nearbyturf:u});case 39:case"end":return e.stop()}},e,null,[[3,14]])})),a._lockVolunteer=function(){var e=Object(o.a)(l.a.mark(function e(t,n){var r,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.global,o=n?"lock":"unlock",a.props.refer.setState({saving:!0}),e.prev=3,e.next=6,Object(I.g)(r,I.a+"/volunteer/"+o,"POST",{id:t.id});case 6:Object(I.z)("Volunteer hass been "+o+"ed."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(I.y)(e.t0,"Unable to "+o+" volunteer.");case 12:a.props.refer.setState({saving:!1}),a._loadData();case 14:case"end":return e.stop()}},e,null,[[3,9]])}));return function(t,a){return e.apply(this,arguments)}}(),a.state={global:e.global,refer:a.props.refer.props.refer,volunteer:a.props.volunteer,selectedTeamsOption:[],selectedLeaderOption:[],selectedFormsOption:[],selectedTurfOption:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.state.volunteer||this._loadData(),y.a.rebuild()}},{key:"componentDidUpdate",value:function(){y.a.rebuild()}},{key:"render",value:function(){var e=this,t=this.state,a=t.global,n=t.volunteer;return!n||this.state.loading?f.a.createElement(T.a,null):this.props.edit?f.a.createElement("div",null,f.a.createElement(w.a,{alignItems:"flex-start",style:{width:350}},f.a.createElement(C.a,null,f.a.createElement(D.a,{alt:n.name,src:n.avatar})),f.a.createElement(S.a,{primary:n.name,secondary:n.locationstr?Q(n.locationstr):"N/A"}),f.a.createElement(W,{volunteer:n})),f.a.createElement(R,{global:a,volunteer:n,refer:this})):f.a.createElement(w.a,{button:!0,style:{width:350},alignItems:"flex-start",onClick:function(){return e.props.refer.setState({thisVolunteer:n})}},f.a.createElement(C.a,null,f.a.createElement(D.a,{alt:n.name,src:n.avatar})),f.a.createElement(S.a,{primary:n.name,secondary:n.locationstr?Q(n.locationstr):"N/A"}),f.a.createElement(W,{volunteer:n}))}}]),t}(m.Component),R=function(t){return f.a.createElement("div",null,f.a.createElement("br",null),t.volunteer.locked?f.a.createElement("button",{onClick:function(){return t.refer._lockVolunteer(t.volunteer,!1)}},"Restore Access"):f.a.createElement("button",{onClick:function(){return t.refer._lockVolunteer(t.volunteer,!0)}},"Deny Access"),f.a.createElement("br",null),"Last Seen:"," ",new M.a("en-US").format(new Date(t.volunteer.last_seen-3e4)),f.a.createElement("br",null),"Email: ",t.volunteer.email?t.volunteer.email:"N/A",f.a.createElement("br",null),"Phone: ",t.volunteer.phone?t.volunteer.phone:"N/A",f.a.createElement("br",null),"Address:"," ",f.a.createElement(q,{global:e,refer:t.refer,volunteer:t.volunteer}),f.a.createElement("br",null),t.refer.state.hometurf.length?f.a.createElement("div",null,"Turf this volunteer's home address is in:",t.refer.state.hometurf.map(function(e){return f.a.createElement("div",null,e.name)})):f.a.createElement("div",null,"This volunteer's home address isn't in any turf."),f.a.createElement("br",null),t.refer.state.nearbyturf.length?f.a.createElement("div",null,"Turf this volunteer's home address is near by:",t.refer.state.nearbyturf.slice(0,5).map(function(e){return f.a.createElement("div",null,e.name)})):f.a.createElement("div",null,"No turfs are within ",V,"km of this volunteer."),f.a.createElement("br",null),"# of doors knocked: N/A",f.a.createElement("br",null),f.a.createElement("br",null),f.a.createElement("div",null,"Teams this volunteer is a member of:",f.a.createElement(k.a,{value:t.refer.state.selectedTeamsOption,onChange:t.refer.handleTeamsChange,options:t.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),f.a.createElement("br",null),"Teams this volunteer is a leader of:",f.a.createElement(k.a,{value:t.refer.state.selectedLeaderOption,onChange:t.refer.handleLeaderChange,options:t.refer.state.selectedTeamsOption,isMulti:!0,isSearchable:!0,placeholder:"None"})),f.a.createElement("br",null),t.refer.state.selectedTeamsOption.length?f.a.createElement("div",null,"Forms / Turf this users sees based on the above team(s):",f.a.createElement("br",null),t.volunteer.ass.forms.filter(function(e){return!e.direct}).map(function(a){return f.a.createElement(_.a,{global:e,key:a.id,form:a,refer:t.refer})}),t.volunteer.ass.turfs.filter(function(e){return!e.direct}).map(function(a){return f.a.createElement(N.a,{global:e,key:a.id,turf:a,refer:t.refer})})):"",f.a.createElement("div",null,"Forms this volunteer is directly assigned to:",f.a.createElement(k.a,{value:t.refer.state.selectedFormsOption,onChange:t.refer.handleFormsChange,options:t.refer.state.formOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),f.a.createElement("br",null),"Turf this volunteer is directly assigned to:",f.a.createElement(k.a,{value:t.refer.state.selectedTurfOption,onChange:t.refer.handleTurfChange,options:t.refer.state.turfOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})))},q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).submitAddress=function(){var e=Object(o.a)(l.a.mark(function e(t){var n,r,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.global,a.setState({address:t}),e.prev=2,e.next=5,Object(v.geocodeByAddress)(t);case 5:return r=e.sent,e.next=8,Object(v.getLatLng)(r[0]);case 8:return o=e.sent,e.next=11,Object(I.g)(n,I.a+"/volunteer/update","POST",{id:a.props.volunteer.id,address:t,lat:o.lat,lng:o.lng});case 11:a.props.refer._loadData(),Object(I.z)("Address hass been saved."),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),Object(I.y)(e.t0,"Unable to update address info.");case 18:case"end":return e.stop()}},e,null,[[2,15]])}));return function(t){return e.apply(this,arguments)}}(),a.state={global:e.global,edit:!1,address:a.props.volunteer.locationstr?a.props.volunteer.locationstr:""},a.onTypeAddress=function(e){return a.setState({address:e})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.state.edit?f.a.createElement(I.d,{debounce:500,value:this.state.address,onChange:this.onTypeAddress,onSelect:this.submitAddress}):f.a.createElement("div",null,this.state.address," ",f.a.createElement("button",{onClick:function(){return e.setState({edit:!0})}},"click to edit"))}}]),t}(m.Component),W=function(e){var t=[],a=e.volunteer.id;return e.volunteer.admin&&t.push(f.a.createElement(I.c,{icon:A.e,color:"gold",key:a+"admin","data-tip":"Administrator"})),e.volunteer.ass.leader&&t.push(f.a.createElement(I.c,{icon:A.i,color:"green",key:a+"leader","data-tip":"Team Leader"})),e.volunteer.locked?t.push(f.a.createElement(I.c,{icon:A.a,color:"red",key:a+"locked","data-tip":"Denied access"})):(e.volunteer.ass.ready?t.push(f.a.createElement(I.c,{icon:A.c,color:"green",key:a+"ready","data-tip":"Ready to Canvass"})):t.push(f.a.createElement(I.c,{icon:A.g,color:"red",key:a+"notready","data-tip":"Not ready to volunteer, check assignments"})),e.volunteer.locationstr||t.push(f.a.createElement(I.c,{icon:A.k,color:"red",key:a+"addr","data-tip":"Home Address is not set"}))),t};function Q(e){var t=e.split(", ");return t.length<4?e:(t.shift(),t.join(", "))}}).call(this,a(35))},69:function(e,t,a){"use strict";a.d(t,"b",function(){return B}),a.d(t,"a",function(){return R});var n=a(5),r=a.n(n),l=a(11),o=a(13),s=a(12),c=a(15),i=a(16),u=a(4),d=a(17),p=a(8),m=a(20),f=a(0),b=a.n(f),h=a(28),v=a(44),g=a(96),O=a.n(g),E=a(26),y=a(43),k=a.n(y),j=a(135),x=a(108),w=a(955),S=a(459),C=a(462),T=a(463),D=a(134),P=a(32),I=a(68),N=a(54),_=a(3);function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var A=k.a.enums({String:"Text Input",TEXTBOX:"Large Text Box",Number:"Number",Boolean:"On/Off Switch",SAND:"Agree/Disagree"},"FTYPE"),M={key:k.a.String,label:k.a.String,type:A},L=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),l=Object(m.a)(r,1)[0];return n.splice(a,0,l),n},U=function(e,t,a,n){var r=Array.from(e),l=Array.from(t),o=r.splice(a.index,1),s=Object(m.a)(o,1)[0];l.splice(n.index,0,s);var c={};return c[a.droppableId]=r,c[n.droppableId]=l,c},V=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({userSelect:"none",padding:16,margin:"0 0 ".concat(8,"px 0"),background:e?"lightgreen":"grey"},t)},H=function(e){return{background:e?"lightblue":"lightgrey",padding:8,width:250}},B=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).getList=function(e){return a.state[a.id2List[e]]},a.onDragEnd=function(e){var t=e.source,n=e.destination;if(n)if(t.droppableId===n.droppableId){var r=L(a.getList(t.droppableId),t.index,n.index),l={attributes:r};"droppable2"===t.droppableId&&(l={attributes_selected:r}),a.setState(l)}else{var o=U(a.getList(t.droppableId),a.getList(n.droppableId),t,n);a.setState({attributes:o.droppable,attributes_selected:o.droppable2})}},a.handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})},a._loadData=Object(l.a)(r.a.mark(function e(){var t,n,l,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,a.setState({loading:!0}),n=[],l=[],o=[],s={},e.prev=5,e.next=8,Object(_.l)(t);case 8:return n=e.sent,e.next=11,Object(_.j)(t);case 11:(l=e.sent).forEach(function(e){s[e.id]={label:e.name,type:e.type,optional:!0,options:e.values}}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),Object(_.y)(e.t0,"Unable to load forms.");case 18:a.setState({forms:n,attributes:l,attributes_selected:o,fields:s,loading:!1});case 19:case"end":return e.stop()}},e,null,[[5,15]])})),a._deleteForm=function(){var e=Object(l.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.state.global,a.setState({saving:!0,menuDelete:!1}),e.prev=2,e.next=5,Object(_.g)(n,_.a+"/form/delete","POST",{formId:t});case 5:Object(_.z)("Form has been deleted."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(_.y)(e.t0,"Unable to delete form.");case 11:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/forms/",a._loadData();case 14:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),a._createForm=Object(l.a)(r.a.mark(function e(){var t,n,l,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.global,null!==(n=a.addFormForm.getValue())){e.next=4;break}return e.abrupt("return");case 4:if((l=n.name.trim()).match(/^[a-zA-Z0-9\-_ ]+$/)){e.next=8;break}return Object(_.y)({},"From name can only contain alphanumeric characters, and spaces and dashes."),e.abrupt("return");case 8:if(!(l.length>255)){e.next=11;break}return Object(_.y)({},"Form name cannot be longer than 255 characters."),e.abrupt("return");case 11:return a.setState({saving:!0}),e.prev=12,o={name:l,attributes:Object.keys(a.state.fields)},e.next=16,Object(_.g)(t,_.a+"/form/create","POST",o);case 16:Object(_.z)("Form has been created."),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),Object(_.y)(e.t0,"Unable to create form.");case 22:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/forms/",a._loadData();case 25:case"end":return e.stop()}},e,null,[[12,19]])}));var n=localStorage.getItem("formsperpage");n||(n=5);var s={},d=Object.keys(s);return a.mainForm=k.a.struct({name:k.a.String}),a.state={global:e.global,loading:!0,forms:[],attributes:[],attributes_selected:[],fields:s,order:d,customForm:null,search:"",perPage:n,pageNum:1,menuDelete:!1},a.id2List={droppable:"attributes",droppable2:"attributes_selected"},a.formServerItems=k.a.struct({name:k.a.String}),a.customFormItems=k.a.struct(M),a.formServerOptions={fields:{name:{label:"Form Name",error:"You must enter a form name."}}},a.onChange=a.onChange.bind(Object(u.a)(a)),a.onTypeSearch=a.onTypeSearch.bind(Object(u.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handlePageNumChange",value:function(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"inputTypeToReadable",value:function(e){switch(e){case"String":return"Text Input";case"TEXTBOX":return"Text Box";case"Number":return"Number";case"Boolean":return"On/Off Switch";case"SAND":return"Agree/Disagree";case"List":return"Select from List";default:return e}}},{key:"rmField",value:function(e){var t=this.state,a=t.fields,n=t.order;for(var r in a)a[r]===e&&(delete a[r],n.splice(n.indexOf(r),1));this.setState({fields:a,order:n}),this.forceUpdate()}},{key:"onChange",value:function(e){"List"===e.type&&(e=k.a.String)}},{key:"onChangeForm",value:function(e){this.setState({addFormForm:e})}},{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state.global,a=[];return this.state.forms.forEach(function(t){e.state.search&&!Object(_.v)(t).includes(e.state.search)||a.push(t)}),b.a.createElement(h.a,null,b.a.createElement("div",null,b.a.createElement(v.a,{exact:!0,path:"/forms/",render:function(){return b.a.createElement(_.e,{flag:e.state.loading,func:function(){return e._loadData()}},"Search:"," ",b.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),b.a.createElement("br",null),b.a.createElement(z,{global:t,forms:a,refer:e}))}}),b.a.createElement(v.a,{path:"/forms/add",render:function(t){return b.a.createElement("div",null,b.a.createElement(k.a.form.Form,{ref:function(t){return e.addFormForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeForm(t)},value:e.state.addFormForm}),b.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},b.a.createElement(D.a,{onDragEnd:e.onDragEnd},b.a.createElement(D.c,{droppableId:"droppable"},function(t,a){return b.a.createElement("div",{ref:t.innerRef,style:H(a.isDraggingOver)},e.state.attributes.map(function(t,a){return b.a.createElement(D.b,{key:t.id,draggableId:t.id,index:a},function(a,n){return b.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:V(n.isDragging,a.draggableProps.style)}),t.label+(t.required?" *":"")," :"," ",e.inputTypeToReadable(t.type)," ")})}),t.placeholder)}),"\xa0 Drag to assign \xa0",b.a.createElement(D.c,{droppableId:"droppable2"},function(t,a){return b.a.createElement("div",{ref:t.innerRef,style:H(a.isDraggingOver)},e.state.attributes_selected.map(function(t,a){return b.a.createElement(D.b,{key:t.id,draggableId:t.id,index:a},function(a,n){return b.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:V(n.isDragging,a.draggableProps.style)}),t.label+(t.required?" *":"")," :"," ",e.inputTypeToReadable(t.type)," ",b.a.createElement(w.a,{value:"ack",color:"primary"})," Readonly")})}),t.placeholder)}))),b.a.createElement("button",{style:{margin:25},onClick:function(){return e._createForm()}},"Create Form"))}}),b.a.createElement(v.a,{path:"/forms/view/:id",render:function(a){return b.a.createElement("div",null,b.a.createElement(R,{global:t,key:a.match.params.id,id:a.match.params.id,edit:!0,refer:e}),b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement("br",null),b.a.createElement(x.a,{onClick:e.handleClickDelete,color:"primary"},"Delete Form"),b.a.createElement(S.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},b.a.createElement(C.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this form?"),b.a.createElement(T.a,null,b.a.createElement(x.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),b.a.createElement(x.a,{onClick:function(){return e._deleteForm(a.match.params.id)},color:"primary"},"Yes"))))}}),b.a.createElement(_.b,{flag:this.state.saving})))}}]),t}(f.Component),z=function(e){var t=e.refer.state.perPage,a=b.a.createElement("div",null),n=[];return e.forms.forEach(function(a,r){Math.floor(r/t)+1===e.refer.state.pageNum&&n.push(b.a.createElement(R,{global:e.global,key:a.id,form:a,refer:e.refer}))}),a=b.a.createElement("div",{style:{display:"flex"}},b.a.createElement(O.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.forms.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",b.a.createElement("div",{style:{width:75}},"# Per Page"," ",b.a.createElement(E.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),b.a.createElement("div",null,b.a.createElement("h3",null,e.type,"Forms (",e.forms.length,")"),b.a.createElement(h.b,{to:"/forms/add"},b.a.createElement("button",null,"Add Form")),a,n,a)},R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleTeamsChange=function(){var e=Object(l.a)(r.a.mark(function e(t){var n,l,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.global,t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=3,l=Object(_.h)(a.state.selectedTeamsOption,t),e.t0=r.a.keys(l.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(_.g)(n,_.a+"/form/assigned/team/add","POST",{teamId:l.add[o],formId:a.props.id});case 10:e.next=6;break;case 12:e.t2=r.a.keys(l.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(_.g)(n,_.a+"/form/assigned/team/remove","POST",{teamId:l.rm[s],formId:a.props.id});case 17:e.next=13;break;case 19:Object(_.z)("Team assignments saved."),a.setState({selectedTeamsOption:t}),e.next=26;break;case 23:e.prev=23,e.t4=e.catch(3),Object(_.y)(e.t4,"Unable to add/remove teams.");case 26:a.props.refer.setState({saving:!1});case 27:case"end":return e.stop()}},e,null,[[3,23]])}));return function(t){return e.apply(this,arguments)}}(),a.handleMembersChange=function(){var e=Object(l.a)(r.a.mark(function e(t){var n,l,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=a.state.global,t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=3,l=Object(_.h)(a.state.selectedMembersOption,t),e.t0=r.a.keys(l.add);case 6:if((e.t1=e.t0()).done){e.next=12;break}return o=e.t1.value,e.next=10,Object(_.g)(n,_.a+"/form/assigned/volunteer/add","POST",{vId:l.add[o],formId:a.props.id});case 10:e.next=6;break;case 12:e.t2=r.a.keys(l.rm);case 13:if((e.t3=e.t2()).done){e.next=19;break}return s=e.t3.value,e.next=17,Object(_.g)(n,_.a+"/form/assigned/volunteer/remove","POST",{vId:l.rm[s],formId:a.props.id});case 17:e.next=13;break;case 19:Object(_.z)("Volunteer assignments saved."),a.setState({selectedMembersOption:t}),e.next=26;break;case 23:e.prev=23,e.t4=e.catch(3),Object(_.y)(e.t4,"Unable to add/remove teams.");case 26:a.props.refer.setState({saving:!1});case 27:case"end":return e.stop()}},e,null,[[3,23]])}));return function(t){return e.apply(this,arguments)}}(),a._loadData=Object(l.a)(r.a.mark(function e(){var t,n,l,o,s,c,i,d,p,f,h,v;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,n={},l=[],o=[],s=[],c=[],a.setState({loading:!0}),e.prev=3,e.next=6,Promise.all([Object(_.k)(t,a.props.id,!0),Object(_.u)(t),Object(_.u)(t,"form",a.props.id),Object(_.q)(t),Object(_.q)(t,"form",a.props.id)]);case 6:i=e.sent,d=Object(m.a)(i,5),n=d[0],l=d[1],o=d[2],s=d[3],c=d[4],e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(3),Object(_.y)(e.t0,"Unable to load form info."),e.abrupt("return",a.setState({loading:!1}));case 19:p=[],f=[],h=[],v=[],s.forEach(function(e){p.push({value:Object(_.v)(e),id:e.id,label:b.a.createElement(N.a,{global:t,key:e.id,team:e,refer:Object(u.a)(a)})})}),c.forEach(function(e){h.push({value:Object(_.v)(e),id:e.id,label:b.a.createElement(N.a,{global:t,key:e.id,team:e,refer:Object(u.a)(a)})})}),l.forEach(function(e){f.push({value:Object(_.v)(e),id:e.id,label:b.a.createElement(I.a,{global:t,key:e.id,volunteer:e,refer:Object(u.a)(a)})})}),o.forEach(function(e){v.push({value:Object(_.v)(e),id:e.id,label:b.a.createElement(I.a,{global:t,key:e.id,volunteer:e,refer:Object(u.a)(a)})})}),a.setState({form:n,volunteers:l,teamOptions:p,membersOption:f,selectedTeamsOption:h,selectedMembersOption:v,loading:!1});case 28:case"end":return e.stop()}},e,null,[[3,15]])})),a.state={global:e.global,form:a.props.form,selectedTeamsOption:[],selectedMembersOption:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.state.form||this._loadData()}},{key:"render",value:function(){var e=this.state,t=e.global,a=e.form;return!a||this.state.loading?b.a.createElement(j.a,null):b.a.createElement("div",null,b.a.createElement("div",{style:{display:"flex",padding:"10px"}},b.a.createElement("div",{style:{padding:"5px 10px"}},b.a.createElement(_.c,{icon:P.d,style:{width:20,height:20,color:"gray"}})," ",a.name," ",this.props.edit?"":b.a.createElement(h.b,{to:"/forms/view/"+a.id},"view"))),this.props.edit?b.a.createElement(q,{global:t,form:a,refer:this}):"")}}]),t}(f.Component),q=function(e){return b.a.createElement("div",null,b.a.createElement("div",null,b.a.createElement("br",null),"Teams assigned to this form:",b.a.createElement(E.a,{value:e.refer.state.selectedTeamsOption,onChange:e.refer.handleTeamsChange,options:e.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),b.a.createElement("br",null),"Volunteers assigned directly to this form:",b.a.createElement(E.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.membersOption,isMulti:!0,isSearchable:!0,placeholder:"None"})))}},914:function(e,t,a){},915:function(e,t,a){},916:function(e,t,a){},949:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),o=a.n(l),s=(a(513),a(5)),c=a.n(s),i=a(11),u=a(13),d=a(12),p=a(15),m=a(16),f=a(17),b=a(28),h=a(44),v=a(155),g=(a(528),a(270)),O=a.n(g),E=a(417),y=a.n(E),k=a(156),j=a.n(k),x=a(135),w=a(3),S=a(32),C=a(272),T=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=Object(i.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,n={},e.prev=2,e.next=5,Object(w.g)(t,w.a+"/dashboard");case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(w.y)(e.t0,"Unable to load dashboard info.");case 11:a.setState({cb_version:n.version?n.version:"unknown",neo4j_version:n.neo4j_version?n.neo4j_version:"unknown"});case 12:case"end":return e.stop()}},e,null,[[2,8]])})),a.state={global:e.global,cb_version:null,neo4j_version:null},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,"HelloVoterReact"," version ","0.1.0"),r.a.createElement("div",null,this.state.cb_version?"HelloVoterAPI version "+this.state.cb_version:r.a.createElement(x.a,{height:15})),r.a.createElement("div",null,this.state.neo4j_version?"Neo4j version "+this.state.neo4j_version:r.a.createElement(x.a,{height:15})),r.a.createElement("div",null,"\xa9 2018, Our Voice USA, a 501(c)(3) Non-Profit Organization. Not for any candidate or political party."),r.a.createElement("div",null,"This program is free software; refer to our"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoterHQ/blob/master/LICENSE"},"License")," ","for more details."),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/OurVoiceUSA"},r.a.createElement(w.c,{icon:C.b})," @OurVoiceUSA")),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/OurVoiceUsa"},r.a.createElement(w.c,{icon:C.a})," @OurVoiceUSA")),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ourvoiceusa.org/"},r.a.createElement(w.c,{icon:S.j})," ourvoiceusa.org")))}}]),t}(n.Component),D=a(4),P=a(26),I=a(955),N=a(133),_=a(60),F=function(e){var t=e.value,a=e.percent,n=e.x,l=e.y,o=e.midAngle;return r.a.createElement("g",{transform:"translate(".concat(n,", ").concat(l,")"),textAnchor:o<-90||o>=90?"end":"start"},r.a.createElement("text",{x:0,y:0},"Count: ".concat(t)),r.a.createElement("text",{x:0,y:20},"(Percent: ".concat((100*a).toFixed(2),"%)")))},A=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._init=Object(i.a)(c.a.mark(function e(){var t,n,l,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,a.setState({loading:!0}),n=[],e.next=5,Object(w.s)(t);case 5:return l=e.sent,o=[],e.next=9,Object(w.j)(t);case 9:s=e.sent,l.forEach(function(e){n.push({value:Object(w.v)(e),id:e.id,label:r.a.createElement(_.a,{global:t,key:e.id,turf:e,refer:Object(D.a)(a)})})}),s.forEach(function(e){o.push({value:Object(w.v)(e),id:e.id,label:e.name})}),a.setState({loading:!1,attributeOptions:o,turfOptions:n});case 13:case"end":return e.stop()}},e)})),a.doQuery=Object(i.a)(c.a.mark(function e(){var t,n,r,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.global,a.state.selectedAttributeOption){e.next=3;break}return e.abrupt("return");case 3:return a.setState({loading:!0}),n=[],r=w.a+"/analytics/list?turfId=",a.state.selectedTurfOption&&a.state.selectedTurfOption.id&&(r+=a.state.selectedTurfOption.id),a.state.selectedAttributeOption&&a.state.selectedAttributeOption.id&&(r+="&aId="+a.state.selectedAttributeOption.id),a.state.include_null&&(r+="&include_null=true"),e.next=11,Object(w.g)(t,r);case 11:for((l=e.sent)&&l.data&&l.data.map(function(e){return n.push({name:e[0]?e[0]:"No Data",value:e[1]})});n.length>6;)n[5]={name:"Other",value:n[5].value+n.pop().value};a.setState({data_breakdown:n,loading:!1});case 15:case"end":return e.stop()}},e)})),a.handleTurfChange=function(e){e||(e=[]),a.setState({selectedTurfOption:e},function(){return a.doQuery()})},a.handleAttributeChange=function(e){e||(e=[]),a.setState({selectedAttributeOption:e},function(){return a.doQuery()})},a.state={global:e.global,turfOptions:[],selectedTurfOption:null,data_breakdown:[],animation:!0},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._init()}},{key:"render",value:function(){var e=this;return r.a.createElement(w.e,{flag:this.state.loading,func:function(){return e.doQuery()}},r.a.createElement("h3",null,"Analytics"),r.a.createElement(P.a,{value:this.state.selectedAttributeOption,onChange:this.handleAttributeChange,options:this.state.attributeOptions,isMulti:!1,isSearchable:!0,placeholder:"Select an attribute to query data for"}),r.a.createElement("br",null),r.a.createElement(P.a,{value:this.state.selectedTurfOption,onChange:this.handleTurfChange,options:this.state.turfOptions,isMulti:!1,isSearchable:!0,placeholder:"Select a turf to include only records within that turf"}),r.a.createElement(I.a,{color:"primary",checked:this.state.include_null,onChange:function(t,a){e.setState({include_null:a},Object(i.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.doQuery();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})))}}),' Include records with "No Data"',this.state.data_breakdown.length?r.a.createElement(N.e,{width:800,height:400},r.a.createElement(N.c,null),r.a.createElement(N.d,{data:this.state.data_breakdown,dataKey:"value",startAngle:180,endAngle:-180,innerRadius:60,outerRadius:80,label:F,paddingAngle:5,isAnimationActive:this.state.animation},this.state.data_breakdown.map(function(e,t){return r.a.createElement(N.a,{key:"slice-".concat(t),fill:["red","blue","yellow","green","grey"][t]})}),r.a.createElement(N.b,{width:50,position:"center"},this.state.selectedAttributeOption.label))):r.a.createElement("h3",null,"No Data"))}}]),t}(n.Component),M=a(436),L=a(437),U=a.n(L),V=a(283),H=a(127),B=(a(413),Object(H.sortableElement)(function(e){return r.a.createElement("div",{style:{display:"flex",padding:"10px"},className:"dashboard-card"},r.a.createElement("div",{style:{padding:"5px 10px"}},r.a.createElement(w.c,{style:{width:50,height:50,color:"gray"},icon:e.icon?e.icon:S.n})),r.a.createElement("div",{style:{flex:1,overflow:"auto"}},r.a.createElement("h3",null,e.name,": ",e.stat)))})),z=Object(H.sortableContainer)(function(e){return r.a.createElement("div",{className:"dashboard-container"},e.dash.map(function(t,a){var n=e.cards[t]||{};return r.a.createElement(B,{key:n.name,name:n.name,stat:n.stat,icon:n.icon,index:a})}))}),R=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex,r=Object(H.arrayMove)(a.state.dash,t,n);localStorage.setItem("dash",r.map(function(e){return e})),a.setState(function(){return{dash:r}})},a._loadData=Object(i.a)(c.a.mark(function e(){var t,n,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,n={},l=[],a.setState({loading:!0}),e.prev=4,e.next=7,Object(w.g)(t,w.a+"/dashboard");case 7:0===(n=e.sent).admins&&a.setState({noAdmins:!0}),l={vol:{name:"Volunteers",stat:n.volunteers,icon:S.q},team:{name:"Teams",stat:n.teams,icon:S.r},turf:{name:"Turfs",stat:n.turfs,icon:S.l},form:{name:"Forms",stat:n.forms,icon:S.d},attributes:{name:"Attributes",stat:n.attributes,icon:S.b},addr:{name:"Addresses",stat:r.a.createElement(M.a,{value:n.addresses,displayType:"text",thousandSeparator:!0}),icon:S.m},dbsz:{name:"Database size",stat:U()(n.dbsize?n.dbsize:0,{round:1}),icon:S.f}},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),Object(w.y)(e.t0,"Unable to load dashboard info.");case 15:a.setState({cards:l,data:n,loading:!1});case 16:case"end":return e.stop()}},e,null,[[4,12]])}));var n=(localStorage.getItem("dash")||"vol,team,turf,form,attributes,addr,dbsz").split(",");return a.state={global:e.global,loading:!0,noAdmins:!1,data:{},cards:[],dash:n},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state.global;return r.a.createElement(w.e,{flag:this.state.loading,func:this._loadData},r.a.createElement(z,{state:this.state,axis:"xy",onSortEnd:this.onSortEnd,cards:this.state.cards,dash:this.state.dash}),r.a.createElement(V.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.noAdmins,onClose:function(){return e.setState({noAdmins:!1})}},r.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},"Welcome! Looks like you're new here. By default, users have zero permissions when they sign in. To make yourself an admin and gain full access to the UI, run the follow command from the shell:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("pre",null,"npm run makeadmin -- ",t.getUserProp("id")))))}}]),t}(n.Component),q=a(69),W=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._init=Object(i.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,a.setState({loading:!0}),n=[],e.next=5,Object(w.j)(t);case 5:e.sent.forEach(function(e){n.push({value:Object(w.v)(e),id:e.id,label:e.name,data:e})}),a.setState({loading:!1,attributeOptions:n});case 8:case"end":return e.stop()}},e)})),a.handleAttributeChange=function(e){e||(e=[]),a.setState({selectedAttributeOption:e})},a.state={global:e.global},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._init()}},{key:"render",value:function(){var e=this;return r.a.createElement(w.e,{flag:this.state.loading,func:function(){return e._init()}},r.a.createElement("h3",null,"Attributes"),r.a.createElement(P.a,{value:this.state.selectedAttributeOption,onChange:this.handleAttributeChange,options:this.state.attributeOptions,isMulti:!1,isSearchable:!0,placeholder:"Select an attribute to edit"}),this.state.selectedAttributeOption?r.a.createElement("div",null,JSON.stringify(this.state.selectedAttributeOption.data)):r.a.createElement("div",null))}}]),t}(n.Component),Q=a(8),G=a(131),J=a.n(G),Y=(a(914),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={checked:a.props.checked||!1,isMulti:a.props.isMulti||!0,value:a.props.value,map1:{value:",",label:"delimited by comma"},map2:{value:0,label:"1st value"}},a._handleCheck=function(){var e=a.props,t=e.updateFormats,n=e.label;a.setState({checked:!a.state.checked,isMulti:!a.state.isMulti,value:"",map1:{value:",",label:"delimited by comma"},map2:{value:0,label:"1st value"}},function(){return t&&t(n,a.state)})},a._setValue=function(e){var t=a.props,n=t.updateFormats,r=t.label;return a.setState({value:e},function(){return n&&n(r,a.state)})},a._setMapValue=function(e,t){var n=a.props,r=n.updateFormats,l=n.label;a.setState(Object(Q.a)({},e,t),function(){return r&&r(l,a.state)})},a._renderCheckbox=function(e){var t=e.checked;return r.a.createElement(I.a,{className:"ck-bx",onChange:function(){return a._handleCheck()},onClick:function(){return a._handleCheck()},value:"ack",color:"primary",checked:t})},a._renderMapOptions=function(e){var t=e.map1,n=void 0===t?"":t,l=e.map2,o=void 0===l?"":l;e.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{width:160}},r.a.createElement(P.a,{className:"map-option-1",onChange:function(e){return a._setMapValue("map1",e)},value:n,options:[{value:",",label:"delimited by comma"},{value:" ",label:"delimited by space"}],placeholder:"None"})),r.a.createElement("div",{style:{width:150}},r.a.createElement(P.a,{className:"map-option-2",onChange:function(e){return a._setMapValue("map2",e)},value:o,options:[{value:0,label:"1st value"},{value:1,label:"2nd value"},{value:2,label:"last value"}],placeholder:"None"})))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=void 0===a?"":a,l=t.options,o=void 0===l?[]:l,s=t.checkbox,c=void 0!==s&&s,i=t.dimensions,u=(i=void 0===i?{width:450,labelWidth:150}:i).width,d=i.labelWidth,p=this.state,m=p.checked,f=p.isMulti,b=p.value,h=p.map1,v=p.map2;return r.a.createElement("div",{className:"mapselect"},r.a.createElement("div",{style:{width:d}},n,":")," ",r.a.createElement("div",{style:{width:u}},r.a.createElement(P.a,{className:"map-select-input",value:b,options:o,onChange:function(t){return e._setValue(t)},isMulti:f,placeholder:"None"})),c?this._renderCheckbox({checked:m}):"",m?this._renderMapOptions({map1:h,map2:v,value:b}):"")}}]),t}(r.a.Component)),K=a(10),X=a(996),Z=a(997),$=a(1001),ee=a(1e3),te=a(1002),ae=a(1011),ne=a(998),re=a(1015),le=a(460),oe=a(995),se=a(279),ce=a.n(se),ie=a(281),ue=a.n(ie),de=a(280),pe=a.n(de),me=a(278),fe=a.n(me),be=function(e,t){return t.func?t.params?t.func(e[t.params[0]],e[t.params[1]]):t.func(e):e[t.params[0]]},he=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleFirstPageButtonClick=function(e){a.props.onChangePage(e,0)},a.handleBackButtonClick=function(e){a.props.onChangePage(e,a.props.page-1)},a.handleNextButtonClick=function(e){a.props.onChangePage(e,a.props.page+1)},a.handleLastPageButtonClick=function(e){a.props.onChangePage(e,Math.max(0,Math.ceil(a.props.count/a.props.rowsPerPage)-1))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.count,n=e.page,l=e.rowsPerPage,o=e.theme;return r.a.createElement("div",{className:t.root},r.a.createElement(oe.a,{onClick:this.handleFirstPageButtonClick,disabled:0===n,"aria-label":"First Page"},"rtl"===o.direction?r.a.createElement(fe.a,null):r.a.createElement(ce.a,null)),r.a.createElement(oe.a,{onClick:this.handleBackButtonClick,disabled:0===n,"aria-label":"Previous Page"},"rtl"===o.direction?r.a.createElement(pe.a,null):r.a.createElement(ue.a,null)),r.a.createElement(oe.a,{onClick:this.handleNextButtonClick,disabled:n>=Math.ceil(a/l)-1,"aria-label":"Next Page"},"rtl"===o.direction?r.a.createElement(ue.a,null):r.a.createElement(pe.a,null)),r.a.createElement(oe.a,{onClick:this.handleLastPageButtonClick,disabled:n>=Math.ceil(a/l)-1,"aria-label":"Last Page"},"rtl"===o.direction?r.a.createElement(ce.a,null):r.a.createElement(fe.a,null)))}}]),t}(n.Component),ve=Object(K.a)(function(e){return{root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:2.5*e.spacing.unit}}},{withTheme:!0})(he),ge=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.state={spec:a.props.spec,rows:a.props.rows,page:0,rowsPerPage:5},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.rows,n=t.spec,l=t.rowsPerPage,o=t.page,s=l-Math.min(l,a.length-o*l);return r.a.createElement(le.a,{className:e.root},r.a.createElement("div",{className:e.tableWrapper},r.a.createElement(X.a,{className:e.table},r.a.createElement(Z.a,null,r.a.createElement(ne.a,null,n.map(function(e){return r.a.createElement(re.a,{title:e.tooltip},r.a.createElement(ee.a,null,e.header))}))),r.a.createElement($.a,null,a.slice(o*l,o*l+l).map(function(e){return r.a.createElement(ne.a,{key:e.id},n.map(function(t){return t.funcItemTooltip&&t.funcItemTooltip(e)?r.a.createElement(re.a,{title:e.error},r.a.createElement(ee.a,null,be(e,t))):r.a.createElement(ee.a,null,be(e,t))}))}),s>0&&r.a.createElement(ne.a,{style:{height:48*s}},r.a.createElement(ee.a,{colSpan:6}))),r.a.createElement(te.a,null,r.a.createElement(ne.a,null,r.a.createElement(ae.a,{rowsPerPageOptions:[5,10,25],colSpan:3,count:a.length,rowsPerPage:l,page:o,SelectProps:{native:!0},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:ve}))))))}}]),t}(n.Component),Oe=Object(K.a)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:500},tableWrapper:{overflowX:"auto"}}})(ge),Ee=a(1005),ye=a(1013),ke=(a(915),Object(K.a)({root:{flexGrow:1}})(function(e){var t=e.title,a=e.completed;return r.a.createElement("div",{className:"progress-bar progress-bar-".concat(0===a?"hidden":"shown")},!0===a?r.a.createElement("div",{className:"progress-complete"},r.a.createElement(ye.a,null),"Complete"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{marginTop:"5px"}},t),r.a.createElement(Ee.a,{style:{width:"90%",paddingTop:"10px"},variant:"determinate",value:a})))})),je=["Unique Record ID","Street Address","Unit","City","State","Zip","Longitude","Latitude","Name","Party Affiliation"],xe=function(e,t){return function(){return t(e.apply(void 0,arguments))}},we=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce(xe)},Se=[{header:"Import File",tooltip:"The file name of the imported file.",params:["filename"]},{header:"Upload Time",tooltip:"The time it took the file to go from the uploader's computer to the server.",func:w.x,params:["created","submitted"]},{header:"Queue Delay",tooltip:"The time this import had to wait in queue for other jobs to finish.",func:w.x,params:["submitted","parse_start"]},{header:"Parse time",tooltip:"The time it took to aggregate address, people, and attribute data into the database.",func:w.x,params:["parse_start","parse_end"]},{header:"Record Count",tooltip:"The number of unique records contained in the import file.",func:w.w,params:["num_records"]},{header:"Geocode Time",tooltip:"The time it took the system to geocode the addresses in the import file.",func:w.x,params:["geocode_start","geocode_end"]},{header:"Dedupe Time",tooltip:"The time it took the system to identify and remove duplicates as a result of this import.",func:w.x,params:["dedupe_start","dedupe_end"]},{header:"Turf Index Time",tooltip:"The time it took the system to index each address to turfs it belongs to.",func:w.x,params:["turfadd_start","turfadd_end"]},{header:"Address Index Time",tooltip:"The time it took to add these addresses to the master database index.",func:w.x,params:["index_start","index_end"]},{header:"Total Time",tooltip:"The total time the import took from file upload start to complete finish.",func:w.x,params:["created","completed"]}];function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach(function(t){Object(Q.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var De=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:a.props.data||[],headers:a.props.headers||[],fields:je,formats:{},mapped:[]},a.formatHeaders=function(e){return e.map(function(e){return{value:e,label:e}})},a.updateFormats=function(e,t){return a.setState({formats:Te({},a.state.formats,Object(Q.a)({},e,t))},function(){return a.updateMapped()})},a.updateMapped=function(){return a.setState({mapped:a.mapData(a.state)||[]},function(){return a.props.getMapped&&a.props.getMapped(a.state.mapped)})},a.mapData=function(e){var t=e.formats,n=e.fields,r=Object(D.a)(a),l=r.generateFormats,o=r.getAllIndexes,s=r.parseData;return we(l,o,s)(t,n)},a.generateFormats=function(e,t){return J()(t,function(t){return e[t]?{name:t,format:e[t]}:{name:t,format:null}})},a.getAllIndexes=function(e){return J()(e,function(e){var t=e.name,n=e.format;if(n&&Array.isArray(n.value)){var r=n.value.map(function(e){return a.state.headers.findIndex(function(t){return t===e.value})});return{name:t,format:n,indexes:r}}if(n){var l=a.state.headers.findIndex(function(e){return n.value&&e===n.value.value});return{name:t,format:n,indexes:l}}return{name:t,format:n,indexes:null}})},a.parseData=function(e){var t=a.state.data;return J()(t,function(t){return J()(e,function(e){var a=e.indexes,n=e.format;return a&&Array.isArray(a)?a.reduce(function(e,a){return"".concat(e.trim()," ").concat(t[a].trim())},"").trim():a&&t[a]?t[a].split(n.map1.value)[n.map2.value]:""})})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.updateFormats,t=void 0===e?function(){return console.warn("Cannot find update format function.")}:e,a=this.props.fields,n=void 0===a?[]:a,l=this.state.headers,o=void 0===l?[]:l,s=this.formatHeaders(o);return r.a.createElement(r.a.Fragment,null,n.map(function(e){return r.a.createElement(Y,{key:e,label:e,updateFormats:t,options:s,checkbox:!0,isMulti:!0})}))}}]),t}(r.a.Component),Pe=function(e){var t=e.data,a=e.title;return r.a.createElement("div",{className:"records-wrapper"},t.map(function(e){return r.a.createElement("div",{className:"preview-item  ".concat(a?" preview-title":""),key:"".concat(e).concat(3444*Math.random())},r.a.createElement("div",{style:{width:250}},""!==e?e:"NULL"))}))};a(916);function Ie(){return parseInt(1e3*Math.random())}var Ne=function(e){var t=e.titles,a=e.records;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Sample Records based on selection"),r.a.createElement("div",{key:"".concat(t).concat(a),style:{display:"flex"}},r.a.createElement(Pe,{key:"".concat(t).concat(Ie()),data:t,title:!0}),a.map(function(e){return r.a.createElement(Pe,{key:"".concat(e).concat(Ie()),data:e})})))},_e=a(439),Fe=a.n(_e),Ae=a(440),Me=a.n(Ae),Le=a(1006);function Ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ue(a,!0).forEach(function(t){Object(Q.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ue(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var He={loading:!1,sending:!1,data:null,headers:[],mapped:[],perPage:localStorage.getItem("importsperpage")||5,pageNum:1,submitting:!1,completed:0},Be=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).preProcess=function(){var e=Object(i.a)(c.a.mark(function e(t,n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.shift(),t.pop(),a.setState({data:t,headers:r,filename:n});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.sendData=Object(i.a)(c.a.mark(function e(){var t,n,r,l,o,s,i,u,d,p,m,f,b;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.global,r=t.mapped,l=t.filename,o=r.length,a.setState({sending:!0,completed:1}),e.next=5,Object(w.g)(n,w.a+"/import/begin","POST",{filename:l,attributes:["Name","Party Affiliation"]});case 5:i=(s=["#","apt","unit","ste","spc"]).map(function(e){return new RegExp(".* "+e+" ","i")}),u=s.map(function(e){return new RegExp(" "+e+" .*","i")});case 8:if(!r.length){e.next=34;break}d=[],p=0;case 11:if(!(p<1e3)){e.next=28;break}if(!r.length){e.next=25;break}if((m=r.pop())[3]){e.next=24;break}e.t0=c.a.keys(s);case 16:if((e.t1=e.t0()).done){e.next=24;break}if(f=e.t1.value,!m[2].match(i[f])){e.next=22;break}return m[3]=m[2].replace(i[f],"").trim(),m[2]=m[2].replace(u[f],"").trim(),e.abrupt("break",24);case 22:e.next=16;break;case 24:d.push(m);case 25:p++,e.next=11;break;case 28:return e.next=30,Object(w.g)(n,w.a+"/import/add","POST",{filename:l,data:d});case 30:b=Math.ceil((o-r.length)/o*100),a.setState({completed:b}),e.next=8;break;case 34:return e.next=36,Object(w.g)(n,w.a+"/import/end","POST",{filename:l});case 36:a.setState({completed:!0}),Object(w.z)("Upload complete! An import job has been queued and will process soon."),setTimeout(function(){a.setState({sending:!1}),a._loadData()},3e3);case 39:case"end":return e.stop()}},e)})),a._loadData=Object(i.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,n=[],a.setState({loading:!0}),e.prev=3,e.next=6,Object(w.m)(t);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(w.y)(e.t0,"Unable to load import data.");case 12:a.setState({loading:!1,imports:n},function(){a._resetState()});case 13:case"end":return e.stop()}},e,null,[[3,9]])})),a._resetState=function(){return a.setState(Ve({},He))},a.getMapped=function(e){return a.setState({mapped:e})},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})},a.state=Ve({global:e.global,imports:[]},He),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"preProcessError",value:function(e){Object(w.y)(e,"Failed to preprocess the import file.")}},{key:"render",value:function(){var e=this,t=this.state,a=t.mapped,n=void 0===a?[]:a,l=t.data,o=void 0===l?[]:l,s=t.headers,c=void 0===s?[]:s,i=t.perPage,u=t.pageNum,d=t.imports,p=t.loading,m=t.completed;return p?r.a.createElement(x.a,null):c.length?r.a.createElement("div",null,r.a.createElement(ke,{title:"Uploading import file...",completed:m}),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("h3",null,"Import Data")," \xa0\xa0\xa0",r.a.createElement(w.c,{icon:S.h,size:"3x"})),r.a.createElement(De,{headers:c,fields:je,data:o,getMapped:this.getMapped}),r.a.createElement(Le.a,{variant:"middle"}),r.a.createElement("br",null),r.a.createElement(Me.a,{disabled:this.state.sending,variant:"contained",color:"primary",onClick:function(){return e.sendData()}},"Import"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Le.a,{variant:"middle"}),r.a.createElement(Ne,{key:this,titles:je,records:n.slice(0,3)})):r.a.createElement("div",null,r.a.createElement(Fe.a,{label:"Data Importa",onError:this.preProcessError,onFileLoaded:this.preProcess}),r.a.createElement("br",null),r.a.createElement("h3",null,"Select a CSV file to get to the next menu!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.e,{flag:this.state.loading,func:function(){return e._loadData()}},r.a.createElement(Oe,{perPage:i,pageNum:u,spec:Se,rows:d,handlePageClick:this.handlePageClick,handlePageNumChange:this.handlePageNumChange})))}}]),t}(n.Component),ze=function(e){return new Date(e).toString()},Re=function(e){return"boolean"===typeof e.success?e.success?"successful":"failed":e.started?"running":"waiting"},qe=function(e){return e.error?e.error:null},We=function(e,t){switch(e){case"ImportFile":return"Import file "+t.filename;case"Turf":return"Turf "+t.name;default:return"Unknown"}},Qe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._loadData=Object(i.a)(c.a.mark(function e(){var t,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,n=[],a.setState({loading:!0}),e.next=5,Object(w.g)(t,w.a+"/queue/list");case 5:(r=e.sent).data&&(n=r.data.map(function(e){var t=e[0];return t.type=e[1],t.obj=e[2],t})),a.setState({rows:n,loading:!1});case 8:case"end":return e.stop()}},e)})),a.state={rows:[],global:e.global},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state.rows;return r.a.createElement(w.e,{flag:this.state.loading,func:function(){return e._loadData()}},r.a.createElement(Oe,{spec:[{header:"Enqueu Time",tooltip:"The date/time that this job entered the queue.",func:ze,params:["created"]},{header:"Task",tooltip:"The operation that this queue manages.",params:["task"]},{header:"Queue Delay",tooltip:"The time this task had to wait in queue for other jobs to finish.",func:w.x,params:["created","started"]},{header:"Runtime",tooltip:"The time it took for this task to complete.",func:w.x,params:["started","completed"]},{header:"Status",tooltip:"The status of this particular task.",func:Re,funcItemTooltip:qe},{header:"Task Reference",tooltip:"The particular item that queued task was processing.",func:We,params:["type","obj"]}],rows:t}))}}]),t}(n.Component),Ge=a(1016),Je=a(136),Ye=a(154),Ke=a.n(Ye);function Xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xe(a,!0).forEach(function(t){Object(Q.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $e=function(e){return{main:Object(Q.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Ze({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:175,width:"calc(100% - ".concat(175,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:175,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(Q.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:7*e.spacing.unit},e.breakpoints.up("sm"),{width:9*e.spacing.unit}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit,height:"100vh",overflow:"auto"},chartContainer:{marginLeft:-22},tableContainer:{height:320},h5:{marginBottom:2*e.spacing.unit}}},et=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={classes:e.classes},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.classes;return r.a.createElement("main",{className:e.main},r.a.createElement(Ge.a,null),r.a.createElement(le.a,{className:e.paper},r.a.createElement(Je.a,{component:"h1",variant:"h5"},"HelloVoterHQ is loading..."),r.a.createElement(x.a,{height:15})),r.a.createElement("br",null),r.a.createElement("center",null,"Built with ",r.a.createElement("span",{role:"img","aria-label":"Love"},"\u2764\ufe0f")," by Our Voice USA"))}}]),t}(n.Component),tt=Ke()($e)(et),at=a(466),nt=a(108),rt=a(1007),lt=a(1008),ot=a(1004),st=a(1014),ct=a(441),it=a.n(ct),ut=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(p.a)(this,Object(m.a)(t).call(this,e));var n,r=[{label:"Organization ID",value:"org"},{label:"3rd Party Server",value:"server"}];try{a.props.location.pathname.match(/\/jwt\//)&&(n=a.props.location.pathname.split("/").pop())}catch(l){console.warn(l)}return a.state={global:e.global,dev:!1,classes:e.classes,token:n,selectedLoginOption:r[0],loginOptions:r},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.token;e&&(localStorage.setItem("jwt",e),setTimeout(function(){window.location.href="/HelloVoterHQ/#/"},500),setTimeout(function(){window.location.reload()},1500))}},{key:"render",value:function(){var e=this,t=this.state,a=t.global,n=t.classes,l=t.token,o=t.loginOptions,s=t.selectedLoginOption;return l?r.a.createElement(tt,{classes:n}):r.a.createElement("main",{className:n.main},r.a.createElement(Ge.a,null),r.a.createElement(le.a,{className:n.paper},r.a.createElement(at.a,{className:n.avatar},r.a.createElement(it.a,null)),r.a.createElement(Je.a,{component:"h1",variant:"h5"},"Sign in to HelloVoterHQ"),r.a.createElement("form",{className:n.form,onSubmit:function(t){t.preventDefault(),a.doSave(t,e.state.target)}},r.a.createElement(P.a,{value:s,options:o,onChange:function(t){return e.setState({selectedLoginOption:t})}}),r.a.createElement(dt,{global:a,refer:this}),r.a.createElement(nt.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,onClick:function(){return e.setState({target:"google"})}},"Google Sign In"),r.a.createElement(nt.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.setState({target:"facebook"})},className:n.submit},"Facebook Sign In"))),r.a.createElement("br",null),r.a.createElement("center",null,"Built with ",r.a.createElement("span",{role:"img","aria-label":"Love"},"\u2764\ufe0f")," by Our Voice USA"))}}]),t}(n.Component),dt=function(e){switch(e.refer.state.selectedLoginOption.value){case"org":return r.a.createElement("div",null,r.a.createElement(rt.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(st.a,{htmlFor:"domain"},"Enter your Organization ID. Example: NCC1701"),r.a.createElement(ot.a,{id:"orgId",name:"orgId",autoComplete:"orgId",autoFocus:!0,defaultValue:e.global.state.orgId})),r.a.createElement(lt.a,{control:r.a.createElement(I.a,{value:"ack",color:"primary",required:!0}),label:"By checking this box you acknowledge that you have read and agreed to our terms of use."}));case"server":return r.a.createElement("div",null,r.a.createElement(rt.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(st.a,{htmlFor:"domain"},"Server Address"),r.a.createElement(ot.a,{id:"server",name:"server",autoComplete:"server",autoFocus:!0,defaultValue:e.global.state.qserver})),r.a.createElement(lt.a,{control:r.a.createElement(I.a,{value:"ack",color:"primary",required:!0}),label:"By checking this box you acknowledge that the server to which you are connecting is not affiliated with Our Voice USA and the data you send and receive is governed by that server's terms of use."}));default:return null}},pt=Ke()($e)(ut),mt=a(459),ft=a(462),bt=a(463),ht=function(e){var t=e.menuLogout,a=e.handleCloseLogout,n=e._logout;return r.a.createElement(mt.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ft.a,{id:"alert-dialog-title"},"Are you sure you wish to logout?"),r.a.createElement(bt.a,null,r.a.createElement(nt.a,{onClick:a,color:"primary",autoFocus:!0},"No"),r.a.createElement(nt.a,{onClick:function(){return n()},color:"primary"},"Yes")))},vt=a(415),gt=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Settings Component")}}]),t}(n.Component),Ot=a(54),Et=a(68),yt=a(1009),kt=a(1003),jt=a(443),xt=a.n(jt),wt=a(18),St=a.n(wt),Ct=function(e){var t=e.classes,a=e.global,n=e.open,l=e.handleDrawerOpen,o=e.getUserProp;return r.a.createElement(yt.a,{position:"absolute",className:St()(t.appBar,n&&t.appBarShift)},r.a.createElement(kt.a,{disableGutters:!n,className:t.toolbar},r.a.createElement(oe.a,{color:"inherit","aria-label":"Open drawer",onClick:l,className:St()(t.menuButton,n&&t.menuButtonHidden)},r.a.createElement(xt.a,null)),r.a.createElement(Je.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},r.a.createElement("div",{style:{margin:10}},"HelloVoterHQ @ ",a.state.server)),r.a.createElement(at.a,{alt:"Remy Sharp",src:o("avatar"),className:t.avatar,onClick:function(){return window.location.href="/HelloVoterHQ/#/volunteers/view/"+o("id")}})))},Tt=a(1012),Dt=a(457),Pt=a.n(Dt),It=a(954),Nt=a(464),_t=a(1010),Ft=a(467),At=a(444),Mt=a.n(At),Lt=a(445),Ut=a.n(Lt),Vt=a(446),Ht=a.n(Vt),Bt=a(447),zt=a.n(Bt),Rt=a(448),qt=a.n(Rt),Wt=a(449),Qt=a.n(Wt),Gt=a(450),Jt=a.n(Gt),Yt=a(451),Kt=a.n(Yt),Xt=a(452),Zt=a.n(Xt),$t=a(453),ea=a.n($t),ta=a(454),aa=a.n(ta),na=a(455),ra=a.n(na),la=a(456),oa=a.n(la),sa=function(e){var t=e.handleClickLogout;return r.a.createElement(n.Fragment,null,r.a.createElement(It.a,null,r.a.createElement(b.b,{to:"/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(Mt.a,null)),r.a.createElement(Ft.a,{primary:"Dashboard"}))),r.a.createElement(b.b,{to:"/volunteers/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(Ut.a,null)),r.a.createElement(Ft.a,{primary:"Volunteers"}))),r.a.createElement(b.b,{to:"/teams/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(Ht.a,null)),r.a.createElement(Ft.a,{primary:"Teams"}))),r.a.createElement(b.b,{to:"/turf/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(zt.a,null)),r.a.createElement(Ft.a,{primary:"Turf"}))),r.a.createElement(b.b,{to:"/forms/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(qt.a,null)),r.a.createElement(Ft.a,{primary:"Forms"}))),r.a.createElement(b.b,{to:"/attributes/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(Qt.a,null)),r.a.createElement(Ft.a,{primary:"Attributes"}))),r.a.createElement(b.b,{to:"/map/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(Jt.a,null)),r.a.createElement(Ft.a,{primary:"Map"}))),r.a.createElement(b.b,{to:"/import/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(Kt.a,null)),r.a.createElement(Ft.a,{primary:"Import Data"}))),r.a.createElement(b.b,{to:"/queue/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(Zt.a,null)),r.a.createElement(Ft.a,{primary:"System Queue"}))),r.a.createElement(b.b,{to:"/analytics/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(ea.a,null)),r.a.createElement(Ft.a,{primary:"Analytics"})))),r.a.createElement(Le.a,null),r.a.createElement(It.a,null,r.a.createElement(Nt.a,{button:!0,onClick:t},r.a.createElement(_t.a,null,r.a.createElement(aa.a,null)),r.a.createElement(Ft.a,{primary:"Logout"}))),r.a.createElement(Le.a,null),r.a.createElement(It.a,null,r.a.createElement(b.b,{to:"/about/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(ra.a,null)),r.a.createElement(Ft.a,{primary:"About"}))),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoterHQ/tree/master/docs/"},r.a.createElement(Nt.a,{button:!0},r.a.createElement(_t.a,null,r.a.createElement(oa.a,null)),r.a.createElement(Ft.a,{primary:"Help"})))))},ca=function(e){var t=e.classes,a=e.open,n=e.handleClickLogout,l=e.handleDrawerClose;return r.a.createElement(Tt.a,{variant:"permanent",classes:{paper:St()(t.drawerPaper,!a&&t.drawerPaperClose)},open:a},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(oe.a,{onClick:l},r.a.createElement(Pt.a,null))),r.a.createElement(Le.a,null),r.a.createElement(sa,{handleClickLogout:n}))},ia=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h1",null,"OOOPS!!"),r.a.createElement("div",null,"We can't seem to find the page you're looking for:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("code",null,t.pathname),r.a.createElement("br",null),r.a.createElement("br",null),"If you feel this page is in error,"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoterHQ/issues/new"},"report an issue")," ","and the coders will take a look."))},ua=function(e){var t=e.global;return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(R,{global:t})}}),r.a.createElement(h.a,{path:"/jwt/",render:function(e){return r.a.createElement(pt,Object.assign({},e,{global:t}))}}),r.a.createElement(h.a,{path:"/volunteers/",render:function(){return r.a.createElement(Et.b,{global:t})}}),r.a.createElement(h.a,{path:"/teams/",render:function(){return r.a.createElement(Ot.b,{global:t})}}),r.a.createElement(h.a,{path:"/turf/",render:function(){return r.a.createElement(_.c,{global:t})}}),r.a.createElement(h.a,{path:"/forms/",render:function(){return r.a.createElement(q.b,{global:t})}}),r.a.createElement(h.a,{path:"/attributes/",render:function(){return r.a.createElement(W,{global:t})}}),r.a.createElement(h.a,{path:"/map/",render:function(){return r.a.createElement(vt.a,{global:t,apiKey:t.state.google_maps_key})}}),r.a.createElement(h.a,{path:"/import/",render:function(){return r.a.createElement(Be,{global:t})}}),r.a.createElement(h.a,{path:"/queue/",render:function(){return r.a.createElement(Qe,{global:t})}}),r.a.createElement(h.a,{path:"/analytics/",render:function(){return r.a.createElement(A,{global:t})}}),r.a.createElement(h.a,{path:"/settings/",render:function(){return r.a.createElement(gt,{global:t})}}),r.a.createElement(h.a,{path:"/about/",render:function(){return r.a.createElement(T,{global:t})}}),r.a.createElement(h.a,{component:ia}))},da=(a(948),function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._loadData=Object(i.a)(c.a.mark(function e(){var t,n,r,l,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.server,r=t.token,l=t.orgId,a.setState({loading:!0}),e.prev=2,o={error:!0},!n||!r){e.next=10;break}return e.next=7,a.singHello(n,O.a.decode(r).id.split(":")[0],r,l);case 7:o=e.sent,e.next=11;break;case 10:throw new Error("missing server or token");case 11:if(!o.error){e.next=13;break}throw new Error("hai error");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),r&&n&&(a.setState({server:null,token:null,orgId:null}),localStorage.clear(),console.warn("Cleaning localStorage")),console.warn(e.t0);case 19:a.setState({loading:!1},function(){return a._loadKeys()});case 20:case"end":return e.stop()}},e,null,[[2,15]])})),a._loadKeys=Object(i.a)(c.a.mark(function e(){var t,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.global,!a.state.google_maps_key){e.next=3;break}return e.abrupt("return");case 3:if(a.state.server){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,Object(w.g)(t,w.a+"/google_maps_key");case 8:if(n=e.sent){e.next=11;break}return e.abrupt("return");case 11:(r=document.createElement("script")).type="text/javascript",r.src="https://maps.googleapis.com/maps/api/js?key="+n.google_maps_key+"&libraries=places",document.head.appendChild(r),a.setState({google_maps_key:n.google_maps_key}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.warn(e.t0);case 21:case"end":return e.stop()}},e,null,[[5,18]])})),a.handleClickLogout=function(){a.setState({menuLogout:!0})},a.handleCloseLogout=function(){a.setState({menuLogout:!1})},a.onChange=function(e){a.setState({connectForm:e})},a.getUserProp=function(e){var t;if(!a.state.token)return null;try{t=O.a.decode(a.state.token)[e]}catch(n){Object(w.y)(n,"Holy crap this error should never happen!! Better dust off that r\xe9sum\xe9..."),console.warn(n)}return t},a._logout=function(){localStorage.clear(),a.setState({menuLogout:!1,server:null,token:null,orgId:null})},a.doSave=function(){var e=Object(i.a)(c.a.mark(function e(t,n){var r,l,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.orgId?(l=t.target.orgId.value,a.setState({orgId:l}),o=l.substring(0,2).toLowerCase(),r="gotv-"+o+".ourvoiceusa.org"):r=t.target.server?t.target.server.value:"localhost:8080",e.next=3,a.singHello(r,n,null,l);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.singHello=function(){var e=Object(i.a)(c.a.mark(function e(t,n,r,l){var o,s,i,u,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("server",t),localStorage.setItem("orgId",l),a.setState({server:t,orgId:l}),s=!0,t.match(/^localhost/)&&(s=!1),e.prev=5,e.next=8,fetch("http"+(s?"s":"")+"://"+t+w.a+"/hello",{method:"POST",headers:{Authorization:"Bearer "+(r||(a.state.token?a.state.token:"of the one ring")),"Content-Type":"application/json"}});case 8:if(o=e.sent,i=o.headers.get("x-sm-oauth-url")){e.next=12;break}return e.abrupt("return",{error:!0,msg:"Missing required header."});case 12:e.t0=o.status,e.next=200===e.t0?15:400===e.t0?16:401===e.t0?17:403===e.t0?22:23;break;case 15:return e.abrupt("break",24);case 16:return e.abrupt("return",{error:!0,msg:"The server didn't understand the request sent from this device."});case 17:return u="","google"===n&&(u="gm"),"facebook"===n&&(u="fm"),window.location.href=i+"/"+u+"/?app=HelloVoterHQ"+(s?"":"&local=true"),e.abrupt("return",{error:!1,flag:!0});case 22:return e.abrupt("return",{error:!0,msg:"We're sorry, but your request to volunteer with this server has been rejected."});case 23:return e.abrupt("return",{error:!0,msg:"Unknown error connecting to server."});case 24:return e.next=26,o.json();case 26:if(!0===(d=e.sent).data.ready){e.next=31;break}return e.abrupt("return",{error:!1,msg:"The server said: "+d.msg});case 31:return console.warn({user:a.state.user}),e.abrupt("return",{error:!1,flag:!0});case 33:e.next=39;break;case 35:return e.prev=35,e.t1=e.catch(5),console.warn("singHello: "+e.t1),e.abrupt("return",{error:!0,msg:"Unable to make a connection to target server"});case 39:case"end":return e.stop()}},e,null,[[5,35]])}));return function(t,a,n,r){return e.apply(this,arguments)}}(),a.handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})};var n=y.a.parse(window.location.search);return a.state={global:e.global,loading:!0,open:!0,menuLogout:!1,server:localStorage.getItem("server"),token:localStorage.getItem("jwt"),orgId:localStorage.getItem("orgId"),qserver:n.server},console.log("%cWARNING: This is a developer console! If you were told to open this and copy/paste something, and you are not a javascript developer, it is a scam and entering info here could give them access to your account!","background: red; color: yellow; font-size: 45px"),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.server,l=a.token;return a.loading?r.a.createElement(b.a,null,r.a.createElement(h.a,{path:"/",render:function(e){return r.a.createElement(tt,e)}})):n&&l?r.a.createElement(b.a,null,r.a.createElement("div",{className:t.root},r.a.createElement(j.a,null),r.a.createElement(Ge.a,null),r.a.createElement(Ct,{open:this.state.open,classes:t,global:this,getUserProp:this.getUserProp,handleDrawerOpen:this.handleDrawerOpen}),r.a.createElement(ca,{classes:t,open:this.state.open,getUserProp:this.getUserProp,handleClickLogout:this.handleClickLogout,handleDrawerClose:this.handleDrawerClose}),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(v.NotificationContainer,null),r.a.createElement(ua,{global:this}),r.a.createElement(ht,{menuLogout:this.state.menuLogout,handleCloseLogout:this.handleCloseLogout,_logout:this._logout})))):r.a.createElement(b.a,null,r.a.createElement(h.a,{path:"/",render:function(t){return r.a.createElement(pt,Object.assign({},t,{global:e}))}}))}}]),t}(n.Component)),pa=Object(K.a)($e)(da);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(pa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[508,1,2]]]);
//# sourceMappingURL=main.ca88d273.chunk.js.map