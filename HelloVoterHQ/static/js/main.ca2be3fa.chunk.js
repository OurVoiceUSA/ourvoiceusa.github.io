(this.webpackJsonpHelloVoterHQ=this.webpackJsonpHelloVoterHQ||[]).push([[0],{162:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var r=a(31),n=a(4),s=a.n(n),l=a(8),o=a(0),i=a.n(o),c=a(96),u=a(297),d=a(480),p=a(479),m=a(215),h=a(483),b=a(3),f=a(64),g=a(63),v=a(453),E=a(26),O=a(216),y=a(95),k=a.n(y);O.a.locale(k.a);function x(e){let t=e.split(", ");return t.length<4?e:(t.shift(),t.join(", "))}class S extends o.Component{constructor(e){var t;super(e),t=this,this.handleFormsChange=function(){var e=Object(l.a)(s.a.mark((function e(a){var r,n,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,n=Object(b.h)(t.state.selectedFormsOption,a),l=[],n.add.forEach(e=>{l.push(Object(b.g)(r,"/form/assigned/volunteer/add","POST",{formId:e,vId:t.props.id}))}),n.rm.forEach(e=>{l.push(Object(b.g)(r,"/form/assigned/volunteer/remove","POST",{formId:e,vId:t.props.id}))}),e.next=10,Promise.all(l);case 10:return e.next=12,Object(b.v)(r,t.props.id);case 12:o=e.sent,Object(b.B)("Form selection saved."),t.setState({selectedFormsOption:a,volunteer:o}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),Object(b.A)(e.t0,"Unable to add/remove form.");case 20:t.props.refer.setState({saving:!1});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),this.handleTurfChange=function(){var e=Object(l.a)(s.a.mark((function e(a){var r,n,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,n=Object(b.h)(t.state.selectedTurfOption,a),l=[],n.add.forEach(e=>{l.push(Object(b.g)(r,"/turf/assigned/volunteer/add","POST",{turfId:e,vId:t.props.id}))}),n.rm.forEach(e=>{l.push(Object(b.g)(r,"/turf/assigned/volunteer/remove","POST",{turfId:e,vId:t.props.id}))}),e.next=10,Promise.all(l);case 10:return e.next=12,Object(b.v)(r,t.props.id);case 12:o=e.sent,Object(b.B)("Turf selection saved."),t.setState({selectedTurfOption:a,volunteer:o}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),Object(b.A)(e.t0,"Unable to add/remove turf.");case 20:t.props.refer.setState({saving:!1});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),this._loadData=Object(l.a)(s.a.mark((function e(){var a,n,l,o,c,u,d,p,m,h,v,O;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,n={},l=[],o=[],c=[],u=[],t.setState({loading:!0}),e.prev=3,e.next=6,Promise.all([Object(b.v)(a,t.props.id),Object(b.n)(a),Object(b.u)(a)]);case 6:d=e.sent,p=Object(r.a)(d,3),n=p[0],l=p[1],o=p[2],e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),Object(b.A)(e.t0,"Unable to load canavasser info."),e.abrupt("return",t.setState({loading:!1}));case 17:if(!n.location){e.next=24;break}return e.next=20,Object(b.p)(a,n.location.x,n.location.y,0);case 20:return c=e.sent,e.next=23,Object(b.p)(a,n.location.x,n.location.y,50);case 23:u=e.sent;case 24:m=[],h=[],v=[{value:"",label:"None"}],O=[{value:"",label:"None"}],l.forEach(e=>{v.push({value:Object(b.x)(e),id:e.id,label:i.a.createElement(g.a,{global:a,key:e.id,form:e,refer:t})})}),n.ass.forms.forEach(e=>{m.push({value:Object(b.x)(e),id:e.id,label:i.a.createElement(g.a,{global:a,key:e.id,form:e,refer:t})})}),o.forEach(e=>{O.push({value:Object(b.x)(e),id:e.id,label:i.a.createElement(f.a,{global:a,key:e.id,turf:e,refer:t})})}),n.ass.turfs.forEach(e=>{h.push({value:Object(b.x)(e),id:e.id,label:i.a.createElement(f.a,{global:a,key:e.id,turf:e,refer:t,icon:n.autoturf?E.i:null})})}),t.setState({loading:!1,volunteer:n,formOptions:v,turfOptions:O,selectedFormsOption:m,selectedTurfOption:h,hometurf:c,nearbyturf:u});case 33:case"end":return e.stop()}}),e,null,[[3,13]])}))),this._lockVolunteer=function(){var e=Object(l.a)(s.a.mark((function e(a,r){var n,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.global,l=r?"lock":"unlock",t.props.refer.setState({saving:!0}),e.prev=3,e.next=6,Object(b.g)(n,"/volunteer/"+l,"POST",{id:a.id});case 6:Object(b.B)("Volunteer hass been "+l+"ed."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(b.A)(e.t0,"Unable to "+l+" volunteer.");case 12:t.props.refer.setState({saving:!1}),t._loadData();case 14:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,a){return e.apply(this,arguments)}}(),this.state={global:e.global,refer:this.props.refer.props.refer,volunteer:this.props.volunteer,selectedFormsOption:[],selectedTurfOption:[]}}componentDidMount(){this.state.volunteer||this._loadData(),c.a.rebuild()}componentDidUpdate(){c.a.rebuild()}render(){const e=this.state,t=e.global,a=e.volunteer;return!a||this.state.loading?i.a.createElement(m.a,null):this.props.edit?i.a.createElement("div",null,i.a.createElement(u.a,{alignItems:"flex-start",style:{width:350}},i.a.createElement(p.a,null,i.a.createElement(h.a,{alt:a.name,src:a.avatar})),i.a.createElement(d.a,{primary:a.name,secondary:a.locationstr?x(a.locationstr):"N/A"}),i.a.createElement(w,{volunteer:a})),i.a.createElement(v.a,{global:t,volunteer:a,refer:this})):i.a.createElement(u.a,{button:!0,style:{width:350},alignItems:"flex-start",onClick:()=>{this.props.refer.setState({thisVolunteer:a}),window.location.href="/HelloVoterHQ/#/volunteers/view/"+a.id}},i.a.createElement(p.a,null,i.a.createElement(h.a,{alt:a.name,src:a.avatar})),i.a.createElement(d.a,{primary:a.name,secondary:a.locationstr?x(a.locationstr):"N/A"}),i.a.createElement(w,{volunteer:a}))}}const w=e=>{let t=[],a=e.volunteer.id;return e.volunteer.admin&&t.push(i.a.createElement(b.b,{icon:E.e,color:"gold",key:a+"admin","data-tip":"Administrator"})),e.volunteer.locked?t.push(i.a.createElement(b.b,{icon:E.a,color:"red",key:a+"locked","data-tip":"Denied access"})):(e.volunteer.ass.ready?t.push(i.a.createElement(b.b,{icon:E.c,color:"green",key:a+"ready","data-tip":"Ready to Canvass"})):t.push(i.a.createElement(b.b,{icon:E.g,color:"red",key:a+"notready","data-tip":"Not ready to volunteer, check assignments"})),e.volunteer.locationstr||t.push(i.a.createElement(b.b,{icon:E.i,color:"red",key:a+"addr","data-tip":"Home Address is not set"}))),t}},201:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return b}));var r=a(31),n=a(4),s=a.n(n),l=a(8),o=a(0),i=a.n(o),c=a(20),u=a(215),d=a(26),p=a(94),m=a(202),h=a(3);class b extends o.Component{constructor(e){var t;super(e),t=this,this.handleMembersChange=function(){var e=Object(l.a)(s.a.mark((function e(a){var r,n,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,n=Object(h.h)(t.state.selectedMembersOption,a),l=[],n.add.forEach(e=>{l.push(Object(h.g)(r,"/turf/assigned/volunteer/add","POST",{vId:e,turfId:t.props.id}))}),n.rm.forEach(e=>{l.push(Object(h.g)(r,"/turf/assigned/volunteer/remove","POST",{vId:e,turfId:t.props.id}))}),e.next=10,Promise.all(l);case 10:Object(h.B)("Volunteer assignments saved."),t.setState({selectedMembersOption:a}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),Object(h.A)(e.t0,"Unable to add/remove volunteers.");case 17:t.props.refer.setState({saving:!1});case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),this._loadData=Object(l.a)(s.a.mark((function e(){var a,n,l,o,c,u,d,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,n={},l=[],o=[],t.setState({loading:!0}),e.prev=3,e.next=6,Promise.all([Object(h.t)(a,t.props.id,!0),Object(h.w)(a),Object(h.w)(a,"turf",t.props.id)]);case 6:c=e.sent,u=Object(r.a)(c,3),n=u[0],l=u[1],o=u[2],e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),Object(h.A)(e.t0,"Unable to load turf info."),e.abrupt("return",t.setState({loading:!1}));case 17:d=[],m=[],l.forEach(e=>{d.push({value:Object(h.x)(e),id:e.id,label:i.a.createElement(p.a,{global:a,key:e.id,volunteer:e,refer:t})})}),o.forEach(e=>{m.push({value:Object(h.x)(e),id:e.id,label:i.a.createElement(p.a,{global:a,key:e.id,volunteer:e,refer:t})})}),t.setState({turf:n,volunteers:l,membersOption:d,selectedMembersOption:m,loading:!1});case 22:case"end":return e.stop()}}),e,null,[[3,13]])}))),this.state={global:e.global,turf:this.props.turf,selectedMembersOption:[]}}componentDidMount(){this.state.turf||this._loadData()}render(){const t=this.state.turf;return!t||this.state.loading?i.a.createElement(u.a,null):i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",padding:"10px"}},i.a.createElement("div",{style:{padding:"5px 10px"}},i.a.createElement(h.b,{icon:d.n,style:{width:20,height:20,color:"gray"}})," ",t.name," ",this.props.edit?"":i.a.createElement(c.b,{to:"/turf/view/"+t.id},"view"))),this.props.edit?i.a.createElement(m.a,{global:e,turf:t,refer:this}):"")}}}).call(this,a(29))},202:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a(0),n=a.n(r),s=a(18),l=a(85);const o=e=>n.a.createElement("div",null,n.a.createElement("div",null,"Volunteers assigned to this turf:",n.a.createElement(s.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.membersOption,isMulti:!0,isSearchable:!0,placeholder:"None"}),n.a.createElement("br",null),n.a.createElement("h3",null,"Turf Stats"),n.a.createElement("pre",null,JSON.stringify(e.refer.state.turf.stats)),n.a.createElement(l.b,{spec:[{header:"Query Name",tooltip:"Constraints which define this attribute query.",params:["Name"]},{header:"Total Addresses",tooltip:"Total number of houses/buildings in this area.",params:["Total Addresses"]},{header:"Total People",tooltip:"Total number of people in this area.",params:["Total People"]},{header:"Total People Visited",tooltip:"Total number of people in this area who have been visited.",params:["Total People Visited"]},{header:"People Visited in past month",tooltip:"Total number of peple in this area who have been visited.",params:["People Visited in past month"]}],rows:Object.keys(e.refer.state.turf.stats["Stats by Attribute"]).map(t=>(e.refer.state.turf.stats["Stats by Attribute"][t].Name=t,e.refer.state.turf.stats["Stats by Attribute"][t]))})))},3:function(e,t,a){"use strict";a.d(t,"z",(function(){return k})),a.d(t,"y",(function(){return x})),a.d(t,"C",(function(){return S})),a.d(t,"B",(function(){return w})),a.d(t,"A",(function(){return C})),a.d(t,"g",(function(){return j})),a.d(t,"f",(function(){return P})),a.d(t,"b",(function(){return N})),a.d(t,"e",(function(){return A})),a.d(t,"a",(function(){return D})),a.d(t,"x",(function(){return _})),a.d(t,"o",(function(){return I})),a.d(t,"i",(function(){return U})),a.d(t,"r",(function(){return M})),a.d(t,"s",(function(){return V})),a.d(t,"v",(function(){return H})),a.d(t,"w",(function(){return Q})),a.d(t,"t",(function(){return W})),a.d(t,"u",(function(){return G})),a.d(t,"p",(function(){return Y})),a.d(t,"m",(function(){return X})),a.d(t,"n",(function(){return $})),a.d(t,"k",(function(){return te})),a.d(t,"l",(function(){return re})),a.d(t,"j",(function(){return se})),a.d(t,"q",(function(){return oe})),a.d(t,"h",(function(){return ce})),a.d(t,"d",(function(){return ue})),a.d(t,"c",(function(){return pe}));var r=a(4),n=a.n(r),s=a(8),l=a(0),o=a.n(l),i=a(434),c=a(26),u=a(97),d=a.n(u),p=a(164),m=a(435),h=a.n(m),b=a(436),f=a.n(b),g=a(437),v=a.n(g),E=a(215),O=a(171),y=a(298);function k(e,t){return t?f()(t-e):""}function x(e){return e?h()(e,{fractionDigits:0}):""}function S(e){return new Date(e).toString()}function w(e){p.NotificationManager.success(e,"Success",3e3)}function C(e,t){p.NotificationManager.error(t,"Error",6e3),console.warn(e)}function j(e,t,a,r){return T.apply(this,arguments)}function T(){return(T=Object(s.a)(n.a.mark((function e(t,a,r,s){var l,o,i,c,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.state){e.next=2;break}return e.abrupt("return");case 2:return l=t.state,o=l.server,i=l.token,c=!0,o.match(/:8080$/)&&(c=!1),r||(r="GET"),e.next=8,fetch("http"+(c?"s":"")+"://"+o+"/HelloVoterHQ"+(t.state.orgId?"/"+t.state.orgId:"")+"/api/v1"+a,{method:r,headers:{Authorization:"Bearer "+i,"Content-Type":"application/json"},body:s?JSON.stringify(s):null});case 8:if(!((u=e.sent).status>=400)){e.next=15;break}return e.t0=Error,e.next=13,u.text();case 13:throw e.t1=e.sent,new e.t0(e.t1);case 15:return e.abrupt("return",u.json());case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return e.isGeolocationAvailable&&e.isGeolocationEnabled?e.coords?{access:!0,lng:e.coords.longitude,lat:e.coords.latitude}:{access:!0}:{access:!1}}const N=e=>o.a.createElement(i.a,Object.assign({style:{width:25},"data-tip":e["data-tip"]?e["data-tip"]:e.icon.iconName},e)),A=e=>e.flag?o.a.createElement(E.a,null):o.a.createElement("div",null,o.a.createElement(N,{icon:c.o,color:"green",onClick:e.func,"data-tip":"Reload Data"}),o.a.createElement("div",null,e.children)),D=e=>e.flag?o.a.createElement(y.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:!0},o.a.createElement("div",{style:{position:"absolute",top:100,left:"40%",right:"40%",backgroundColor:"white",padding:40}},o.a.createElement("center",null,"Saving changes...",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(E.a,{disableShrink:!0})))):o.a.createElement("div",null);function _(e){let t=JSON.parse(JSON.stringify(e));return delete t.last_seen,delete t.created,delete t.id,JSON.stringify(t).toLowerCase()}function I(e){return F.apply(this,arguments)}function F(){return(F=Object(s.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,j(t,"/import/list");case 4:r=e.sent,a=r&&r.data?r.data:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(e.t0,"Unable to load import info.");case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function U(e,t,a){return"http"+(t.match(/:8080$/)?"":"s")+"://"+t+"/HelloVoterHQ/"+(a?a+"/":"")+"mobile/invite?inviteCode="+e+"&"+(a?"orgId="+a:"server="+t)}function M(e,t){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,j(t,"/qrcode/get?id="+a);case 4:return r=e.sent,e.next=7,v.a.toDataURL(U(a,t.state.server,t.state.orgId));case 7:r.img=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),C(e.t0,"Unable to load QRCode info.");case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function V(e,t){return q.apply(this,arguments)}function q(){return(q=Object(s.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,j(t,"/qrcode/list");case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),C(e.t0,"Unable to load QRCode data.");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function H(e,t){return R.apply(this,arguments)}function R(){return(R=Object(s.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,j(t,"/volunteer/get?id="+a);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),C(e.t0,"Unable to load volunteer info.");case 10:return r.ass||(r.ass={forms:[],turfs:[]}),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function Q(e,t,a){return B.apply(this,arguments)}function B(){return(B=Object(s.a)(n.a.mark((function e(t,a,r){var s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.prev=1,l="volunteer/list","turf"===a?l="turf/assigned/volunteer/list?turfId="+r:"form"===a&&(l="form/assigned/volunteer/list?formId="+r),e.next=6,j(t,"/"+l);case 6:s=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),C(e.t0,"Unable to load volunteer data.");case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function W(e,t){return z.apply(this,arguments)}function z(){return(z=Object(s.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,j(t,"/turf/get?turfId="+a);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),C(e.t0,"Unable to load turf data.");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function G(e,t){return J.apply(this,arguments)}function J(){return(J=Object(s.a)(n.a.mark((function e(t,a){var r,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,s="turf/list"+(a?"?geometry=true":""),e.next=5,j(t,"/"+s);case 5:l=e.sent,r=l.data?l.data:[],e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),C(e.t0,"Unable to load turf data.");case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function Y(e,t,a,r){return K.apply(this,arguments)}function K(){return(K=Object(s.a)(n.a.mark((function e(t,a,r,s){var l,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],e.prev=1,e.next=4,j(t,"/turf/list/byposition?longitude="+a+"&latitude="+r+(s?"&dist="+s:""));case 4:o=e.sent,l=o.data?o.data:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(e.t0,"Unable to load turf data.");case 11:return e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function X(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(s.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,j(t,"/form/get?formId="+a);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),C(e.t0,"Unable to load form data.");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,"form/list",e.next=5,j(t,"/form/list");case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(e.t0,"Unable to load form data.");case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function te(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(s.a)(n.a.mark((function e(t,a){var r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,j(t,"/attribute/get?id="+a);case 4:(s=e.sent).data&&(r=s.data[0]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(e.t0,"Unable to load attribute data.");case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(s.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,j(t,"/attribute/list");case 4:r=e.sent,a=r.data?r.data:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(e.t0,"Unable to load attribute data.");case 11:return a.forEach(e=>{e.label||(e.label=e.name)}),e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function se(e,t,a,r){return le.apply(this,arguments)}function le(){return(le=Object(s.a)(n.a.mark((function e(t,a,r,s){var l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=[],e.prev=1,e.next=4,j(t,"/address/get/byposition?limit=1000&longitude="+a+"&latitude="+r+(s?"&formId="+s:""));case 4:l=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),C(e.t0,"Unable to load address information.");case 10:return e.abrupt("return",l);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function oe(e,t,a){return ie.apply(this,arguments)}function ie(){return(ie=Object(s.a)(n.a.mark((function e(t,a,r){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.prev=1,e.next=4,j(t,"/people/get/byaddress?aId="+a+(r?"&formId="+r:""));case 4:s=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),C(e.t0,"Unable to load address information.");case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ce(e,t){let a=[],r=[];e||(e=[]),t||(t=[]);let n=e.map(e=>e.id),s=t.map(e=>e.id);return s.forEach(e=>{-1===n.indexOf(e)&&a.push(e)}),n.forEach(e=>{-1===s.indexOf(e)&&r.push(e)}),{add:a,rm:r}}const ue=e=>o.a.createElement(d.a,e,de),de=({getInputProps:e,getSuggestionItemProps:t,suggestions:a,loading:r})=>o.a.createElement("div",{className:"autocomplete-root"},o.a.createElement("input",e()),o.a.createElement("div",{className:"autocomplete-dropdown-container"},r&&o.a.createElement("div",null,"Loading..."),a.map(e=>o.a.createElement("div",t(e),o.a.createElement("span",null,e.description))))),pe=e=>o.a.createElement("div",null,o.a.createElement(O.a,{onClick:()=>e.refer.setState({ModalInvite:!0}),color:"primary"},"Invite Someone"),o.a.createElement(y.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:!!e.refer.state.ModalInvite,onClose:()=>e.refer.setState({ModalInvite:!1})},o.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},'To invite someone, have them use the HelloVoter mobile app to scan a QR Code (created in the "QR Codes" menu) and they will recieve the same assignments that QR Code has.')))},426:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return O}));var r=a(4),n=a.n(r),s=a(8),l=a(0),o=a.n(l),i=a(20),c=a(52),u=a(72),d=a.n(u),p=a(18),m=a(951),h=a(171),b=a(3),f=a(162),g=a(216),v=a(95),E=a.n(v);g.a.locale(E.a);class O extends l.Component{constructor(e){var t;super(e),t=this,this._loadData=Object(s.a)(n.a.mark((function e(){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r=[],t.setState({loading:!0,search:""}),e.prev=3,e.next=6,Object(b.w)(a);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(b.A)(e.t0,"Unable to load volunteers.");case 12:t.setState({loading:!1,volunteers:r});case 13:case"end":return e.stop()}}),e,null,[[3,9]])}))),this.handlePageClick=e=>{this.setState({pageNum:e.selected+1})};let a=localStorage.getItem("volunteersperpage");a||(a=5),this.state={global:e.global,loading:!0,thisVolunteer:{},volunteers:[],search:"",perPage:a,pageNum:1},this.onTypeSearch=this.onTypeSearch.bind(this),this.handlePageNumChange=this.handlePageNumChange.bind(this)}componentDidMount(){this._loadData()}handlePageNumChange(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}onTypeSearch(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}render(){var e=this;const t=this.state.global;let a=[],r=[],l=[],u=[];return this.state.volunteers.forEach(e=>{this.state.search&&!Object(b.x)(e).includes(this.state.search)||(e.locked?l.push(e):e.invited?u.push(e):e.ass.ready?a.push(e):r.push(e))}),o.a.createElement(b.e,{flag:this.state.loading,func:()=>this._loadData()},o.a.createElement(i.a,null,o.a.createElement("div",null,o.a.createElement(b.c,{refer:this}),"Search:"," ",o.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),o.a.createElement("br",null),o.a.createElement(i.b,{to:"/volunteers/",onClick:()=>this.setState({pageNum:1})},"Volunteers (",a.length,")"),"\xa0-\xa0",o.a.createElement(i.b,{to:"/volunteers/unassigned",onClick:()=>this.setState({pageNum:1})},"Unassigned (",r.length,")"),"\xa0-\xa0",o.a.createElement(i.b,{to:"/volunteers/denied",onClick:()=>this.setState({pageNum:1})},"Denied (",l.length,")"),o.a.createElement(c.a,{exact:!0,path:"/volunteers/",render:()=>o.a.createElement(y,{global:t,refer:this,volunteers:a})}),o.a.createElement(c.a,{exact:!0,path:"/volunteers/unassigned",render:()=>o.a.createElement(y,{global:t,refer:this,type:"Unassigned",volunteers:r})}),o.a.createElement(c.a,{exact:!0,path:"/volunteers/invited",render:()=>o.a.createElement("div",null,o.a.createElement(y,{global:t,refer:this,type:"Invited",volunteers:u}),o.a.createElement(h.a,{onClick:Object(s.a)(n.a.mark((function a(){var r;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(b.g)(t,"/volunteer/invite","POST");case 2:(r=a.sent).token?e.setState({thisVolunteer:{id:"invite:"+r.token}}):Object(b.A)({},"Invite failed.");case 4:case"end":return a.stop()}}),a)}))),color:"primary"},"Invite Someone"))}),o.a.createElement(c.a,{exact:!0,path:"/volunteers/denied",render:()=>o.a.createElement(y,{global:t,refer:this,type:"Denied",volunteers:l})}),o.a.createElement(c.a,{path:"/volunteers/view/:id",render:e=>o.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},o.a.createElement(f.a,{global:t,key:e.match.params.id,id:e.match.params.id,edit:!0,refer:this}))}),o.a.createElement(b.a,{flag:this.state.saving}))))}}const y=t=>{const a=t.refer.state.perPage;let r=o.a.createElement("div",null),n=[];return t.volunteers.forEach((r,s)=>{Math.floor(s/a)+1===t.refer.state.pageNum&&n.push(o.a.createElement(f.a,{global:e,key:r.id,volunteer:r,refer:t.refer}))}),r=o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(d.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:t.volunteers.length/a,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:t.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",o.a.createElement("div",{style:{width:75}},"# Per Page"," ",o.a.createElement(p.a,{value:{value:a,label:a},onChange:t.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),o.a.createElement("div",null,o.a.createElement("h3",null,t.type," Volunteers (",t.volunteers.length,")"),r,o.a.createElement(m.a,{component:"nav"},n),r)}}).call(this,a(29))},427:function(e,t,a){},430:function(e,t,a){"use strict";(function(e){var t=a(4),r=a.n(t),n=a(31),s=a(8),l=a(0),o=a.n(l),i=a(113),c=a(18),u=a(40),d=a(462),p=a(3),m=a(63);class h extends l.Component{constructor(t){var a;super(t),a=this,this._loadData=Object(s.a)(r.a.mark((function e(){var t,s,l,i,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.global,s=[],l=[],i=[{label:"None"}],e.next=4,Promise.all([Object(p.u)(t,!0),Object(p.n)(t)]);case 4:c=e.sent,u=Object(n.a)(c,2),s=u[0],(l=u[1]).forEach(e=>{i.push({value:Object(p.x)(e),id:e.id,label:o.a.createElement(m.a,{global:t,key:e.id,form:e,refer:a})})}),a.setState({turfs:s,forms:l,formOptions:i});case 10:case"end":return e.stop()}}),e)}))),this.handleFormsChange=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.setState({selectedFormsOption:t,formId:t.id},()=>a.loadMarkerData());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.onMarkerClick=function(){var t=Object(s.a)(r.a.mark((function t(n,s,l){var o,i,c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.state.formId,a.setState({showingInfoWindow:!0}),t.next=4,Object(p.q)(e,n.address.id,o);case 4:i=t.sent,(c=i[0]).title=n.title,a.setState({selectedPlace:c,activeMarker:s});case 8:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}(),this.onTurfClick=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a.setState({infoLocation:t.paths[0],activeTurf:t.name});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.loadMarkerData=function(){var e=Object(s.a)(r.a.mark((function e(t,n){var s,l,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.state.global,n?(l=n.center.lng(),o=n.center.lat(),a.setState({longitude:l,latitude:o})):(l=a.state.longitude,o=a.state.latitude),e.next=4,Object(p.j)(s,l,o,a.state.formId);case 4:i=e.sent,a.setState({addresses:i});case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.onMapClicked=e=>{this.state.showingInfoWindow&&this.setState({showingInfoWindow:!1,activeMarker:null})},this.state={global:t.global,turfs:[],addresses:[],showingInfoWindow:!1,selectedPlace:{},selectedFormsOption:{},formId:null}}componentDidMount(){this._loadData()}statusColor(e){if(!e.visits||0===e.visits.length)return"purple";switch(e.visits[0].status){case 0:return"yellow";case 1:return"green";case 2:return"red";default:return"purple"}}render(){let e=[];const t=this.state,a=t.addresses,r=t.selectedPlace;let n=Object(p.f)(this.props);return n.lng&&n.lat?(this.state.turfs.forEach(t=>{t.geometry&&Object(u.geojson2polygons)(JSON.parse(t.geometry)).forEach(a=>e.push({name:t.name,polygon:a}))}),o.a.createElement(p.e,{flag:this.state.loading,func:()=>this.loadMarkerData()},o.a.createElement("div",{style:{display:"flex"}},"Show interaction status by Form:",o.a.createElement(c.a,{value:this.state.selectedFormsOption,onChange:this.handleFormsChange,options:this.state.formOptions,isSearchable:!0,placeholder:"None"})),o.a.createElement(i.Map,{google:this.props.google,zoom:17,initialCenter:n,onReady:this.loadMarkerData,onDragend:this.loadMarkerData,onClick:this.onMapClicked},a.map((e,t)=>o.a.createElement(i.Marker,{key:t,onClick:this.onMarkerClick,title:e.address.street+", "+e.address.city+", "+e.address.state+", "+e.address.zip,icon:{url:"http://maps.google.com/mapfiles/ms/icons/"+this.statusColor(e)+"-dot.png"},address:e.address,position:{lng:e.address.longitude,lat:e.address.latitude}})),e.map((e,t)=>o.a.createElement(i.Polygon,{key:t,paths:e.polygon,name:e.name,onClick:this.onTurfClick,strokeColor:"#0000FF",strokeWeight:5,fillColor:"#000000",fillOpacity:0})),o.a.createElement(i.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},o.a.createElement(b,{place:r})),o.a.createElement(i.InfoWindow,{position:this.state.infoLocation,visible:!!this.state.activeTurf},o.a.createElement("h1",null,"Turf: ",this.state.activeTurf))))):o.a.createElement("div",null,"Loading map...")}}const b=e=>{let t=e.place.people,a=e.place.units;return t||(t=[]),a||(a=[]),o.a.createElement("div",null,o.a.createElement("h1",null,e.place.title),a.length?"This is a multi unit address with "+a.length+" units.":"",t.map(e=>o.a.createElement(f,{person:e})))},f=e=>{let t=e.person.attrs;t||(t=[]);let a="",r="";return t.forEach(e=>{"Name"===e.name&&(a=e.value),"Party Affiliation"===e.name&&(r=e.value)}),o.a.createElement("div",null,o.a.createElement("b",null,"Name: ",a),o.a.createElement("br",null),o.a.createElement("b",null,"Party: ",r))};Object(i.GoogleApiWrapper)(e=>({apiKey:e.apiKey}))(Object(d.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})(h))}).call(this,a(29))},453:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return b}));var r=a(4),n=a.n(r),s=a(8),l=a(0),o=a.n(l),i=a(97),c=a(18),u=a(171),d=a(3),p=(a(64),a(63),a(216)),m=a(95),h=a.n(m);p.a.locale(h.a);const b=t=>o.a.createElement("div",null,o.a.createElement("br",null),t.volunteer.locked?o.a.createElement(u.a,{onClick:()=>t.refer._lockVolunteer(t.volunteer,!1)},"Restore Access"):o.a.createElement(u.a,{onClick:()=>t.refer._lockVolunteer(t.volunteer,!0)},"Deny Access"),o.a.createElement("br",null),"Last Seen:"," ",new p.a("en-US").format(new Date(t.volunteer.last_seen-3e4)),o.a.createElement("br",null),"Email: ",t.volunteer.email?t.volunteer.email:"N/A",o.a.createElement("br",null),"Phone: ",t.volunteer.phone?t.volunteer.phone:"N/A",o.a.createElement("br",null),"Address:"," ",o.a.createElement(f,{global:e,refer:t.refer,volunteer:t.volunteer}),o.a.createElement("br",null),t.refer.state.hometurf.length?o.a.createElement("div",null,"Turf this volunteer's home address is in:",t.refer.state.hometurf.map(e=>o.a.createElement("div",null,e.name))):o.a.createElement("div",null,"This volunteer's home address isn't in any turf."),o.a.createElement("br",null),t.refer.state.nearbyturf.length?o.a.createElement("div",null,"Turf this volunteer's home address is near by:",t.refer.state.nearbyturf.slice(0,5).map(e=>o.a.createElement("div",null,e.name))):o.a.createElement("div",null,"No turfs are within ",50,"km of this volunteer."),o.a.createElement("br",null),"# of doors knocked: N/A",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",null,"Forms this volunteer is assigned to:",o.a.createElement(c.a,{value:t.refer.state.selectedFormsOption,onChange:t.refer.handleFormsChange,options:t.refer.state.formOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),o.a.createElement("br",null),"Turf this volunteer is assigned to:",o.a.createElement(c.a,{value:t.refer.state.selectedTurfOption,onChange:t.refer.handleTurfChange,options:t.refer.state.turfOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})));class f extends l.Component{constructor(e){var t;super(e),t=this,this.submitAddress=function(){var e=Object(s.a)(n.a.mark((function e(a){var r,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,t.setState({address:a}),e.prev=2,e.next=5,Object(i.geocodeByAddress)(a);case 5:return s=e.sent,e.next=8,Object(i.getLatLng)(s[0]);case 8:return l=e.sent,e.next=11,Object(d.g)(r,"/volunteer/update","POST",{id:t.props.volunteer.id,address:a,lat:l.lat,lng:l.lng});case 11:t.props.refer._loadData(),Object(d.B)("Address hass been saved."),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),Object(d.A)(e.t0,"Unable to update address info.");case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),this.state={global:e.global,edit:!1,address:this.props.volunteer.locationstr?this.props.volunteer.locationstr:""},this.onTypeAddress=e=>this.setState({address:e})}render(){return this.state.edit?o.a.createElement(d.d,{debounce:500,value:this.state.address,onChange:this.onTypeAddress,onSelect:this.submitAddress}):o.a.createElement("div",null,this.state.address," ",o.a.createElement(u.a,{onClick:()=>this.setState({edit:!0})},"click to edit"))}}}).call(this,a(29))},526:function(e,t,a){e.exports=a(946)},531:function(e,t,a){},559:function(e,t){},561:function(e,t){},595:function(e,t){},596:function(e,t){},63:function(e,t,a){"use strict";a.d(t,"d",(function(){return O})),a.d(t,"c",(function(){return w})),a.d(t,"a",(function(){return A})),a.d(t,"b",(function(){return D}));var r=a(4),n=a.n(r),s=a(8),l=a(0),o=a.n(l),i=a(20),c=a(52),u=a(72),d=a.n(u),p=a(18),m=a(67),h=a.n(m),b=a(171),f=a(984),g=a(985),v=a(986),E=a(3);class O extends l.Component{constructor(e){var t;super(e),t=this,this.handleClickDelete=()=>{this.setState({menuDelete:!0})},this.handleCloseDelete=()=>{this.setState({menuDelete:!1})},this.handlePageClick=e=>{this.setState({pageNum:e.selected+1})},this._loadData=Object(s.a)(n.a.mark((function e(){var a,r,s,l,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,t.setState({loading:!0}),r=[],s=[],l=[],o={},e.prev=5,e.next=8,Object(E.n)(a);case 8:return r=e.sent,e.next=11,Object(E.l)(a);case 11:(s=e.sent).forEach(e=>{o[e.id]={label:e.name,type:e.type,optional:!0,options:e.values}}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),Object(E.A)(e.t0,"Unable to load forms.");case 18:t.setState({forms:r,attributes:s,attributes_selected:l,fields:o,loading:!1});case 19:case"end":return e.stop()}}),e,null,[[5,15]])}))),this._deleteForm=function(){var e=Object(s.a)(n.a.mark((function e(a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,t.setState({saving:!0,menuDelete:!1}),e.prev=2,e.next=5,Object(E.g)(r,"/form/delete","POST",{formId:a});case 5:Object(E.B)("Form has been deleted."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(E.A)(e.t0,"Unable to delete form.");case 11:t.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/forms/",t._loadData();case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),this._createForm=Object(s.a)(n.a.mark((function e(){var a,r,s,l,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state,r=a.global,s=a.attributes_selected,null!==(l=t.addFormForm.getValue())){e.next=4;break}return e.abrupt("return");case 4:if((o=l.name.trim()).match(/^[a-zA-Z0-9\-_ ]+$/)){e.next=8;break}return Object(E.A)({},"From name can only contain alphanumeric characters, and spaces and dashes."),e.abrupt("return");case 8:if(!(o.length>255)){e.next=11;break}return Object(E.A)({},"Form name cannot be longer than 255 characters."),e.abrupt("return");case 11:return t.setState({saving:!0}),e.prev=12,i={name:o,attributes:s.map(e=>e.id)},e.next=16,Object(E.g)(r,"/form/create","POST",i);case 16:Object(E.B)("Form has been created."),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),Object(E.A)(e.t0,"Unable to create form.");case 22:t.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/forms/",t._loadData();case 25:case"end":return e.stop()}}),e,null,[[12,19]])}))),this.atupdate=e=>{const t=e.attributes_selected;this.setState({attributes_selected:t})};let a=localStorage.getItem("formsperpage");a||(a=5);let r={},l=Object.keys(r);this.state={global:e.global,loading:!0,forms:[],attributes:[],attributes_selected:[],fields:r,order:l,search:"",perPage:a,pageNum:1,menuDelete:!1},this.formServerItems=h.a.struct({name:h.a.String}),this.formServerOptions={fields:{name:{label:"Form Name",error:"You must enter a form name."}}},this.onTypeSearch=this.onTypeSearch.bind(this),this.handlePageNumChange=this.handlePageNumChange.bind(this)}handlePageNumChange(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}onTypeSearch(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}onChangeForm(e){this.setState({addFormForm:e})}componentDidMount(){this._loadData()}render(){const e=this.state.global;let t=[];return this.state.forms.forEach(e=>{this.state.search&&!Object(E.x)(e).includes(this.state.search)||t.push(e)}),o.a.createElement(i.a,null,o.a.createElement("div",null,o.a.createElement(c.a,{exact:!0,path:"/forms/",render:()=>o.a.createElement(E.e,{flag:this.state.loading,func:()=>this._loadData()},"Search:"," ",o.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),o.a.createElement("br",null),o.a.createElement(y,{global:e,forms:t,refer:this}))}),o.a.createElement(c.a,{path:"/forms/add",render:e=>o.a.createElement("div",null,o.a.createElement(h.a.form.Form,{ref:e=>this.addFormForm=e,type:this.formServerItems,options:this.formServerOptions,onChange:e=>this.onChangeForm(e),value:this.state.addFormForm}),o.a.createElement(w,{onChange:this.atupdate,attributes:this.state.attributes,selected:this.state.attributes_selected}),o.a.createElement("button",{style:{margin:25},onClick:()=>this._createForm()},"Create Form"))}),o.a.createElement(c.a,{path:"/forms/view/:id",render:t=>o.a.createElement("div",null,o.a.createElement(A,{global:e,key:t.match.params.id,id:t.match.params.id,edit:!0,refer:this}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(b.a,{onClick:this.handleClickDelete,color:"primary"},"Delete Form"),o.a.createElement(f.a,{open:this.state.menuDelete,onClose:this.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(g.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this form?"),o.a.createElement(v.a,null,o.a.createElement(b.a,{onClick:this.handleCloseDelete,color:"primary",autoFocus:!0},"No"),o.a.createElement(b.a,{onClick:()=>this._deleteForm(t.match.params.id),color:"primary"},"Yes"))))}),o.a.createElement(E.a,{flag:this.state.saving})))}}const y=e=>{const t=e.refer.state.perPage;let a=o.a.createElement("div",null),r=[];return e.forms.forEach((a,n)=>{Math.floor(n/t)+1===e.refer.state.pageNum&&r.push(o.a.createElement(A,{global:e.global,key:a.id,form:a,refer:e.refer}))}),a=o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(d.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.forms.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",o.a.createElement("div",{style:{width:75}},"# Per Page"," ",o.a.createElement(p.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),o.a.createElement("div",null,o.a.createElement("h3",null,e.type,"Forms (",e.forms.length,")"),o.a.createElement(i.b,{to:"/forms/add"},o.a.createElement("button",null,"Add Form")),a,r,a)};var k=a(31),x=a(86),S=a(214);class w extends l.Component{constructor(e){super(e),this.getList=e=>this.state[this.id2List[e]],this.onDragEnd=e=>{const t=this.state.onChange,a=e.source,r=e.destination;if(r)if(a.droppableId===r.droppableId){const e=((e,t,a)=>{const r=Array.from(e),n=r.splice(t,1),s=Object(k.a)(n,1)[0];return r.splice(a,0,s),r})(this.getList(a.droppableId),a.index,r.index);let n={attributes:e};"droppable2"===a.droppableId&&(n={attributes_selected:e}),this.setState(n,()=>t(this.state))}else{const e=((e,t,a,r)=>{const n=Array.from(e),s=Array.from(t),l=n.splice(a.index,1),o=Object(k.a)(l,1)[0];s.splice(r.index,0,o);const i={};return i[a.droppableId]=n,i[r.droppableId]=s,i})(this.getList(a.droppableId),this.getList(r.droppableId),a,r);this.setState({attributes:e.droppable,attributes_selected:e.droppable2},()=>t(this.state))}};let t=localStorage.getItem("formsperpage");t||(t=5);Object.keys({});this.state={onChange:e.onChange,attributes:[],attributes_selected:e.selected},e.attributes.forEach(e=>{-1===this.state.attributes_selected.map(e=>e.id).indexOf(e.id)&&this.state.attributes.push(e)}),this.id2List={droppable:"attributes",droppable2:"attributes_selected"}}render(){const e=this.state,t=(e.refer,e.attributes),a=e.attributes_selected;return o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement(S.a,{onDragEnd:this.onDragEnd},o.a.createElement(C,{label:"Available Attributes",droppableId:"droppable",attributes:t}),"\xa0 Drag to assign \xa0",o.a.createElement(C,{label:"Attributes on this Form",droppableId:"droppable2",attributes:a})))}}const C=e=>o.a.createElement(S.c,{droppableId:e.droppableId},(t,a)=>{return o.a.createElement("div",{ref:t.innerRef,style:(r=a.isDraggingOver,{background:r?"lightblue":"lightgrey",padding:8,width:250})},e.label,e.attributes.map((e,t)=>o.a.createElement(S.b,{key:e.id,draggableId:e.id,index:t},(t,a)=>{return o.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:(r=a.isDragging,n=t.draggableProps.style,Object(x.a)({userSelect:"none",padding:16,margin:"0 0 ".concat(8,"px 0"),background:r?"lightgreen":"grey"},n))}),e.label+(e.required?" *":"")," :"," ",function(e){switch(e){case"String":return"Text Input";case"TEXTBOX":return"Text Box";case"Number":return"Number";case"Boolean":return"On/Off Switch";case"SAND":return"Agree/Disagree";case"List":return"Select from List";default:return e}}(e.type)," ");var r,n})),t.placeholder);var r});var j=a(215),T=a(26),P=a(132),N=a(94);class A extends l.Component{constructor(e){var t;super(e),t=this,this.handleNameChange=function(){var e=Object(s.a)(n.a.mark((function e(a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,e.prev=1,e.next=4,Object(E.g)(r,"/form/update","POST",{formId:t.props.id,name:a});case 4:Object(E.B)("Form name saved."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Object(E.A)(e.t0,"Unable to save form name.");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.handleAttributeChange=function(){var e=Object(s.a)(n.a.mark((function e({attributes_selected:a}){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,e.prev=1,e.next=4,Object(E.g)(r,"/form/update","POST",{formId:t.props.id,attributes:a.map(e=>e.id)});case 4:Object(E.B)("Attributes assignments saved."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Object(E.A)(e.t0,"Unable to add/remove attribute.");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.handleMembersChange=function(){var e=Object(s.a)(n.a.mark((function e(a){var r,s,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,s=Object(E.h)(t.state.selectedMembersOption,a),l=[],s.add.forEach(e=>{l.push(Object(E.g)(r,"/form/assigned/volunteer/add","POST",{vId:e,formId:t.props.id}))}),s.rm.forEach(e=>{l.push(Object(E.g)(r,"/form/assigned/volunteer/remove","POST",{vId:e,formId:t.props.id}))}),e.next=10,Promise.all(l);case 10:Object(E.B)("Volunteer assignments saved."),t.setState({selectedMembersOption:a}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),Object(E.A)(e.t0,"Unable to add/remove volunteers.");case 17:t.props.refer.setState({saving:!1});case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),this._loadData=Object(s.a)(n.a.mark((function e(){var a,r,s,l,i,c,u,d,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r={},s=[],l=[],i=[],t.setState({loading:!0}),e.prev=3,e.next=6,Promise.all([Object(E.m)(a,t.props.id,!0),Object(E.w)(a),Object(E.w)(a,"form",t.props.id),Object(E.l)(a)]);case 6:c=e.sent,u=Object(k.a)(c,4),r=u[0],s=u[1],l=u[2],i=u[3],e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(3),Object(E.A)(e.t0,"Unable to load form info."),e.abrupt("return",t.setState({loading:!1}));case 18:d=[],p=[],s.forEach(e=>{d.push({value:Object(E.x)(e),id:e.id,label:o.a.createElement(N.a,{global:a,key:e.id,volunteer:e,refer:t})})}),l.forEach(e=>{p.push({value:Object(E.x)(e),id:e.id,label:o.a.createElement(N.a,{global:a,key:e.id,volunteer:e,refer:t})})}),t.setState({form:r,attributes:i,attributes_selected:r.attributes.map(e=>(e.label||(e.label=e.name),e)),volunteers:s,membersOption:d,selectedMembersOption:p,loading:!1});case 23:case"end":return e.stop()}}),e,null,[[3,14]])}))),this.state={global:e.global,form:this.props.form,selectedMembersOption:[],attributes:[],attributes_selected:[]}}componentDidMount(){this.state.form||this._loadData()}render(){const e=this.state,t=e.global,a=e.form,r=e.attributes,n=e.attributes_selected;return!a||this.state.loading?o.a.createElement(j.a,null):o.a.createElement("div",null,o.a.createElement("div",{style:{display:"flex",padding:"10px"}},o.a.createElement("div",{style:{padding:"5px 10px"}},o.a.createElement(E.b,{icon:T.d,style:{width:20,height:20,color:"gray"}})," ",this.props.edit?o.a.createElement(P.a,{type:"text",value:a.name,onSave:this.handleNameChange}):a.name,"\xa0",this.props.edit?"":o.a.createElement(i.b,{to:"/forms/view/"+a.id},"view"))),this.props.edit?o.a.createElement(D,{global:t,form:a,refer:this,attributes:r,selected:n}):"")}}const D=e=>o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("br",null),"Volunteers assigned to this form:",o.a.createElement(p.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.membersOption,isMulti:!0,isSearchable:!0,placeholder:"None"})),o.a.createElement("br",null),o.a.createElement("p",null,"NOTE: After any changes here, users will see these updates the next time they enter the map"),o.a.createElement(w,{onChange:e.refer.handleAttributeChange,attributes:e.attributes,selected:e.selected}))},64:function(e,t,a){"use strict";a.d(t,"a",(function(){return r.a})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return h})),a.d(t,"c",(function(){return T}));var r=a(201),n=(a(202),a(0)),s=a.n(n),l=a(20),o=a(72),i=a.n(o),c=a(18);const u=e=>{const t=e.refer.state.perPage;let a=s.a.createElement("div",null),n=[];return e.turf.forEach((a,l)=>{Math.floor(l/t)+1===e.refer.state.pageNum&&n.push(s.a.createElement(r.a,{global:e.global,key:a.id,turf:a,refer:e.refer}))}),a=s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(i.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.turf.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",s.a.createElement("div",{style:{width:75}},"# Per Page"," ",s.a.createElement(c.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),s.a.createElement("div",null,s.a.createElement("h3",null,e.type,"Turf (",e.turf.length,")"),s.a.createElement(l.b,{to:"/turf/add"},s.a.createElement("button",null,"Add Turf")),a,n,a)};var d=a(215),p=a(40),m=a(3);class h extends n.Component{constructor(...e){super(...e),this.handleStateChange=e=>{e||(e=[]),this.setState({typeOptions:[{value:"state",label:"State"},{value:"cd",label:"Congressional"},{value:"sldu",label:p.us_states[e.value].sldu},{value:"sldl",label:p.us_states[e.value].sldl}]}),this.props.refer.handleStateChange(e)}}render(){if(!this.props.refer.state.selectedDrawOption)return s.a.createElement("br",null);let e=[];switch(Object.keys(p.us_states).map(t=>e.push({value:t,label:p.us_states[t].name})),this.props.refer.state.selectedDrawOption.value){case"select":return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("br",null),"State or region:",s.a.createElement(c.a,{value:this.props.refer.state.selectedStateOption,onChange:this.handleStateChange,options:e,isSearchable:!0,placeholder:"Select state or region"})),this.props.refer.state.selectedStateOption?s.a.createElement("div",null,s.a.createElement("br",null),"District Type:",s.a.createElement(c.a,{value:this.props.refer.state.selectedTypeOption,onChange:this.props.refer.handleTypeChange,onMenuClose:this.props.refer.selectedTypeFetch,options:this.state.typeOptions,isSearchable:!1,placeholder:"Select district for this turf"})):"",this.props.refer._showDistrictOption()?s.a.createElement("div",null,s.a.createElement("br",null),"District Number:",this.props.refer.state.districtOptions.length?s.a.createElement(c.a,{value:this.props.refer.state.selectedDistrictOption,onChange:this.props.refer.handleDistrictChange,options:this.props.refer.state.districtOptions,isSearchable:!0,placeholder:"Select district for this turf"}):s.a.createElement(d.a,null)):"");case"import":return s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement("input",{type:"file",accept:".geojson,.json",onChange:e=>this.props.refer.handleImportFiles(e.target.files)}));case"radius":return s.a.createElement("div",null,s.a.createElement("br",null),"Type the address:",s.a.createElement(m.d,{debounce:500,value:this.props.refer.state.address,onChange:this.props.refer.onTypeAddress,onSelect:this.props.refer.submitAddress}));case"draw":return s.a.createElement("div",null,s.a.createElement("br",null),"Use a"," ",s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://google-developers.appspot.com/maps/documentation/utils/geojson/"},"GeoJSON Draw Tool"),', save the file, and then select the "Import GeoJSON shape file" option.');default:return s.a.createElement("div",null,"Unknown generation method.")}}}var b=a(4),f=a.n(b),g=a(8),v=a(52),E=a(97),O=a(455),y=a.n(O),k=a(67),x=a.n(k),S=a(171),w=a(984),C=a(985),j=a(986);class T extends n.Component{constructor(e){var t;super(e),t=this,this.handleClickDelete=()=>{this.setState({menuDelete:!0})},this.handleCloseDelete=()=>{this.setState({menuDelete:!1})},this.handlePageClick=e=>{this.setState({pageNum:e.selected+1})},this.submitAddress=function(){var e=Object(g.a)(f.a.mark((function e(a){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({address:a,saving:!0}),e.prev=1,e.next=4,Object(E.geocodeByAddress)(a);case 4:return r=e.sent,e.next=7,Object(E.getLatLng)(r[0]);case 7:n=e.sent,t.setState({addressCoords:n}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),Object(m.A)(e.t0,"Unable to search or geocode address.");case 14:t.setState({saving:!1});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),this.handleDrawChange=e=>{this.setState({selectedDrawOption:e,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,importFileData:null,addressCoords:null,address:""})},this.handleStateChange=e=>{this.setState({selectedStateOption:e})},this.handleTypeChange=e=>{this.setState({selectedTypeOption:e})},this.handleDistrictChange=e=>{this.setState({selectedDistrictOption:e})},this.handleImportFiles=e=>{this.setState({saving:!0});let t=new FileReader;t.onload=e=>{this.setState({importFileData:e.target.result,saving:!1})},t.readAsText(e[0])},this._deleteTurf=function(){var e=Object(g.a)(f.a.mark((function e(a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,t.setState({saving:!0,menuDelete:!1}),e.prev=2,e.next=5,Object(m.g)(r,"/turf/delete","POST",{turfId:a});case 5:Object(m.B)("Turf has been deleted."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(m.A)(e.t0,"Unable to delete turf.");case 11:t.setState({saving:!1}),t._loadData(),window.location.href="/HelloVoterHQ/#/turf/";case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),this._createTurf=Object(g.a)(f.a.mark((function e(){var a,r,n,s,l,o,i,c,u,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state.global,null!==(r=t.addTurfForm.getValue())){e.next=4;break}return e.abrupt("return");case 4:if(t.setState({saving:!0}),n=[],null===t.state.importFileData){e.next=18;break}e.prev=7,"FeatureCollection"===(s=JSON.parse(t.state.importFileData)).type?s.features.forEach(e=>{e.properties.name?e.name=e.properties.name:e.properties.NAME?e.name=e.properties.NAME:e.name=e.properties.precinctid+(e.properties.subprecinc?" "+e.properties.subprecinc:""),n.push(e)}):n.push(s),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(7),Object(m.A)(e.t0,"Unable to parse import data file."),e.abrupt("return",t.setState({saving:!1}));case 16:e.next=56;break;case 18:if("radius"!==t.state.selectedDrawOption.value){e.next=22;break}n.push(y()([t.state.addressCoords.lng,t.state.addressCoords.lat],1e3)),e.next=56;break;case 22:if(l=t.state.selectedStateOption.value,e.prev=23,!t.state.selectedDistrictOption||"all"!==t.state.selectedDistrictOption.value){e.next=42;break}e.t1=f.a.keys(t.state.districtOptions);case 26:if((e.t2=e.t1()).done){e.next=40;break}if(o=e.t2.value,"all"!==t.state.districtOptions[o].value){e.next=30;break}return e.abrupt("continue",26);case 30:return e.next=32,fetch(t.urlFromDist(l,t.state.selectedTypeOption.value,t.state.districtOptions[o].value));case 32:return i=e.sent,e.next=35,i.json();case 35:(c=e.sent).name=t.state.districtOptions[o].value,n.push(c),e.next=26;break;case 40:e.next=50;break;case 42:return e.next=44,fetch(t.urlFromDist(l,t.state.selectedTypeOption.value,t.state.selectedDistrictOption?t.state.selectedDistrictOption.value:null));case 44:return i=e.sent,e.t3=n,e.next=48,i.json();case 48:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 50:e.next=56;break;case 52:return e.prev=52,e.t5=e.catch(23),Object(m.A)(e.t5,"Unable to fetch district info data."),e.abrupt("return",t.setState({saving:!1}));case 56:return e.prev=56,u=0,d=0,e.next=61,Object(p.asyncForEach)(n,function(){var e=Object(g.a)(f.a.mark((function e(t){var n,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.geometry?t.geometry:t,s=t.name?r.name+" "+t.name:r.name,e.prev=2,e.next=5,Object(m.g)(a,"/turf/create","POST",{name:s,geometry:n});case 5:d++,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),u++;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}());case 61:Object(m.B)("Created "+d+" Turf."),u>0&&Object(m.A)({success:d,failed:u},"Failed to create "+u+" Turf."),e.next=68;break;case 65:e.prev=65,e.t6=e.catch(56),Object(m.A)(e.t6,"Unable to create turf.");case 68:t.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/turf/",t._loadData();case 71:case"end":return e.stop()}}),e,null,[[7,12],[23,52],[56,65]])}))),this.selectedTypeFetch=Object(g.a)(f.a.mark((function e(){var a,r,n,s,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state.selectedTypeOption){e.next=2;break}return e.abrupt("return");case 2:t.setState({districtOptions:[]}),r=t.state.selectedStateOption.value,e.t0=t.state.selectedTypeOption.value,e.next="cd"===e.t0?7:"sldu"===e.t0?9:"sldl"===e.t0?11:13;break;case 7:return a="cds/2016/",e.abrupt("break",14);case 9:return a="states/"+r+"/sldu/",e.abrupt("break",14);case 11:return a="states/"+r+"/sldl/",e.abrupt("break",14);case 13:return e.abrupt("return");case 14:return e.next=16,fetch("https://api.github.com/repos/OurVoiceUSA/districts/contents/"+a);case 16:return n=e.sent,s=[{value:"all",label:"Create all of them!"}],e.next=20,n.json();case 20:l=e.sent,e.t1=t.state.selectedTypeOption.value,e.next="cd"===e.t1?24:26;break;case 24:return l.forEach(e=>{e.name.includes(t.state.selectedStateOption.value)&&s.push({value:e.name,label:e.name})}),e.abrupt("break",27);case 26:l.forEach(e=>{let t=e.name.replace(".geojson","");s.push({value:t,label:t})});case 27:t.setState({districtOptions:s});case 28:case"end":return e.stop()}}),e)}))),this._loadData=Object(g.a)(f.a.mark((function e(){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,t.setState({loading:!0,search:""}),r=[],e.prev=3,e.next=6,Object(m.u)(a);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(m.A)(e.t0,"Unable to load turf.");case 12:t.setState(t.initState()),t.setState({loading:!1,turf:r});case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),this.state=this.initState(e),this.state.global=e.global,this.formServerItems=x.a.struct({name:x.a.String}),this.formServerOptions={fields:{name:{label:"Turf Name",error:"You must enter a turf name."}}},this.onTypeAddress=e=>this.setState({address:e}),this.onTypeSearch=this.onTypeSearch.bind(this),this.handlePageNumChange=this.handlePageNumChange.bind(this)}initState(e){let t=localStorage.getItem("turfperpage");return t||(t=5),{loading:!0,selectedDrawOption:null,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,districtOptions:[],turf:[],thisTurf:{},importFileData:null,address:"",addressCoords:null,search:"",perPage:t,pageNum:1,menuDelete:!1}}handlePageNumChange(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}onTypeSearch(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}onChangeTurf(e){this.setState({addTurfForm:e})}_showDistrictOption(){if(!this.state.selectedTypeOption)return!1;switch(this.state.selectedTypeOption.value){case"cd":case"sldu":case"sldl":return!0;default:return!1}}_showSubmitButton(){return!this.state.saving&&(!!this.state.selectedDrawOption&&(!(!this.state.selectedTypeOption||"state"!==this.state.selectedTypeOption.value)||(!(!this._showDistrictOption()||!this.state.selectedDistrictOption)||(null!==this.state.importFileData||null!==this.state.addressCoords))))}urlFromDist(e,t,a){let r;switch(t){case"state":r="states/"+e+"/shape.geojson";break;case"cd":r="cds/2016/"+a+"/shape.geojson";break;case"sldu":r="states/"+e+"/sldu/"+a+".geojson";break;case"sldl":r="states/"+e+"/sldl/"+a+".geojson";break;default:throw new Error("unknown selectedTypeOption")}return"https://raw.githubusercontent.com/OurVoiceUSA/districts/gh-pages/"+r}componentDidMount(){this._loadData()}render(){const e=this.state.global;let t=[{value:"select",label:"Select from legislative boundary"},{value:"import",label:"Import GeoJSON shape file"},{value:"radius",label:"Area surrounding an address"},{value:"draw",label:"Manually draw with your mouse"}],a=[];return this.state.turf.forEach(e=>{this.state.search&&!Object(m.x)(e).includes(this.state.search)||a.push(e)}),s.a.createElement(l.a,null,s.a.createElement("div",null,s.a.createElement(v.a,{exact:!0,path:"/turf/",render:()=>s.a.createElement(m.e,{flag:this.state.loading,func:this._loadData},"Search:"," ",s.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),s.a.createElement("br",null),s.a.createElement(u,{global:e,turf:a,refer:this}))}),s.a.createElement(v.a,{exact:!0,path:"/turf/add",render:()=>s.a.createElement("div",null,s.a.createElement(x.a.form.Form,{ref:e=>this.addTurfForm=e,type:this.formServerItems,options:this.formServerOptions,onChange:e=>this.onChangeTurf(e),value:this.state.addTurfForm}),s.a.createElement("br",null),"Method of generating turf:",s.a.createElement(c.a,{value:this.state.selectedDrawOption,onChange:this.handleDrawChange,options:t,isSearchable:!1,placeholder:"Select method"}),s.a.createElement(h,{refer:this}),this._showSubmitButton()?s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement("button",{onClick:()=>this._createTurf()},"Submit")):"")}),s.a.createElement(v.a,{path:"/turf/view/:id",render:t=>s.a.createElement("div",null,s.a.createElement(r.a,{global:e,key:t.match.params.id,id:t.match.params.id,edit:!0,refer:this}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(S.a,{onClick:this.handleClickDelete,color:"primary"},"Delete Turf"),s.a.createElement(w.a,{open:this.state.menuDelete,onClose:this.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},s.a.createElement(C.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this turf?"),s.a.createElement(j.a,null,s.a.createElement(S.a,{onClick:this.handleCloseDelete,color:"primary",autoFocus:!0},"No"),s.a.createElement(S.a,{onClick:()=>this._deleteTurf(t.match.params.id),color:"primary"},"Yes"))))}),s.a.createElement(m.a,{flag:this.state.saving})))}}},85:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return A})),a.d(t,"c",(function(){return I}));var r=a(0),n=a.n(r),s=a(18),l=a(1008);a(907);class o extends n.a.Component{constructor(...e){super(...e),this.state={checked:this.props.checked||!1,isMulti:this.props.isMulti||!0,value:this.props.value,map1:{value:",",label:"delimited by comma"},map2:{value:0,label:"1st value"}},this._handleCheck=()=>{const e=this.props,t=e.updateFormats,a=e.label;this.setState({checked:!this.state.checked,isMulti:!this.state.isMulti,value:"",map1:{value:",",label:"delimited by comma"},map2:{value:0,label:"1st value"}},()=>t&&t(a,this.state))},this._setValue=e=>{const t=this.props,a=t.updateFormats,r=t.label;return this.setState({value:e},()=>a&&a(r,this.state))},this._setMapValue=(e,t)=>{const a=this.props,r=a.updateFormats,n=a.label;this.setState({[e]:t},()=>r&&r(n,this.state))},this._renderCheckbox=({checked:e})=>n.a.createElement(l.a,{className:"ck-bx",onChange:()=>this._handleCheck(),onClick:()=>this._handleCheck(),value:"ack",color:"primary",checked:e}),this._renderMapOptions=({map1:e="",map2:t="",value:a=""})=>n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{width:160}},n.a.createElement(s.a,{className:"map-option-1",onChange:e=>this._setMapValue("map1",e),value:e,options:[{value:",",label:"delimited by comma"},{value:" ",label:"delimited by space"}],placeholder:"None"})),n.a.createElement("div",{style:{width:150}},n.a.createElement(s.a,{className:"map-option-2",onChange:e=>this._setMapValue("map2",e),value:t,options:[{value:0,label:"1st value"},{value:1,label:"2nd value"},{value:2,label:"last value"}],placeholder:"None"})))}render(){const e=this.props,t=e.label,a=void 0===t?"":t,r=e.options,l=void 0===r?[]:r,o=e.checkbox,i=void 0!==o&&o,c=e.dimensions,u=void 0===c?{width:450,labelWidth:150}:c,d=u.width,p=u.labelWidth,m=this.state,h=m.checked,b=m.isMulti,f=m.value,g=m.map1,v=m.map2;return n.a.createElement("div",{className:"mapselect"},n.a.createElement("div",{style:{width:p}},a,":")," ",n.a.createElement("div",{style:{width:d}},n.a.createElement(s.a,{className:"map-select-input",value:f,options:l,onChange:e=>this._setValue(e),isMulti:b,placeholder:"None"})),i?this._renderCheckbox({checked:h}):"",h?this._renderMapOptions({map1:g,map2:v,value:f}):"")}}var i=a(7),c=a(988),u=a(989),d=a(993),p=a(992),m=a(994),h=a(1009),b=a(990),f=a(1012),g=a(477),v=a(987),E=a(293),O=a.n(E),y=a(295),k=a.n(y),x=a(294),S=a.n(x),w=a(292),C=a.n(w);const j=(e,t)=>t.func?t.params?t.func(e[t.params[0]],e[t.params[1]]):t.func(e):e[t.params[0]];class T extends r.Component{constructor(...e){super(...e),this.handleFirstPageButtonClick=e=>{this.props.onChangePage(e,0)},this.handleBackButtonClick=e=>{this.props.onChangePage(e,this.props.page-1)},this.handleNextButtonClick=e=>{this.props.onChangePage(e,this.props.page+1)},this.handleLastPageButtonClick=e=>{this.props.onChangePage(e,Math.max(0,Math.ceil(this.props.count/this.props.rowsPerPage)-1))}}render(){const e=this.props,t=e.classes,a=e.count,r=e.page,s=e.rowsPerPage,l=e.theme;return n.a.createElement("div",{className:t.root},n.a.createElement(v.a,{onClick:this.handleFirstPageButtonClick,disabled:0===r,"aria-label":"First Page"},"rtl"===l.direction?n.a.createElement(C.a,null):n.a.createElement(O.a,null)),n.a.createElement(v.a,{onClick:this.handleBackButtonClick,disabled:0===r,"aria-label":"Previous Page"},"rtl"===l.direction?n.a.createElement(S.a,null):n.a.createElement(k.a,null)),n.a.createElement(v.a,{onClick:this.handleNextButtonClick,disabled:r>=Math.ceil(a/s)-1,"aria-label":"Next Page"},"rtl"===l.direction?n.a.createElement(k.a,null):n.a.createElement(S.a,null)),n.a.createElement(v.a,{onClick:this.handleLastPageButtonClick,disabled:r>=Math.ceil(a/s)-1,"aria-label":"Last Page"},"rtl"===l.direction?n.a.createElement(O.a,null):n.a.createElement(C.a,null)))}}const P=Object(i.a)(e=>({root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:2.5*e.spacing.unit}}),{withTheme:!0})(T);class N extends r.Component{constructor(e){super(e),this.handleChangePage=(e,t)=>{this.setState({page:t})},this.handleChangeRowsPerPage=e=>{this.setState({rowsPerPage:e.target.value})},this.state={spec:this.props.spec,rows:this.props.rows,page:0,rowsPerPage:5}}render(){const e=this.props.classes,t=this.state,a=t.rows,r=t.spec,s=t.rowsPerPage,l=t.page,o=s-Math.min(s,a.length-l*s);return n.a.createElement(g.a,{className:e.root},n.a.createElement("div",{className:e.tableWrapper},n.a.createElement(c.a,{className:e.table},n.a.createElement(u.a,null,n.a.createElement(b.a,null,r.map(e=>n.a.createElement(f.a,{title:e.tooltip},n.a.createElement(p.a,null,e.header))))),n.a.createElement(d.a,null,a.slice(l*s,l*s+s).map(e=>n.a.createElement(b.a,{key:e.id},r.map(t=>t.funcItemTooltip&&t.funcItemTooltip(e)?n.a.createElement(f.a,{title:e.error},n.a.createElement(p.a,null,j(e,t))):n.a.createElement(p.a,null,j(e,t))))),o>0&&n.a.createElement(b.a,{style:{height:48*o}},n.a.createElement(p.a,{colSpan:6}))),n.a.createElement(m.a,null,n.a.createElement(b.a,null,n.a.createElement(h.a,{rowsPerPageOptions:[5,10,25],colSpan:3,count:a.length,rowsPerPage:s,page:l,SelectProps:{native:!0},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:P}))))))}}var A=Object(i.a)(e=>({root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:500},tableWrapper:{overflowX:"auto"}}))(N),D=a(999),_=a(1014);a(908);var I=Object(i.a)({root:{flexGrow:1}})(({title:e,completed:t})=>n.a.createElement("div",{className:"progress-bar progress-bar-".concat(0===t?"hidden":"shown")},!0===t?n.a.createElement("div",{className:"progress-complete"},n.a.createElement(_.a,null),"Complete"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{style:{marginTop:"5px"}},e),n.a.createElement(D.a,{style:{width:"90%",paddingTop:"10px"},variant:"determinate",value:t}))))},907:function(e,t,a){},908:function(e,t,a){},909:function(e,t,a){},94:function(e,t,a){"use strict";var r=a(162);a.d(t,"a",(function(){return r.a}));var n=a(426);a.d(t,"b",(function(){return n.a}))},946:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(14),l=a.n(s),o=(a(531),a(4)),i=a.n(o),c=a(8),u=a(20),d=a(52),p=a(164),m=a(40),h=(a(553),a(285)),b=a.n(h),f=a(433),g=a.n(f),v=a(96),E=a(215),O=a(3),y=a(26),k=a(287);class x extends r.Component{constructor(e){var t;super(e),t=this,this.componentDidMount=Object(c.a)(i.a.mark((function e(){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r={},e.prev=2,e.next=5,Object(O.g)(a,"/dashboard");case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(O.A)(e.t0,"Unable to load dashboard info.");case 11:t.setState({api_version:r.version?r.version:"unknown",neo4j_version:r.neo4j_version?r.neo4j_version:"unknown"});case 12:case"end":return e.stop()}}),e,null,[[2,8]])}))),this.state={global:e.global,api_version:null,neo4j_version:null}}render(){const e=this.state,t=e.api_version,a=e.neo4j_version;return n.a.createElement("div",null,n.a.createElement("div",null,"HelloVoterHQ"," version ","2.1.0"),n.a.createElement("div",null,t?"HelloVoterAPI version "+t:n.a.createElement(E.a,{height:15})),n.a.createElement("div",null,a?"Neo4j version "+a:n.a.createElement(E.a,{height:15})),t&&"unknown"!==t&&"2.1.0"!==t&&n.a.createElement("h3",{style:{color:"red"}},"WARNING: API version doesn't match HQ version."),n.a.createElement("div",null,"\xa9 2020, Our Voice USA, a 501(c)(3) Non-Profit Organization. Not for any candidate or political party."),n.a.createElement("div",null,"This program is free software; refer to our"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/blob/master/LICENSE"},"License")," ","for more details."),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://raw.githubusercontent.com/OurVoiceUSA/HelloVoter/master/docs/Privacy-Policy.md"},"Privacy Policy"),"||",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://raw.githubusercontent.com/OurVoiceUSA/HelloVoter/master/docs/Terms-of-Service.md"},"Terms of Service")),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/OurVoiceUSA"},n.a.createElement(O.b,{icon:k.b})," @OurVoiceUSA")),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/OurVoiceUsa"},n.a.createElement(O.b,{icon:k.a})," @OurVoiceUSA")),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ourvoiceusa.org/"},n.a.createElement(O.b,{icon:y.h})," ourvoiceusa.org")))}}var S=a(18),w=a(1008),C=a(142),j=a(64);const T=e=>{const t=e.value,a=e.percent,r=e.x,s=e.y,l=e.midAngle;return n.a.createElement("g",{transform:"translate(".concat(r,", ").concat(s,")"),textAnchor:l<-90||l>=90?"end":"start"},n.a.createElement("text",{x:0,y:0},"Count: ".concat(t)),n.a.createElement("text",{x:0,y:20},"(Percent: ".concat((100*a).toFixed(2),"%)")))};class P extends r.Component{constructor(e){var t;super(e),t=this,this._init=Object(c.a)(i.a.mark((function e(){var a,r,s,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,t.setState({loading:!0}),r=[],e.next=5,Object(O.u)(a);case 5:return s=e.sent,l=[],e.next=9,Object(O.l)(a);case 9:o=e.sent,s.forEach(e=>{r.push({value:Object(O.x)(e),id:e.id,label:n.a.createElement(j.a,{global:a,key:e.id,turf:e,refer:t})})}),o.forEach(e=>{l.push({value:Object(O.x)(e),id:e.id,label:e.name})}),t.setState({loading:!1,attributeOptions:l,turfOptions:r});case 13:case"end":return e.stop()}}),e)}))),this.doQuery=Object(c.a)(i.a.mark((function e(){var a,r,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state.global,t.state.selectedAttributeOption){e.next=3;break}return e.abrupt("return");case 3:return t.setState({loading:!0}),r=[],n="/analytics/list?turfId=",t.state.selectedTurfOption&&t.state.selectedTurfOption.id&&(n+=t.state.selectedTurfOption.id),t.state.selectedAttributeOption&&t.state.selectedAttributeOption.id&&(n+="&aId="+t.state.selectedAttributeOption.id),t.state.include_null&&(n+="&include_null=true"),e.next=11,Object(O.g)(a,n);case 11:for((s=e.sent)&&s.data&&s.data.map(e=>r.push({name:e[0]?e[0]:"No Data",value:e[1]}));r.length>6;)r[5]={name:"Other",value:r[5].value+r.pop().value};t.setState({data_breakdown:r,loading:!1});case 15:case"end":return e.stop()}}),e)}))),this.handleTurfChange=e=>{e||(e=[]),this.setState({selectedTurfOption:e},()=>this.doQuery())},this.handleAttributeChange=e=>{e||(e=[]),this.setState({selectedAttributeOption:e},()=>this.doQuery())},this.state={global:e.global,turfOptions:[],selectedTurfOption:null,data_breakdown:[],animation:!0}}componentDidMount(){this._init()}render(){var e=this;return n.a.createElement(O.e,{flag:this.state.loading,func:()=>this.doQuery()},n.a.createElement("h3",null,"Analytics"),n.a.createElement(S.a,{value:this.state.selectedAttributeOption,onChange:this.handleAttributeChange,options:this.state.attributeOptions,isMulti:!1,isSearchable:!0,placeholder:"Select an attribute to query data for"}),n.a.createElement("br",null),n.a.createElement(S.a,{value:this.state.selectedTurfOption,onChange:this.handleTurfChange,options:this.state.turfOptions,isMulti:!1,isSearchable:!0,placeholder:"Select a turf to include only records within that turf"}),n.a.createElement(w.a,{color:"primary",checked:this.state.include_null,onChange:(t,a)=>{this.setState({include_null:a},Object(c.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.doQuery();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))))}}),' Include records with "No Data"',this.state.data_breakdown.length?n.a.createElement(C.e,{width:800,height:400},n.a.createElement(C.c,null),n.a.createElement(C.d,{data:this.state.data_breakdown,dataKey:"value",startAngle:180,endAngle:-180,innerRadius:60,outerRadius:80,label:T,paddingAngle:5,isAnimationActive:this.state.animation},this.state.data_breakdown.map((e,t)=>n.a.createElement(C.a,{key:"slice-".concat(t),fill:["red","blue","yellow","green","grey"][t]})),n.a.createElement(C.b,{width:50,position:"center"},this.state.selectedAttributeOption.label))):n.a.createElement("h3",null,"No Data"))}}var N=a(456),A=a(457),D=a.n(A),_=a(298),I=a(137);a(427);const F=Object(I.c)(e=>n.a.createElement("div",{style:{display:"flex",padding:"10px"},className:"dashboard-card"},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(O.b,{style:{width:50,height:50,color:"gray"},icon:e.icon?e.icon:y.m})),n.a.createElement("div",{style:{flex:1,overflow:"auto"}},n.a.createElement("h3",null,e.name,": ",e.stat)))),U=Object(I.b)(e=>n.a.createElement("div",{className:"dashboard-container"},e.dash.map((t,a)=>{const r=e.cards[t]||{};return n.a.createElement(F,{key:r.name,name:r.name,stat:r.stat,icon:r.icon,index:a})})));class M extends r.Component{constructor(e){var t;super(e),t=this,this.onSortEnd=({oldIndex:e,newIndex:t})=>{const a=Object(I.a)(this.state.dash,e,t);localStorage.setItem("dash",a.map(e=>e)),this.setState(()=>({dash:a}))},this._loadData=Object(c.a)(i.a.mark((function e(){var a,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r={},s=[],t.setState({loading:!0}),e.prev=4,e.next=7,Object(O.g)(a,"/dashboard");case 7:0===(r=e.sent).admins&&t.setState({noAdmins:!0}),s={vol:{name:"Volunteers",stat:r.volunteers,icon:y.p},turf:{name:"Turfs",stat:r.turfs,icon:y.j},form:{name:"Forms",stat:r.forms,icon:y.d},attributes:{name:"Attributes",stat:r.attributes,icon:y.b},addr:{name:"Addresses",stat:n.a.createElement(N.a,{value:r.addresses,displayType:"text",thousandSeparator:!0}),icon:y.k},dbsz:{name:"Database size",stat:D()(r.dbsize?r.dbsize:0,{round:1}),icon:y.f}},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),Object(O.A)(e.t0,"Unable to load dashboard info.");case 15:t.setState({cards:s,data:r,loading:!1});case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));const a=(localStorage.getItem("dash")||"vol,turf,form,attributes,addr,dbsz").split(",");this.state={global:e.global,loading:!0,noAdmins:!1,data:{},cards:[],dash:a}}componentDidMount(){this._loadData()}render(){const e=this.state,t=e.global,a=e.data,r=e.loading,s=e.noAdmins;return n.a.createElement(O.e,{flag:r,func:this._loadData},a.version&&"2.1.0"!==a.version&&n.a.createElement("h3",{style:{color:"red"}},"WARNING: API version doesn't match HQ version."),n.a.createElement(U,{state:this.state,axis:"xy",onSortEnd:this.onSortEnd,cards:this.state.cards,dash:this.state.dash}),n.a.createElement(O.c,{refer:this}),n.a.createElement(_.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:s,onClose:()=>this.setState({noAdmins:!1})},n.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},"Welcome! Looks like you're new here. By default, users have zero permissions when they sign in. To make yourself an admin and gain full access to the UI, run the follow command from the shell:",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("pre",null,"npm run makeadmin -- ",t.getUserProp("id")))))}}var L=M,V=a(63),q=a(31),H=a(72),R=a.n(H),Q=a(132),B=a(951),W=a(297),z=a(480),G=a(479),J=a(171),Y=a(216),K=a(95),X=a.n(K);Y.a.locale(X.a);class Z extends r.Component{constructor(e){var t;super(e),t=this,this._loadData=Object(c.a)(i.a.mark((function e(){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r=[],t.setState({loading:!0,search:""}),e.prev=3,e.next=6,Object(O.s)(a);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(O.A)(e.t0,"Unable to load qrcodes.");case 12:t.setState({loading:!1,qrcodes:r});case 13:case"end":return e.stop()}}),e,null,[[3,9]])}))),this.handlePageClick=e=>{this.setState({pageNum:e.selected+1})};let a=localStorage.getItem("qrcodesperpage");a||(a=5),this.state={global:e.global,loading:!0,thisQRCode:{},qrcodes:[],search:"",perPage:a,pageNum:1},this.onTypeSearch=this.onTypeSearch.bind(this),this.handlePageNumChange=this.handlePageNumChange.bind(this)}componentDidMount(){this._loadData()}handlePageNumChange(e){localStorage.setItem("qrcodesperpage",e.value),this.setState({pageNum:1,perPage:e.value})}onTypeSearch(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}render(){const e=this.state.global;let t=[];return this.state.qrcodes.forEach(e=>{this.state.search&&!Object(O.x)(e).includes(this.state.search)||t.push(e)}),n.a.createElement(O.e,{flag:this.state.loading,func:()=>this._loadData()},n.a.createElement(u.a,null,n.a.createElement("div",null,"Search:"," ",n.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),n.a.createElement("br",null),n.a.createElement(d.a,{exact:!0,path:"/qrcode/",render:()=>n.a.createElement($,{global:e,refer:this,qrcodes:t})}),n.a.createElement(d.a,{path:"/qrcode/view/:id",render:t=>n.a.createElement(ee,{global:e,key:t.match.params.id,id:t.match.params.id,edit:!0,refer:this})}),n.a.createElement(O.a,{flag:this.state.saving}))))}}const $=e=>{const t=e.refer.state.perPage;let a=n.a.createElement("div",null),r=[];return e.qrcodes.forEach((a,s)=>{Math.floor(s/t)+1===e.refer.state.pageNum&&r.push(n.a.createElement(ee,{global:e.global,key:a.id,qrcode:a,refer:e.refer}))}),a=n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(R.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.qrcodes.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",n.a.createElement("div",{style:{width:75}},"# Per Page"," ",n.a.createElement(S.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),n.a.createElement("div",null,n.a.createElement("h3",null,e.type,"QRCodes (",e.qrcodes.length,")"),a,n.a.createElement(B.a,{component:"nav"},r),a,n.a.createElement(J.a,{onClick:Object(c.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.g)(e.global,"/qrcode/create","POST");case 2:(a=t.sent)&&a.id?(e.refer.setState({thisQRCode:a}),e.refer._loadData()):Object(O.A)({},"QRCode creation failed.");case 4:case"end":return t.stop()}}),t)}))),color:"primary"},"Generate QR CODE"))};class ee extends r.Component{constructor(e){var t;super(e),t=this,this.handleFormsChange=function(){var e=Object(c.a)(i.a.mark((function e(a){var r,n,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,n=Object(O.h)(t.state.selectedFormsOption,a),s=[],n.add.forEach(e=>{s.push(Object(O.g)(r,"/qrcode/form/add","POST",{formId:e,qId:t.props.id}))}),n.rm.forEach(e=>{s.push(Object(O.g)(r,"/qrcode/form/remove","POST",{formId:e,qId:t.props.id}))}),e.next=10,Promise.all(s);case 10:return e.next=12,Object(O.r)(r,t.props.id);case 12:l=e.sent,Object(O.B)("Form selection saved."),t.setState({selectedFormsOption:a,qrcode:l}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),Object(O.A)(e.t0,"Unable to add/remove form.");case 20:t.props.refer.setState({saving:!1});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),this.handleTurfChange=function(){var e=Object(c.a)(i.a.mark((function e(a){var r,n,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,a||(a=[]),t.props.refer.setState({saving:!0}),e.prev=3,n=Object(O.h)(t.state.selectedTurfOption,a),s=[],n.add.forEach(e=>{s.push(Object(O.g)(r,"/qrcode/turf/add","POST",{turfId:e,qId:t.props.id}))}),n.rm.forEach(e=>{s.push(Object(O.g)(r,"/qrcode/turf/remove","POST",{turfId:e,qId:t.props.id}))}),e.next=10,Promise.all(s);case 10:return e.next=12,Object(O.r)(r,t.props.id);case 12:l=e.sent,Object(O.B)("Turf selection saved."),t.setState({selectedTurfOption:a,qrcode:l}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),Object(O.A)(e.t0,"Unable to add/remove turf.");case 20:t.props.refer.setState({saving:!1});case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),this._loadData=Object(c.a)(i.a.mark((function e(){var a,r,s,l,o,c,u,d,p,m,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r={},s=[],l=[],t.setState({loading:!0}),e.prev=3,e.next=6,Promise.all([Object(O.r)(a,t.props.id),Object(O.n)(a),Object(O.u)(a)]);case 6:o=e.sent,c=Object(q.a)(o,3),r=c[0],s=c[1],l=c[2],e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),Object(O.A)(e.t0,"Unable to load canavasser info."),e.abrupt("return",t.setState({loading:!1}));case 17:u=[],d=[],p=[],m=[{value:"",label:"None"}],h=[{value:"",label:"None"}],s.forEach(e=>{m.push({value:Object(O.x)(e),id:e.id,label:n.a.createElement(V.a,{global:a,key:e.id,form:e,refer:t})})}),r.ass.forms.forEach(e=>{d.push({value:Object(O.x)(e),id:e.id,label:n.a.createElement(V.a,{global:a,key:e.id,form:e,refer:t})})}),l.forEach(e=>{h.push({value:Object(O.x)(e),id:e.id,label:n.a.createElement(j.a,{global:a,key:e.id,turf:e,refer:t})})}),r.ass.turfs.forEach(e=>{p.push({value:Object(O.x)(e),id:e.id,label:n.a.createElement(j.a,{global:a,key:e.id,turf:e,refer:t})})}),t.setState({loading:!1,qrcode:r,leaderOptions:u,formOptions:m,turfOptions:h,selectedFormsOption:d,selectedTurfOption:p});case 27:case"end":return e.stop()}}),e,null,[[3,13]])}))),this._disableQRCode=function(){var e=Object(c.a)(i.a.mark((function e(a,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.global,t.props.refer.setState({saving:!0}),e.prev=2,e.next=5,Object(O.g)(n,"/qrcode/disable","POST",{id:a.id});case 5:Object(O.B)("QRCode has been disabled."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(O.A)(e.t0,"Unable to disable QRCode.");case 11:t.props.refer.setState({saving:!1}),t.props.refer._loadData();case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a){return e.apply(this,arguments)}}(),this.onAutoTurfToggle=function(){var e=Object(c.a)(i.a.mark((function e(a,r){var n,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,s=n.global,l=n.qrcode,t.props.refer.setState({saving:!0}),e.prev=2,e.next=5,Object(O.g)(s,"/qrcode/update","POST",{id:l.id,autoturf:r});case 5:Object(O.B)("QRCode has been updated."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(O.A)(e.t0,"Unable to update QRCode.");case 11:t.props.refer.setState({saving:!1}),t.props.refer._loadData();case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,a){return e.apply(this,arguments)}}(),this.onSave=function(){var e=Object(c.a)(i.a.mark((function e(a){var r,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,n=r.global,s=r.qrcode,t.props.refer.setState({saving:!0}),e.prev=2,e.next=5,Object(O.g)(n,"/qrcode/update","POST",{id:s.id,name:a});case 5:Object(O.B)("QRCode has been updated."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(O.A)(e.t0,"Unable to update QRCode.");case 11:t.props.refer.setState({saving:!1}),t.props.refer._loadData();case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),this.state={global:e.global,refer:this.props.refer.props.refer,qrcode:this.props.qrcode,selectedFormsOption:[],selectedTurfOption:[]}}componentDidMount(){this.state.qrcode||this._loadData(),v.a.rebuild()}componentDidUpdate(){v.a.rebuild()}render(){const e=this.state,t=e.global,a=e.qrcode;return!a||this.state.loading?n.a.createElement(E.a,null):this.props.edit?n.a.createElement("div",null,n.a.createElement(W.a,{alignItems:"flex-start",style:{width:350}},n.a.createElement(G.a,null,n.a.createElement("img",{alt:"QR Code",src:a.img}))),n.a.createElement(te,{global:t,qrcode:a,refer:this,link:Object(O.i)(a.id,t.state.server,t.state.orgId),onSave:this.onSave,onAutoTurfToggle:this.onAutoTurfToggle})):n.a.createElement(W.a,{button:!0,style:{width:350},alignItems:"flex-start",onClick:()=>{this.props.refer.setState({thisQRCode:a}),window.location.href="/HelloVoterHQ/#/qrcode/view/"+a.id}},n.a.createElement(G.a,null,n.a.createElement(O.b,{icon:y.l,size:"large"})),n.a.createElement(z.a,{primary:a.name,secondary:""}))}}const te=e=>n.a.createElement("div",null,n.a.createElement("h1",null,n.a.createElement(Q.a,{type:"text",value:e.qrcode.name,onSave:e.onSave})),n.a.createElement("br",null),n.a.createElement("br",null),"Link to use on a mobile device: ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.link},e.link),n.a.createElement("br",null),n.a.createElement("br",null),"Last Used:"," ",e.qrcode.last_used?new Y.a("en-US").format(new Date(e.qrcode.last_used-3e4)):"Never",n.a.createElement("br",null),"Number of people who've used it: ",e.qrcode.num_volunteers,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,"Forms this QRCode gives access to:",n.a.createElement(S.a,{value:e.refer.state.selectedFormsOption,onChange:e.refer.handleFormsChange,options:e.refer.state.formOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),n.a.createElement("br",null),"Auto-assign nearest turf: ",n.a.createElement(w.a,{color:"primary",checked:!!e.qrcode.autoturf,onChange:e.onAutoTurfToggle}),n.a.createElement("br",null),!e.qrcode.autoturf&&n.a.createElement("div",null,"Turf this QRCode gives access to:",n.a.createElement(S.a,{value:e.refer.state.selectedTurfOption,onChange:e.refer.handleTurfChange,options:e.refer.state.turfOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}))),n.a.createElement("br",null),e.qrcode.disabled&&n.a.createElement("div",null,"This QR Code is disabled"),!e.qrcode.disabled&&n.a.createElement(J.a,{onClick:()=>e.refer._disableQRCode(e.qrcode,!1)},"Disable QRCode"));var ae=a(67),re=a.n(ae),ne=a(984),se=a(985),le=a(986),oe=a(135),ie=a.n(oe),ce=a(1001),ue=a(1002),de=a(1015),pe=a(987),me=a(1010),he=a(1007),be=a(995),fe=a(458),ge=a.n(fe),ve=a(1e3);const Ee=Object(ve.a)(e=>({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}));var Oe=e=>{const t=Object(r.useState)(""),a=Object(q.a)(t,2),s=a[0],l=a[1],o=Object(r.useState)("string"),i=Object(q.a)(o,2),c=i[0],u=i[1],d=Object(r.useState)("string"),p=Object(q.a)(d,2),m=p[0],h=p[1],b=Object(r.useState)(!1),f=Object(q.a)(b,2),g=f[0],v=f[1],E=Object(r.useState)([]),O=Object(q.a)(E,2),y=O[0],k=O[1],x=Object(r.useState)(!1),S=Object(q.a)(x,2),C=S[0],j=S[1],T=e=>{v(e.target.checked)},P=()=>{const e=y.concat("");k(e)},N=e=>{j(e.target.checked)},A=e=>{u(e.target.value)};let D=null;"string"===m&&(D=n.a.createElement(ce.a,{control:n.a.createElement(w.a,{checked:g,onChange:T,value:"showAdd",color:"primary"}),label:"Additional Options"})),"hyperlink"===m&&(D=n.a.createElement(ue.a,{className:Ee.formControl},n.a.createElement(de.a,{id:"value",label:"URL",onChange:e=>A(e)}))),"note"===m&&(D=n.a.createElement(ue.a,{className:Ee.formControl},n.a.createElement(de.a,{id:"value",label:"Note text",onChange:e=>A(e)})));let _=null,I=null;g&&(_=y.map((e,t)=>n.a.createElement(n.a.Fragment,{key:t},n.a.createElement(ue.a,{key:t,className:Ee.formControl},n.a.createElement(de.a,{id:"option-"+(t+1),label:"Option "+(t+1),onChange:e=>((e,t)=>{const a=[];for(let r in y)r==t?a.push(e.target.value):a.push(y[r]);k(a)})(e,t),value:e})),n.a.createElement(pe.a,{"aria-label":"delete",onClick:()=>(e=>{const t=y.filter((t,a)=>e!=a);k(t)})(t)},n.a.createElement(ge.a,null)),n.a.createElement("br",null),n.a.createElement("br",null))),I=n.a.createElement(J.a,{variant:"contained",color:"primary",onClick:P},"Add Option"));let F=null;y.length>1&&(F=n.a.createElement(ce.a,{control:n.a.createElement(w.a,{checked:C,onChange:N,value:"showMulti",color:"primary"}),label:"Mutli-Select"}));return n.a.createElement("div",null,n.a.createElement("h3",null,"Enter Attribute Details"),n.a.createElement(ue.a,{className:Ee.formControl},n.a.createElement(de.a,{required:!0,id:"standard-required",label:"Name",value:s,onChange:e=>{l(e.target.value)}})),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(ue.a,{className:Ee.formControl},n.a.createElement(me.a,{id:"attribute-type-label"},"Type"),n.a.createElement(he.a,{labelId:"attribute-type-label",id:"attribute-type",value:m,onChange:e=>{h(e.target.value),"string"!==e.target.value&&g&&v(!1)}},n.a.createElement(be.a,{value:"string"},"Text"),n.a.createElement(be.a,{value:"textbox"},"Textbox"),n.a.createElement(be.a,{value:"number"},"Number"),n.a.createElement(be.a,{value:"boolean"},"On/Off Switch (Boolean)"),n.a.createElement(be.a,{value:"hyperlink"},"Hyperlink"),n.a.createElement(be.a,{value:"note"},"Note"))),"\u2003\u2003",D,n.a.createElement("br",null),n.a.createElement("br",null),_,n.a.createElement("br",null),I,"\u2003",n.a.createElement(J.a,{variant:"contained",color:"primary",onClick:()=>e.create({name:s,value:c,type:m,options:y.length?y:void 0,multi:C})},"Create Attribute"))};function ye(e){return{value:e,label:Object(m.ucFirst)(e)}}const ke=[ye("string"),ye("boolean"),ye("number"),ye("textbox")];class xe extends r.Component{constructor(e){var t;super(e),t=this,this.handleClickDelete=()=>{this.setState({menuDelete:!0})},this.handleCloseDelete=()=>{this.setState({menuDelete:!1})},this._deleteAttribute=function(){var e=Object(c.a)(i.a.mark((function e(a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.global,t.setState({saving:!0,menuDelete:!1}),e.prev=2,e.next=5,Object(O.g)(r,"/attribute/delete","POST",{id:a});case 5:Object(O.B)("Attribute has been deleted."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(O.A)(e.t0,"Unable to delete Attributes.");case 11:t.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/attributes/",t._loadData();case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),this._createAttribute=function(){var e=Object(c.a)(i.a.mark((function e(a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.state.global,null!==(n=a)){e.next=4;break}return e.abrupt("return");case 4:return t.setState({saving:!0}),e.prev=5,e.next=8,Object(O.g)(r,"/attribute/create","POST",n);case 8:Object(O.B)("Attribute has been created."),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),Object(O.A)(e.t0,"Unable to create Attribute.");case 14:t.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/attributes/",t._loadData();case 17:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),this._loadData=Object(c.a)(i.a.mark((function e(){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,t.setState({loading:!0,search:""}),r=[],e.prev=3,e.next=6,Object(O.l)(a);case 6:r=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(O.A)(e.t0,"Unable to load volunteers.");case 12:t.setState({loading:!1,attributes:r});case 13:case"end":return e.stop()}}),e,null,[[3,9]])}))),this.handlePageClick=e=>{this.setState({pageNum:e.selected+1})};let a=localStorage.getItem("attributesperpage");a||(a=5),this.state={global:e.global,loading:!0,attributes:[],search:"",perPage:a,pageNum:1,menuDelete:!1},this.formServerItems=re.a.struct({name:re.a.String}),this.formServerOptions={fields:{server:{label:"Attribute Name",error:"You must enter an Attribute name."}}},this.onTypeSearch=this.onTypeSearch.bind(this),this.handlePageNumChange=this.handlePageNumChange.bind(this)}componentDidMount(){console.log(this.addattributeForm),this._loadData()}onChangeAttribute(e){console.log("Changing attributeState: ",e),this.setState({name:e.name})}handlePageNumChange(e){localStorage.setItem("attributesperpage",e.value),this.setState({pageNum:1,perPage:e.value})}onTypeSearch(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}render(){const e=this.state.global;let t=[];return this.state.attributes.forEach(e=>{this.state.search&&!Object(O.x)(e).includes(this.state.search)||t.push(e)}),n.a.createElement(u.a,null,n.a.createElement("div",null,n.a.createElement(d.a,{exact:!0,path:"/attributes/",render:()=>n.a.createElement(O.e,{flag:this.state.loading,func:this._loadData},"Search:"," ",n.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),n.a.createElement(Se,{global:e,refer:this,attributes:t}))}),n.a.createElement(d.a,{exact:!0,path:"/attributes/add",render:()=>n.a.createElement(Oe,{create:e=>this._createAttribute(e)})}),n.a.createElement(d.a,{path:"/attributes/view/:id",render:t=>n.a.createElement("div",null,n.a.createElement(we,{global:e,key:t.match.params.id,id:t.match.params.id,edit:!0,refer:this}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(J.a,{onClick:this.handleClickDelete,color:"primary"},"Delete attribute"),n.a.createElement(ne.a,{open:this.state.menuDelete,onClose:this.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(se.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this attribute?"),n.a.createElement(le.a,null,n.a.createElement(J.a,{onClick:this.handleCloseDelete,color:"primary",autoFocus:!0},"No"),n.a.createElement(J.a,{onClick:()=>this._deleteAttribute(t.match.params.id),color:"primary"},"Yes"))))}),n.a.createElement(O.a,{flag:this.state.saving})))}}const Se=e=>{const t=e.refer.state.perPage;let a=n.a.createElement("div",null),r=[];return e.attributes.forEach((a,s)=>{Math.floor(s/t)+1===e.refer.state.pageNum&&r.push(n.a.createElement(we,{global:e.global,key:a.id,attribute:a,refer:e.refer}))}),a=n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(R.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.attributes.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",n.a.createElement("div",{style:{width:75}},"# Per Page"," ",n.a.createElement(S.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),n.a.createElement("div",null,n.a.createElement("h3",null,e.type,"Attributes (",e.attributes.length,")"),n.a.createElement(u.b,{to:"/attributes/add"},n.a.createElement("button",null,"Add attribute")),a,r,a)};class we extends r.Component{constructor(e){var t;super(e),t=this,this.handleMembersChange=function(){var e=Object(c.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a||(a=[]),t.props.refer.setState({saving:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._loadData=Object(c.a)(i.a.mark((function e(){var a,r,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r={},t.setState({loading:!0}),e.prev=3,e.next=6,Promise.all([Object(O.k)(a,t.props.id)]);case 6:n=e.sent,s=Object(q.a)(n,1),r=s[0],e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(3),Object(O.A)(e.t0,"Unable to load attribute info."),e.abrupt("return",t.setState({loading:!1}));case 15:t.setState({attribute:r,loading:!1});case 16:case"end":return e.stop()}}),e,null,[[3,11]])}))),this.onSave=function(){var e=Object(c.a)(i.a.mark((function e(a,r){var n,s,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state,s=n.global,l=n.attribute,t.setState({saving:!0}),(o={id:l.id})[a]=r,e.prev=4,e.next=7,Object(O.g)(s,"/attribute/update","POST",o);case 7:Object(O.B)("Attribute has been updated."),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),Object(O.A)(e.t0,"Unable to update Attribute.");case 13:t._loadData();case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,a){return e.apply(this,arguments)}}(),this.state={global:e.global,attribute:this.props.attribute,selectedMembersOption:[]},this.onSaveName=this.onSaveName.bind(this),this.onSaveType=this.onSaveType.bind(this)}componentDidMount(){this.state.attribute||this._loadData()}onSaveName(e){this.onSave("name",e)}onSaveType(e){this.onSave("type",e)}render(){const e=this.state.attribute;return!e||this.state.loading?n.a.createElement(E.a,null):n.a.createElement("div",null,n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{flex:1,overflow:"auto",padding:"5px 10px"}},n.a.createElement(ie.a,null)," ",e.name," ",this.props.edit?"":n.a.createElement(u.b,{to:"/attributes/view/"+e.id},"view"))),this.props.edit?n.a.createElement(Ce,{attribute:e,onSaveName:this.onSaveName,onSaveType:this.onSaveType}):"")}}const Ce=({attribute:e,onSaveName:t,onSaveType:a})=>n.a.createElement("div",null,n.a.createElement("h1",null,n.a.createElement(Q.a,{type:"text",value:e.name,onSave:t,onSaveType:a})),n.a.createElement(S.a,{value:ye(e.type),onChange:a,options:ke,isMulti:!1,isSearchable:!0,placeholder:"Select an attribute type"}),JSON.stringify(e));var je=a(86),Te=a(139),Pe=a.n(Te),Ne=a(85);const Ae=(e,t)=>(...a)=>t(e(...a)),De=[{header:"Import File",tooltip:"The file name of the imported file.",params:["filename"]},{header:"Upload Time",tooltip:"The time it took the file to go from the uploader's computer to the server.",func:O.z,params:["created","submitted"]},{header:"Queue Delay",tooltip:"The time this import had to wait in queue for other jobs to finish.",func:O.z,params:["submitted","parse_start"]},{header:"Parse time",tooltip:"The time it took to aggregate address, people, and attribute data into the database.",func:O.z,params:["parse_start","parse_end"]},{header:"Record Count",tooltip:"The number of unique records contained in the import file.",func:O.y,params:["num_records"]},{header:"Geocode Time",tooltip:"The time it took the system to geocode the addresses in the import file.",func:O.z,params:["geocode_start","geocode_end"]},{header:"Dedupe Time",tooltip:"The time it took the system to identify and remove duplicates as a result of this import.",func:O.z,params:["dedupe_start","dedupe_end"]},{header:"Turf Index Time",tooltip:"The time it took the system to index each address to turfs it belongs to.",func:O.z,params:["turfadd_start","turfadd_end"]},{header:"Address Index Time",tooltip:"The time it took to add these addresses to the master database index.",func:O.z,params:["index_start","index_end"]},{header:"Total Time",tooltip:"The total time the import took from file upload start to complete finish.",func:O.z,params:["created","completed"]}];class _e extends n.a.Component{constructor(e){super(e),this.formatHeaders=e=>e.map(e=>({value:e,label:e})),this.updateFormats=(e,t)=>this.setState({formats:Object(je.a)({},this.state.formats,{[e]:t})},()=>this.updateMapped()),this.updateMapped=()=>this.setState({mapped:this.mapData(this.state)||[]},()=>{const e=Object.keys(this.state.formats).map(e=>{if(this.state.formats[e]&&this.state.formats[e].value&&this.state.formats[e].value.length>0)return e});e.filter(e=>e);this.props.getMapped&&this.props.getMapped(this.state.mapped,e)}),this.mapData=({formats:e,fields:t})=>((...e)=>e.reduce(Ae))(this.generateFormats,this.getAllIndexes,this.parseData)(e,t),this.generateFormats=(e,t)=>Pe()(t,t=>e[t]?{name:t,format:e[t]}:{name:t,format:null}),this.getAllIndexes=e=>Pe()(e,({name:e,format:t})=>{if(t&&Array.isArray(t.value)){const a=t.value.map(e=>this.state.headers.findIndex(t=>t===e.value));return{name:e,format:t,indexes:a}}if(t){const a=this.state.headers.findIndex(e=>t.value&&e===t.value.value);return{name:e,format:t,indexes:a}}return{name:e,format:t,indexes:null}}),this.parseData=e=>{const t=this.state.data;return Pe()(t,t=>Pe()(e,({indexes:e,format:a})=>e&&Array.isArray(e)?e.reduce((e,a)=>"".concat(e.trim()," ").concat(t[a].trim()),"").trim():e&&t[e]?t[e].split(a.map1.value)[a.map2.value]:""))},this.state={data:this.props.data||[],headers:this.props.headers||[],fields:e.fields,formats:{},mapped:[]}}render(){const e=this.updateFormats,t=void 0===e?()=>console.warn("Cannot find update format function."):e,a=this.props.fields,r=void 0===a?[]:a,s=this.state.headers,l=void 0===s?[]:s,o=this.formatHeaders(l);return n.a.createElement(n.a.Fragment,null,r.map(e=>n.a.createElement(Ne.a,{key:e,label:e,updateFormats:t,options:o,checkbox:!0,isMulti:!0})))}}const Ie=({data:e,title:t})=>n.a.createElement("div",{className:"records-wrapper"},e.map(e=>n.a.createElement("div",{className:"preview-item  ".concat(t?" preview-title":""),key:"".concat(e).concat(3444*Math.random())},n.a.createElement("div",{style:{width:250}},""!==e?e:"NULL"))));a(909);function Fe(){return parseInt(1e3*Math.random())}const Ue=({titles:e,records:t})=>n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Sample Records based on selection"),n.a.createElement("div",{key:"".concat(e).concat(t),style:{display:"flex"}},n.a.createElement(Ie,{key:"".concat(e).concat(Fe()),data:e,title:!0}),t.map(e=>n.a.createElement(Ie,{key:"".concat(e).concat(Fe()),data:e}))));var Me=a(459),Le=a.n(Me),Ve=a(296),qe=a.n(Ve),He=a(1003),Re=a(460),Qe=a.n(Re);const Be={loading:!1,sending:!1,data:null,headers:[],mapped:[],perPage:localStorage.getItem("importsperpage")||5,pageNum:1,submitting:!1,completed:0};class We extends r.Component{constructor(e){var t;super(e),t=this,this.preProcess=function(){var e=Object(c.a)(i.a.mark((function e(a,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.shift(),a.pop(),t.setState({data:a,headers:n,filename:r});case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.getRequiredFields=function(){var e=Object(c.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,Object(O.g)(t,"/import/required-fields");case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Object(O.A)(e.t0,"Unable to load required fields.");case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),this.sendData=Object(c.a)(i.a.mark((function e(){var a,r,n,s,l,o,c,u,d,p,m,h,b,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state.required.every(e=>-1!==t.state.mappedAttributes.indexOf(t.state.fields[e]))){e.next=4;break}return Object(O.A)(null,"Required fields: ".concat(t.state.required.map(e=>t.state.fields[e]))),e.abrupt("return");case 4:return a=t.state,r=a.global,n=a.fields,s=a.mapped,l=a.filename,a.required,o=s.length,t.setState({sending:!0,completed:1}),e.next=9,Object(O.g)(r,"/import/begin","POST",{filename:l.name,attributes:n.filter((e,t)=>t>=8)});case 9:u=(c=["#","apt","unit","ste","spc"]).map(e=>new RegExp(".* "+e+" ","i")),d=c.map(e=>new RegExp(" "+e+" .*","i"));case 12:if(!s.length){e.next=38;break}p=[],m=0;case 15:if(!(m<1e3)){e.next=32;break}if(!s.length){e.next=29;break}if((h=s.pop())[3]){e.next=28;break}e.t0=i.a.keys(c);case 20:if((e.t1=e.t0()).done){e.next=28;break}if(b=e.t1.value,!h[2].match(u[b])){e.next=26;break}return h[3]=h[2].replace(u[b],"").trim(),h[2]=h[2].replace(d[b],"").trim(),e.abrupt("break",28);case 26:e.next=20;break;case 28:p.push(h);case 29:m++,e.next=15;break;case 32:return e.next=34,Object(O.g)(r,"/import/add","POST",{filename:l.name,data:p});case 34:f=Math.ceil((o-s.length)/o*100),t.setState({completed:f}),e.next=12;break;case 38:return e.next=40,Object(O.g)(r,"/import/end","POST",{filename:l.name});case 40:t.setState({completed:!0}),Object(O.B)("Upload complete! An import job has been queued and will process soon."),setTimeout(()=>{t.setState({sending:!1}),t._loadData()},3e3);case 43:case"end":return e.stop()}}),e)}))),this._loadData=Object(c.a)(i.a.mark((function e(){var a,r,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r=[],n=[],s=[],t.setState({loading:!0}),e.prev=5,e.next=8,Object(O.l)(a);case 8:return n=e.sent,e.next=11,Object(O.o)(a);case 11:return r=e.sent,e.next=14,t.getRequiredFields(a);case 14:s=e.sent,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),Object(O.A)(e.t0,"Unable to load import data.");case 20:t.setState({loading:!1,imports:r,attributes:n,required:s},()=>{t._resetState()});case 21:case"end":return e.stop()}}),e,null,[[5,17]])}))),this._resetState=()=>this.setState(Object(je.a)({},Be)),this.getMapped=(e,t)=>this.setState({mapped:e,mappedAttributes:t}),this.handlePageClick=e=>{this.setState({pageNum:e.selected+1})},this.state=Object(je.a)({global:e.global,imports:[],attributes:[],fields:["Unique Record ID","Street Address","Unit","City","State","Zip","Longitude","Latitude"],required:[],mappedAttributes:[]},Be)}componentDidMount(){this._loadData()}preProcessError(e){Object(O.A)(e,"Failed to preprocess the import file.")}render(){const e=this.state,t=e.mapped,a=void 0===t?[]:t,r=e.data,s=void 0===r?[]:r,l=e.headers,o=void 0===l?[]:l,i=e.attributes,c=e.fields,u=e.perPage,d=e.pageNum,p=e.imports,m=e.loading,h=e.completed;return m?n.a.createElement(E.a,null):o.length?n.a.createElement("div",null,n.a.createElement(Ne.c,{title:"Uploading import file...",completed:h}),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(ie.a,null),n.a.createElement("h3",null,"Import Data")," \xa0\xa0\xa0"),n.a.createElement(_e,{headers:o,fields:c,data:s,getMapped:this.getMapped}),n.a.createElement(He.a,{variant:"middle"}),n.a.createElement("br",null),n.a.createElement(S.a,{value:this.state.selectedAttribute,options:i.filter(e=>-1===c.indexOf(e.label)).map(e=>({value:e.id,label:e.name})),onChange:e=>this.setState({selectedAttribute:e}),isMulti:!1,isSearchable:!0,placeholder:"Select an attribute"}),n.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:()=>{let e=this.state,t=e.fields,a=e.selectedAttribute;a&&(t.push(a.label),this.setState({fields:t,selectedAttribute:null}))}},n.a.createElement(Qe.a,null)," Add Attribute",n.a.createElement(He.a,{variant:"middle"})),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(He.a,{variant:"middle"}),n.a.createElement("br",null),n.a.createElement(qe.a,{disabled:this.state.sending,variant:"contained",color:"primary",onClick:()=>this.sendData()},"Import"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(He.a,{variant:"middle"}),n.a.createElement(Ue,{key:this,titles:c,records:a.slice(0,3)})):n.a.createElement("div",null,n.a.createElement(Le.a,{label:"Data Importa",onError:this.preProcessError,onFileLoaded:this.preProcess}),n.a.createElement("br",null),n.a.createElement("h3",null,"Select a CSV file to get to the next menu!"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(O.e,{flag:this.state.loading,func:()=>this._loadData()},n.a.createElement(Ne.b,{perPage:u,pageNum:d,spec:De,rows:p,handlePageClick:this.handlePageClick,handlePageNumChange:this.handlePageNumChange})))}}const ze=e=>"boolean"===typeof e.success?e.success?"successful":"failed":e.started?"running":"waiting",Ge=e=>e.error?e.error:null,Je=(e,t)=>{switch(e){case"ImportFile":return"Import file "+t.filename;case"Turf":return"Turf "+t.name;default:return"Unknown"}};class Ye extends r.Component{constructor(e){var t;super(e),t=this,this._loadData=Object(c.a)(i.a.mark((function e(){var a,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state.global,r=[],t.setState({loading:!0}),e.next=5,Object(O.g)(a,"/queue/list");case 5:(n=e.sent).data&&(r=n.data.map(e=>{let t=e[0];return t.type=e[1],t.obj=e[2],t})),t.setState({rows:r,loading:!1});case 8:case"end":return e.stop()}}),e)}))),this.state={rows:[],global:e.global}}componentDidMount(){this._loadData()}render(){const e=this.state.rows;return n.a.createElement(O.e,{flag:this.state.loading,func:()=>this._loadData()},n.a.createElement(Ne.b,{spec:[{header:"Enqueu Time",tooltip:"The date/time that this job entered the queue.",func:O.C,params:["created"]},{header:"Task",tooltip:"The operation that this queue manages.",params:["task"]},{header:"Queue Delay",tooltip:"The time this task had to wait in queue for other jobs to finish.",func:O.z,params:["created","started"]},{header:"Runtime",tooltip:"The time it took for this task to complete.",func:O.z,params:["started","completed"]},{header:"Status",tooltip:"The status of this particular task.",func:ze,funcItemTooltip:Ge},{header:"Task Reference",tooltip:"The particular item that queued task was processing.",func:Je,params:["type","obj"]}],rows:e}))}}var Ke=a(1004),Xe=a(477),Ze=a(143),$e=a(163),et=a.n($e);var tt=e=>({main:{width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit,[e.breakpoints.up(400+3*e.spacing.unit*2)]:{width:400,marginLeft:"auto",marginRight:"auto"}},paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(je.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:175,width:"calc(100% - ".concat(175,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:175,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:{overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:7*e.spacing.unit,[e.breakpoints.up("sm")]:{width:9*e.spacing.unit}},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit,height:"100vh",overflow:"auto"},chartContainer:{marginLeft:-22},tableContainer:{height:320},h5:{marginBottom:2*e.spacing.unit}});class at extends r.Component{constructor(e){super(e),this.state={classes:e.classes}}render(){const e=this.state.classes;return n.a.createElement("main",{className:e.main},n.a.createElement(Ke.a,null),n.a.createElement(Xe.a,{className:e.paper},n.a.createElement(Ze.a,{component:"h1",variant:"h5"},"HelloVoterHQ is loading..."),n.a.createElement(E.a,{height:15})),n.a.createElement("br",null),n.a.createElement("center",null,"Built with ",n.a.createElement("span",{role:"img","aria-label":"Love"},"\u2764\ufe0f")," by Our Voice USA"))}}var rt=et()(tt)(at),nt=a(483),st=a(997),lt=a(461),ot=a.n(lt);class it extends r.Component{constructor(e){super(e);let t,a=[];Object({NODE_ENV:"production",PUBLIC_URL:"/HelloVoterHQ",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_VERSION:"2.1.0",REACT_APP_NAME:"HelloVoterHQ"}).REACT_APP_NO_AUTH||(a=[{label:"Organization ID",value:"org"},{label:"3rd Party Server",value:"server"}]);try{this.props.location.pathname.match(/\/jwt\//)&&(t=this.props.location.pathname.split("/").pop())}catch(r){console.warn(r)}this.state={global:e.global,dev:!1,classes:e.classes,token:t,selectedLoginOption:a[0],loginOptions:a}}componentDidMount(){const e=this.state.token;e&&(localStorage.setItem("jwt",e),setTimeout(()=>{window.location.href="/HelloVoterHQ/#/"},500),setTimeout(()=>{window.location.reload()},1500))}render(){const e=this.state,t=e.global,a=e.classes,r=e.token,s=e.loginOptions,l=e.selectedLoginOption;return r?n.a.createElement(rt,{classes:a}):n.a.createElement("main",{className:a.main},n.a.createElement(Ke.a,null),n.a.createElement(Xe.a,{className:a.paper},n.a.createElement(nt.a,{className:a.avatar},n.a.createElement(ot.a,null)),n.a.createElement(Ze.a,{component:"h1",variant:"h5"},"Sign in to HelloVoterHQ"),n.a.createElement("form",{className:a.form,onSubmit:e=>{e.preventDefault(),t.doSave(e,this.state.target)}},n.a.createElement(S.a,{value:l,options:s,onChange:e=>this.setState({selectedLoginOption:e})}),n.a.createElement("center",null,n.a.createElement("br",null),"\xa0 || \xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://raw.githubusercontent.com/OurVoiceUSA/HelloVoter/master/docs/Privacy-Policy.md"},"Privacy Policy"),"\xa0 || \xa0",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://raw.githubusercontent.com/OurVoiceUSA/HelloVoter/master/docs/Terms-of-Service.md"},"Terms of Service"),"\xa0 || \xa0"),n.a.createElement(ct,{global:t,refer:this}),Object({NODE_ENV:"production",PUBLIC_URL:"/HelloVoterHQ",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_VERSION:"2.1.0",REACT_APP_NAME:"HelloVoterHQ"}).REACT_APP_NO_AUTH&&n.a.createElement(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:()=>this.setState({target:"none"})},"Sign In")||n.a.createElement("div",null,n.a.createElement(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:()=>this.setState({target:"google"})},"Google Sign In"),n.a.createElement(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",onClick:()=>this.setState({target:"facebook"}),className:a.submit},"Facebook Sign In")))),n.a.createElement("br",null),n.a.createElement("center",null,"Built with ",n.a.createElement("span",{role:"img","aria-label":"Love"},"\u2764\ufe0f")," by Our Voice USA",n.a.createElement("p",null),"Not for any candidate or political party.",n.a.createElement("p",null),"Copyright (c) 2020, Our Voice USA. All rights reserved.",n.a.createElement("p",null),"This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version."))}}const ct=e=>{switch(e.refer.state.selectedLoginOption.value){case"org":return n.a.createElement("div",null,n.a.createElement(ue.a,{margin:"normal",required:!0,fullWidth:!0},n.a.createElement(me.a,{htmlFor:"domain"},"Enter your Organization ID. Example: NCC1701"),n.a.createElement(st.a,{id:"orgId",name:"orgId",autoComplete:"orgId",autoFocus:!0,defaultValue:e.global.state.orgId})),n.a.createElement(ce.a,{control:n.a.createElement(w.a,{value:"ack",color:"primary",required:!0}),label:"By checking this box you acknowledge that you have read and agreed to our Terms of Service."}));case"server":return n.a.createElement("div",null,n.a.createElement(ue.a,{margin:"normal",required:!0,fullWidth:!0},n.a.createElement(me.a,{htmlFor:"domain"},"Server Address"),n.a.createElement(st.a,{id:"server",name:"server",autoComplete:"server",autoFocus:!0,defaultValue:e.global.state.qserver})),n.a.createElement(ce.a,{control:n.a.createElement(w.a,{value:"ack",color:"primary",required:!0}),label:"By checking this box you acknowledge that the server to which you are connecting is not affiliated with Our Voice USA and the data you send and receive is governed by that server's Terms of Service."}));default:return null}};var ut=et()(tt)(it);var dt=({menuLogout:e,handleCloseLogout:t,_logout:a})=>n.a.createElement(ne.a,{open:e,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(se.a,{id:"alert-dialog-title"},"Are you sure you wish to logout?"),n.a.createElement(le.a,null,n.a.createElement(J.a,{onClick:t,color:"primary",autoFocus:!0},"No"),n.a.createElement(J.a,{onClick:()=>a(),color:"primary"},"Yes")));a(430);class pt extends r.Component{render(){return n.a.createElement("div",null,"Settings Component")}}var mt=a(94),ht=a(1005),bt=a(996),ft=a(463),gt=a.n(ft),vt=a(10),Et=a.n(vt);var Ot=({classes:e,global:t,open:a,handleDrawerOpen:r,getUserProp:s})=>n.a.createElement(ht.a,{position:"absolute",className:Et()(e.appBar,a&&e.appBarShift)},n.a.createElement(bt.a,{disableGutters:!a,className:e.toolbar},n.a.createElement(pe.a,{color:"inherit","aria-label":"Open drawer",onClick:r,className:Et()(e.menuButton,a&&e.menuButtonHidden)},n.a.createElement(gt.a,null)),n.a.createElement(Ze.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:e.title},n.a.createElement("div",{style:{margin:10}},"HelloVoterHQ ",t.state.orgId?"Organization ID: "+t.state.orgId:"@ "+t.state.server)),n.a.createElement(nt.a,{alt:"Remy Sharp",src:s("avatar"),className:e.avatar}))),yt=a(1011),kt=a(475),xt=a.n(kt),St=a(1006),wt=a(464),Ct=a.n(wt),jt=a(465),Tt=a.n(jt),Pt=a(466),Nt=a.n(Pt),At=a(467),Dt=a.n(At),_t=a(468),It=a.n(_t),Ft=a(469),Ut=a.n(Ft),Mt=a(470),Lt=a.n(Mt),Vt=a(471),qt=a.n(Vt),Ht=a(472),Rt=a.n(Ht),Qt=a(473),Bt=a.n(Qt),Wt=a(474),zt=a.n(Wt);var Gt=({assignments:e,handleClickLogout:t,experimental:a})=>n.a.createElement(r.Fragment,null,n.a.createElement(B.a,null,n.a.createElement(u.b,{to:"/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(Ct.a,null)),n.a.createElement(z.a,{primary:"Dashboard"}))),n.a.createElement(u.b,{to:"/volunteers/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(Tt.a,null)),n.a.createElement(z.a,{primary:"Volunteers"}))),n.a.createElement(u.b,{to:"/turf/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(Nt.a,null)),n.a.createElement(z.a,{primary:"Turf"}))),n.a.createElement(u.b,{to:"/forms/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(Dt.a,null)),n.a.createElement(z.a,{primary:"Forms"}))),e.admin&&n.a.createElement("div",null,n.a.createElement(u.b,{to:"/qrcode/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(It.a,null)),n.a.createElement(z.a,{primary:"QR Codes"}))),n.a.createElement(u.b,{to:"/attributes/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(ie.a,null)),n.a.createElement(z.a,{primary:"Attributes"}))),n.a.createElement(u.b,{to:"/import/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(Ut.a,null)),n.a.createElement(z.a,{primary:"Import Data"}))),n.a.createElement(u.b,{to:"/queue/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(Lt.a,null)),n.a.createElement(z.a,{primary:"System Queue"}))),n.a.createElement(u.b,{to:"/analytics/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(qt.a,null)),n.a.createElement(z.a,{primary:"Analytics"}))))),n.a.createElement(He.a,null),n.a.createElement(B.a,null,n.a.createElement(W.a,{button:!0,onClick:t},n.a.createElement(St.a,null,n.a.createElement(Rt.a,null)),n.a.createElement(z.a,{primary:"Logout"}))),n.a.createElement(He.a,null),n.a.createElement(B.a,null,n.a.createElement(u.b,{to:"/about/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(Bt.a,null)),n.a.createElement(z.a,{primary:"About"}))),n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/tree/master/docs/"},n.a.createElement(W.a,{button:!0},n.a.createElement(St.a,null,n.a.createElement(zt.a,null)),n.a.createElement(z.a,{primary:"Help"})))));var Jt=({classes:e,open:t,assignments:a,experimental:r,handleClickLogout:s,handleDrawerClose:l})=>n.a.createElement(yt.a,{variant:"permanent",classes:{paper:Et()(e.drawerPaper,!t&&e.drawerPaperClose)},open:t},n.a.createElement("div",{className:e.toolbarIcon},n.a.createElement(pe.a,{onClick:l},n.a.createElement(xt.a,null))),n.a.createElement(He.a,null),n.a.createElement(Gt,{assignments:a,handleClickLogout:s,experimental:r}));var Yt=({location:e})=>n.a.createElement("div",null,n.a.createElement("h1",null,"OOOPS!!"),n.a.createElement("div",null,"We can't seem to find the page you're looking for:",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("code",null,e.pathname),n.a.createElement("br",null),n.a.createElement("br",null),"If you feel this page is in error,"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/issues/new"},"report an issue")," ","and the coders will take a look."));var Kt=({global:e,experimental:t})=>n.a.createElement(d.c,null,n.a.createElement(d.a,{exact:!0,path:"/",render:()=>n.a.createElement(L,{global:e})}),n.a.createElement(d.a,{path:"/jwt/",render:t=>n.a.createElement(ut,Object.assign({},t,{global:e}))}),n.a.createElement(d.a,{path:"/volunteers/",render:()=>n.a.createElement(mt.b,{global:e})}),n.a.createElement(d.a,{path:"/turf/",render:()=>n.a.createElement(j.c,{global:e})}),n.a.createElement(d.a,{path:"/forms/",render:()=>n.a.createElement(V.d,{global:e})}),n.a.createElement(d.a,{path:"/qrcode/",render:()=>n.a.createElement(Z,{global:e})}),n.a.createElement(d.a,{path:"/attributes/",render:()=>n.a.createElement(xe,{global:e})}),n.a.createElement(d.a,{path:"/import/",render:()=>n.a.createElement(We,{global:e})}),n.a.createElement(d.a,{path:"/queue/",render:()=>n.a.createElement(Ye,{global:e})}),n.a.createElement(d.a,{path:"/analytics/",render:()=>n.a.createElement(P,{global:e})}),n.a.createElement(d.a,{path:"/settings/",render:()=>n.a.createElement(pt,{global:e})}),n.a.createElement(d.a,{path:"/about/",render:()=>n.a.createElement(x,{global:e})}),n.a.createElement(d.a,{component:Yt})),Xt=(a(945),a(7));class Zt extends r.Component{constructor(e){var t;super(e),t=this,this._loadData=Object(c.a)(i.a.mark((function e(){var a,r,n,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state,r=a.server,n=a.token,s=a.orgId,t.setState({loading:!0}),l={error:!0},e.prev=3,!r||!n){e.next=10;break}return e.next=7,t.singHello(r,b.a.decode(n).id.split(":")[0],n,s);case 7:l=e.sent,e.next=11;break;case 10:throw new Error("missing server or token");case 11:if(!l.error){e.next=13;break}throw new Error("hai error");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),n&&r&&(t.setState({server:null,token:null,orgId:null}),localStorage.clear(),console.warn("Cleaning localStorage")),console.warn(e.t0);case 19:t.setState({loading:!1,assignments:l.data?l.data:{}},()=>t._loadKeys());case 20:case"end":return e.stop()}}),e,null,[[3,15]])}))),this._loadKeys=Object(c.a)(i.a.mark((function e(){var a,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state.global,!t.state.google_maps_key){e.next=3;break}return e.abrupt("return");case 3:if(t.state.server){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,Object(O.g)(a,"/google_maps_key");case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(n=document.createElement("script")).type="text/javascript",n.src="https://maps.googleapis.com/maps/api/js?key="+r.google_maps_key+"&libraries=places",document.head.appendChild(n),t.setState({google_maps_key:r.google_maps_key}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.warn(e.t0);case 21:case"end":return e.stop()}}),e,null,[[5,18]])}))),this.handleClickLogout=()=>{this.setState({menuLogout:!0})},this.handleCloseLogout=()=>{this.setState({menuLogout:!1})},this.onChange=e=>{this.setState({connectForm:e})},this.getUserProp=e=>{let t;if(!this.state.token)return null;try{t=b.a.decode(this.state.token)[e]}catch(a){Object(O.A)(a,"Holy crap this error should never happen!! Better dust off that r\xe9sum\xe9..."),console.warn(a)}return t},this._logout=()=>{localStorage.clear(),this.setState({menuLogout:!1,server:null,token:null,orgId:null})},this.doSave=function(){var e=Object(c.a)(i.a.mark((function e(a,r){var n,s,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.target.orgId?(s=a.target.orgId.value,l=s.substring(0,2).toLowerCase(),n="gotv-"+l+".ourvoiceusa.org"):n=a.target.server?a.target.server.value:window.location.host.replace(":3000",":8080"),!Object({NODE_ENV:"production",PUBLIC_URL:"/HelloVoterHQ",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_VERSION:"2.1.0",REACT_APP_NAME:"HelloVoterHQ"}).REACT_APP_NO_AUTH){e.next=7;break}o="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Im5vYXV0aDpsb2NhbHVzZXIiLCJuYW1lIjoiTG9jYWwgVXNlciIsImVtYWlsIjoibG9jYWxAbG9jYWxob3N0IiwiaXNzIjoib3Vydm9pY2V1c2Eub3JnIiwiaWF0IjoxLCJleHAiOjIsImRpc2NsYWltZXIiOiJCbGFoIGJsYWggZGlzY2xhaW1lciJ9.qa5K2pgi1uLYkV7jP3aNvazcchvgBD8RwhdG6Q86GxlvusQx7nNCTr3LrAnn6pxDJxNidJoqjD3Ie77jj5hWK_-lbgtHMLhNXGExDxI8pQ0I5ZnAV_5pDu7vARinoy3mctQWFO2pIQSu8KzQc7eQ90IQZBseE7nQV-ugZRfK8Teo_48COcJxGxqwCNCO80G_JzBoif2xaWRb2i2n0qeSUKfXN4Fwy46JOiHFnL9yOS5s54tB6doe1wFJNYps8eVQbVkTBL1I9PQP4Gs-BmzND0vcQaczTdu_J50uvLL5do1FHb48lRhrA44ZrYv3EVwNsJXZtH3MbasxgPrZhl69VQ",localStorage.setItem("jwt",o),t.setState({token:o},()=>t.singHello(n,r,null,s)),e.next=9;break;case 7:return e.next=9,t.singHello(n,r,null,s);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.singHello=function(){var e=Object(c.a)(i.a.mark((function e(a,r,n,s){var l,o,c,u,d,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("server",a),s&&localStorage.setItem("orgId",s),t.setState({server:a,orgId:s}),o=!0,a.match(/:8080$/)&&(o=!1),e.prev=5,c=!0;case 7:if(!c){e.next=19;break}return e.next=10,fetch("http"+(o?"s":"")+"://"+a+"/HelloVoterHQ/"+(s?s+"/":"")+"api/v1/hello",{method:"POST",headers:{Authorization:"Bearer "+(n||(t.state.token?t.state.token:"of the one ring")),"Content-Type":"application/json"}});case 10:if(418!==(l=e.sent).status){e.next=16;break}return e.next=14,Object(m.sleep)(12345);case 14:e.next=17;break;case 16:c=!1;case 17:e.next=7;break;case 19:if(u=l.headers.get("x-sm-oauth-url")){e.next=22;break}return e.abrupt("return",{error:!0,msg:"Missing required header."});case 22:e.t0=l.status,e.next=200===e.t0?25:400===e.t0?26:401===e.t0?27:403===e.t0?32:33;break;case 25:return e.abrupt("break",34);case 26:return e.abrupt("return",{error:!0,msg:"The server didn't understand the request sent from this device."});case 27:return d="","google"===r&&(d="gm"),"facebook"===r&&(d="fm"),setTimeout(()=>{window.location.href=u+"/"+d+"/?app=HelloVoterHQ"+(o?"":"&local=true")},500),e.abrupt("return",{error:!1,flag:!0});case 32:return e.abrupt("return",{error:!0,msg:"We're sorry, but your request to volunteer with this server has been rejected."});case 33:return e.abrupt("return",{error:!0,msg:"Unknown error connecting to server."});case 34:return e.next=36,l.json();case 36:if(!0===(p=e.sent).data.ready){e.next=41;break}return e.abrupt("return",{error:!1,msg:"The server said: "+p.msg,data:p.data});case 41:return console.warn({user:t.state.user}),e.abrupt("return",{error:!1,flag:!0,data:p.data});case 43:e.next=49;break;case 45:return e.prev=45,e.t1=e.catch(5),console.warn("singHello: "+e.t1),e.abrupt("return",{error:!0,msg:"Unable to make a connection to target server"});case 49:case"end":return e.stop()}}),e,null,[[5,45]])})));return function(t,a,r,n){return e.apply(this,arguments)}}(),this.handleDrawerOpen=()=>{this.setState({open:!0})},this.handleDrawerClose=()=>{this.setState({open:!1})};const a=g.a.parse(window.location.search);this.state={global:e.global,assignments:{},loading:!0,open:!0,menuLogout:!1,server:localStorage.getItem("server"),token:localStorage.getItem("jwt"),orgId:localStorage.getItem("orgId"),experimental:!!localStorage.getItem("experimental"),qserver:a.server},console.log("%cWARNING: This is a developer console! If you were told to open this and copy/paste something, and you are not a javascript developer, it is a scam and entering info here could give them access to your account!","background: red; color: yellow; font-size: 45px")}componentDidMount(){this._loadData()}render(){const e=this.props.classes;let t=this.state,a=t.assignments,r=t.experimental,s=t.server,l=t.token;return t.loading?n.a.createElement(u.a,null,n.a.createElement(d.a,{path:"/",render:e=>n.a.createElement(rt,e)})):s&&l?n.a.createElement(u.a,null,n.a.createElement("div",{className:e.root},n.a.createElement(v.a,null),n.a.createElement(Ke.a,null),n.a.createElement(Ot,{open:this.state.open,classes:e,global:this,getUserProp:this.getUserProp,handleDrawerOpen:this.handleDrawerOpen}),n.a.createElement(Jt,{assignments:a,experimental:r,classes:e,open:this.state.open,getUserProp:this.getUserProp,handleClickLogout:this.handleClickLogout,handleDrawerClose:this.handleDrawerClose}),n.a.createElement("main",{className:e.content},n.a.createElement("div",{className:e.appBarSpacer}),n.a.createElement(p.NotificationContainer,null),n.a.createElement(Kt,{global:this,experimental:r}),n.a.createElement(dt,{menuLogout:this.state.menuLogout,handleCloseLogout:this.handleCloseLogout,_logout:this._logout})))):n.a.createElement(u.a,null,n.a.createElement(d.a,{path:"/",render:e=>n.a.createElement(ut,Object.assign({},e,{global:this}))}))}}var $t=Object(Xt.a)(tt)(Zt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement($t,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[526,1,2]]]);
//# sourceMappingURL=main.ca2be3fa.chunk.js.map