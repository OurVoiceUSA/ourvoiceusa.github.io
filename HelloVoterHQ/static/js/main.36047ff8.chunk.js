(window.webpackJsonpHelloVoterReact=window.webpackJsonpHelloVoterReact||[]).push([[0],{402:function(e,t,a){},489:function(e,t,a){e.exports=a(930)},494:function(e,t,a){},515:function(e,t){},517:function(e,t){},554:function(e,t){},555:function(e,t){},895:function(e,t,a){},896:function(e,t,a){},897:function(e,t,a){},930:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(21),o=a.n(s),l=(a(494),a(4)),c=a.n(l),i=a(10),u=a(12),d=a(11),p=a(14),m=a(15),f=a(16),h=a(26),v=a(66),b=a(148),g=(a(509),a(149)),E=a.n(g),y=a(405),O=a.n(y),k=a(150),x=a.n(k),S=a(972),w=a(406),j=a(31),C=a(93),T=a.n(C),D=a(407),P=a.n(D),I=a(408),N=a.n(I),_=a(936),F="/HelloVoterHQ/api/v1";function A(e,t){return t?N()(t-e):""}function M(e){b.NotificationManager.success(e,"Success",3e3)}function L(e,t){b.NotificationManager.error(t,"Error",6e3),console.warn(e)}function U(e,t,a,r){return V.apply(this,arguments)}function V(){return(V=Object(i.a)(c.a.mark(function e(t,a,r,n){var s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(s=!0,t.hostname.match(/^localhost/)&&(s=!1),r||(r="GET"),t.hostname){e.next=8;break}return L({},"API server definition error."),e.abrupt("return");case 8:return e.next=10,fetch("http"+(s?"s":"")+"://"+t.hostname+a,{method:r,headers:{Authorization:"Bearer "+t.jwt,"Content-Type":"application/json"},body:n?JSON.stringify(n):null});case 10:if(!((o=e.sent).status>=400)){e.next=17;break}return e.t0=Error,e.next=15,o.text();case 15:throw e.t1=e.sent,new e.t0(e.t1);case 17:return e.abrupt("return",o.json());case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}var H=function(e){return n.a.createElement(w.a,Object.assign({style:{width:25},"data-tip":e["data-tip"]?e["data-tip"]:e.icon.iconName},e))},B=function(e){return e.flag?n.a.createElement(S.a,null):n.a.createElement("div",null,n.a.createElement(H,{icon:j.p,color:"green",onClick:e.func,"data-tip":"Reload Data"}),n.a.createElement("div",null,e.children))},R=function(e){return e.flag?n.a.createElement(_.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:!0},n.a.createElement("div",{style:{position:"absolute",top:100,left:"40%",right:"40%",backgroundColor:"white",padding:40}},n.a.createElement("center",null,"Saving changes...",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(S.a,{disableShrink:!0})))):n.a.createElement("div",null)};function q(e){var t=JSON.parse(JSON.stringify(e));return delete t.last_seen,delete t.created,delete t.id,JSON.stringify(t).toLowerCase()}function W(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(i.a)(c.a.mark(function e(t){var a,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,U(t.state.server,F+"/import/list");case 4:r=e.sent,a=r&&r.data?r.data:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),L(e.t0,"Unable to load import info.");case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function z(e,t){return G.apply(this,arguments)}function G(){return(G=Object(i.a)(c.a.mark(function e(t,a){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,U(t.state.server,F+"/volunteer/get?id="+a);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to load volunteer info.");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function J(e,t,a){return Y.apply(this,arguments)}function Y(){return(Y=Object(i.a)(c.a.mark(function e(t,a,r){var n,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,s="volunteer/list","team"===a?s="team/members/list?teamId="+r:"turf"===a?s="turf/assigned/volunteer/list?turfId="+r:"form"===a&&(s="form/assigned/volunteer/list?formId="+r),e.next=6,U(t.props.server,F+"/"+s);case 6:n=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),L(e.t0,"Unable to load volunteer data.");case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function K(e,t){return X.apply(this,arguments)}function X(){return(X=Object(i.a)(c.a.mark(function e(t,a){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,U(t.state.server,F+"/turf/get?turfId="+a);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to load turf data.");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function Z(e,t,a){return $.apply(this,arguments)}function $(){return($=Object(i.a)(c.a.mark(function e(t,a,r){var n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,s="turf/list"+(r?"?geometry=true":""),a&&(s="team/turf/list?teamId="+a+(r?"&geometry=true":"")),e.next=6,U(t.props.server,F+"/"+s);case 6:o=e.sent,n=o.data?o.data:[],e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),L(e.t0,"Unable to load turf data.");case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function ee(e,t,a,r){return te.apply(this,arguments)}function te(){return(te=Object(i.a)(c.a.mark(function e(t,a,r,n){var s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.prev=1,e.next=4,U(t.props.server,F+"/turf/list/byposition?longitude="+a+"&latitude="+r+(n?"&dist="+n:""));case 4:o=e.sent,s=o.data?o.data:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),L(e.t0,"Unable to load turf data.");case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function ae(e,t){return re.apply(this,arguments)}function re(){return(re=Object(i.a)(c.a.mark(function e(t,a){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,U(t.state.server,F+"/team/get?teamId="+a);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to load team data.");case 10:return e.abrupt("return",r.data[0]);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function ne(e,t,a){return se.apply(this,arguments)}function se(){return(se=Object(i.a)(c.a.mark(function e(t,a,r){var n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,s="team/list","turf"===a?s="turf/assigned/team/list?turfId="+r:"form"===a&&(s="form/assigned/team/list?formId="+r),e.next=6,U(t.props.server,F+"/"+s);case 6:o=e.sent,n=o.data?o.data:[],e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),L(e.t0,"Unable to load teams data.");case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function oe(e,t){return le.apply(this,arguments)}function le(){return(le=Object(i.a)(c.a.mark(function e(t,a){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,U(t.state.server,F+"/form/get?formId="+a);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to load form data.");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function ce(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(i.a)(c.a.mark(function e(t,a){var r,n,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,n=a?"team/form/list?teamId="+a:"form/list",e.next=5,U(t.props.server,F+"/"+n);case 5:s=e.sent,r=s.data?s.data:[],e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),L(e.t0,"Unable to load form data.");case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}},e,null,[[1,9]])}))).apply(this,arguments)}function ue(e){return de.apply(this,arguments)}function de(){return(de=Object(i.a)(c.a.mark(function e(t){var a,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.prev=1,e.next=4,U(t.props.server,F+"/attribute/list");case 4:r=e.sent,a=r.data?r.data:[],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),L(e.t0,"Unable to load attribute data.");case 11:return a.forEach(function(e){e.label||(e.label=e.name)}),e.abrupt("return",a);case 13:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function pe(e,t,a,r){return me.apply(this,arguments)}function me(){return(me=Object(i.a)(c.a.mark(function e(t,a,r,n){var s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.prev=1,e.next=4,U(t.props.server,F+"/address/get/byposition?limit=1000&longitude="+a+"&latitude="+r+(n?"&formId="+n:""));case 4:s=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to load address information.");case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function fe(e,t,a){return he.apply(this,arguments)}function he(){return(he=Object(i.a)(c.a.mark(function e(t,a,r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,e.next=4,U(t.props.server,F+"/people/get/byaddress?aId="+a+(r?"&formId="+r:""));case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to load address information.");case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function ve(e,t){var a=[],r=[];e||(e=[]),t||(t=[]);var n=e.map(function(e){return e.id}),s=t.map(function(e){return e.id});for(var o in s){var l=s[o];-1===n.indexOf(l)&&a.push(l)}for(var c in n){var i=n[c];-1===s.indexOf(i)&&r.push(i)}return{add:a,rm:r}}var be=function(e){return n.a.createElement(T.a,e,ge)},ge=function(e){var t=e.getInputProps,a=e.getSuggestionItemProps,r=e.suggestions,s=e.loading;return n.a.createElement("div",{className:"autocomplete-root"},n.a.createElement("input",t()),n.a.createElement("div",{className:"autocomplete-dropdown-container"},s&&n.a.createElement("div",null,"Loading..."),r.map(function(e){return n.a.createElement("div",a(e),n.a.createElement("span",null,e.description))})))},Ee=a(263),ye=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,U(a.props.server,F+"/dashboard");case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to load dashboard info.");case 10:a.setState({cb_version:t.version?t.version:"unknown",neo4j_version:t.neo4j_version?t.neo4j_version:"unknown"});case 11:case"end":return e.stop()}},e,null,[[1,7]])})),a.state={cb_version:null,neo4j_version:null},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",null,"HelloVoterReact"," version ","0.1.0"),n.a.createElement("div",null,this.state.cb_version?"HelloVoterAPI version "+this.state.cb_version:n.a.createElement(S.a,{height:15})),n.a.createElement("div",null,this.state.neo4j_version?"Neo4j version "+this.state.neo4j_version:n.a.createElement(S.a,{height:15})),n.a.createElement("div",null,"\xa9 2018, Our Voice USA, a 501(c)(3) Non-Profit Organization. Not for any candidate or political party."),n.a.createElement("div",null,"This program is free software; refer to our"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoterHQ/blob/master/LICENSE"},"License")," ","for more details."),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/OurVoiceUSA"},n.a.createElement(H,{icon:Ee.b})," @OurVoiceUSA")),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/OurVoiceUsa"},n.a.createElement(H,{icon:Ee.a})," @OurVoiceUSA")),n.a.createElement("div",null,n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ourvoiceusa.org/"},n.a.createElement(H,{icon:j.j})," ourvoiceusa.org")))}}]),t}(r.Component),Oe=a(3),ke=a(25),xe=a(1003),Se=a(127),we=a(19),je=a(91),Ce=a.n(je),Te=a(981),De=a(982),Pe=a(985),Ie=a(983),Ne=a(984),_e=a(976),Fe=a(7),Ae=a(42),Me=a.n(Ae),Le=a(977),Ue=a(978),Ve=a(979),He=a(128),Be=a(1001),Re=a(195),qe=a.n(Re);Be.a.locale(qe.a);var We=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a._deleteTeam=function(){var e=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({saving:!0,menuDelete:!1}),e.prev=1,e.next=4,U(a.props.server,F+"/team/delete","POST",{teamId:t});case 4:M("Team has been deleted."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to delete teams.");case 10:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/teams/",a._loadData();case 13:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a._createTeam=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.addTeamForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:return a.setState({saving:!0}),e.prev=4,e.next=7,U(a.props.server,F+"/team/create","POST",{name:t.name});case 7:M("Team has been created."),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),L(e.t0,"Unable to create team.");case 13:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/teams/",a._loadData();case 16:case"end":return e.stop()}},e,null,[[4,10]])})),a._loadData=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0,search:""}),t=[],e.prev=2,e.next=5,ne(Object(Oe.a)(a));case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),L(e.t0,"Unable to load volunteers.");case 11:a.setState({loading:!1,teams:t});case 12:case"end":return e.stop()}},e,null,[[2,8]])})),a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})};var r=localStorage.getItem("teamsperpage");return r||(r=5),a.state={loading:!0,teams:[],search:"",perPage:r,pageNum:1,menuDelete:!1},a.formServerItems=Me.a.struct({name:Me.a.String}),a.formServerOptions={fields:{server:{label:"Team Name",error:"You must enter a team name."}}},a.onTypeSearch=a.onTypeSearch.bind(Object(Oe.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(Oe.a)(a)),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"onChangeTeam",value:function(e){this.setState({addTeamForm:e})}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("teamsperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"render",value:function(){var e=this,t=[];return this.state.teams.forEach(function(a){e.state.search&&!q(a).includes(e.state.search)||t.push(a)}),n.a.createElement(h.a,null,n.a.createElement("div",null,n.a.createElement(v.b,{exact:!0,path:"/teams/",render:function(){return n.a.createElement(B,{flag:e.state.loading,func:e._loadData},"Search:"," ",n.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),n.a.createElement(Qe,{refer:e,teams:t}))}}),n.a.createElement(v.b,{exact:!0,path:"/teams/add",render:function(){return n.a.createElement("div",null,n.a.createElement(Me.a.form.Form,{ref:function(t){return e.addTeamForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTeam(t)},value:e.state.addTeamForm}),n.a.createElement("button",{onClick:function(){return e._createTeam()}},"Submit"))}}),n.a.createElement(v.b,{path:"/teams/view/:id",render:function(t){return n.a.createElement("div",null,n.a.createElement(ze,{key:t.match.params.id,id:t.match.params.id,edit:!0,refer:e}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(_e.a,{onClick:e.handleClickDelete,color:"primary"},"Delete Team"),n.a.createElement(Le.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(Ue.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this team?"),n.a.createElement(Ve.a,null,n.a.createElement(_e.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),n.a.createElement(_e.a,{onClick:function(){return e._deleteTeam(t.match.params.id)},color:"primary"},"Yes"))))}}),n.a.createElement(R,{flag:this.state.saving})))}}]),t}(r.Component),Qe=function(e){var t=e.refer.state.perPage,a=n.a.createElement("div",null),r=[];return e.teams.forEach(function(a,s){Math.floor(s/t)+1===e.refer.state.pageNum&&r.push(n.a.createElement(ze,{key:a.id,team:a,refer:e.refer}))}),a=n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(Ce.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.teams.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",n.a.createElement("div",{style:{width:75}},"# Per Page"," ",n.a.createElement(ke.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),n.a.createElement("div",null,n.a.createElement("h3",null,e.type,"Teams (",e.teams.length,")"),n.a.createElement(h.b,{to:"/teams/add"},n.a.createElement("button",null,"Add Team")),a,r,a)},ze=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleMembersChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedMembersOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/team/members/add","POST",{teamId:a.props.id,vId:r.add[n]});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/team/members/remove","POST",{teamId:a.props.id,vId:r.rm[s]});case 16:e.next=12;break;case 18:return e.next=20,ae(Object(Oe.a)(a),a.props.id);case 20:o=e.sent,M("Team assignments saved."),a.setState({selectedMembersOption:t,team:o}),e.next=28;break;case 25:e.prev=25,e.t4=e.catch(2),L(e.t4,"Unable to add/remove team members.");case 28:a.props.refer.setState({saving:!1});case 29:case"end":return e.stop()}},e,null,[[2,25]])}));return function(t){return e.apply(this,arguments)}}(),a.handleFormsChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedFormsOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/form/assigned/team/add","POST",{formId:r.add[n],teamId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/form/assigned/team/remove","POST",{formId:r.rm[s],teamId:a.props.id});case 16:e.next=12;break;case 18:return e.next=20,ae(Object(Oe.a)(a),a.props.id);case 20:o=e.sent,M("Form selection saved."),a.setState({teamn:o,selectedFormsOption:t}),e.next=28;break;case 25:e.prev=25,e.t4=e.catch(2),L(e.t4,"Unable to add/remove form.");case 28:a.props.refer.setState({saving:!1});case 29:case"end":return e.stop()}},e,null,[[2,25]])}));return function(t){return e.apply(this,arguments)}}(),a.handleTurfChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedTurfOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/turf/assigned/team/add","POST",{turfId:r.add[n],teamId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/turf/assigned/team/remove","POST",{turfId:r.rm[s],teamId:a.props.id});case 16:e.next=12;break;case 18:return e.next=20,ae(Object(Oe.a)(a),a.props.id);case 20:o=e.sent,M("Turf selection saved."),a.setState({team:o,selectedTurfOption:t}),e.next=28;break;case 25:e.prev=25,e.t4=e.catch(2),L(e.t4,"Unable to add/remove turf.");case 28:a.props.refer.setState({saving:!1});case 29:case"end":return e.stop()}},e,null,[[2,25]])}));return function(t){return e.apply(this,arguments)}}(),a._loadData=Object(i.a)(c.a.mark(function e(){var t,r,s,o,l,i,u,d,p,m,f,h,v,b,g;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r=[],s=[],o=[],l=[],i=[],u=[],a.setState({loading:!0}),e.prev=2,e.next=5,Promise.all([ae(Object(Oe.a)(a),a.props.id),J(a.props.refer),J(a.props.refer,"team",a.props.id),Z(a.props.refer,a.props.id),Z(a.props.refer),ce(a.props.refer,a.props.id),ce(a.props.refer)]);case 5:d=e.sent,p=Object(we.a)(d,7),t=p[0],r=p[1],s=p[2],o=p[3],l=p[4],i=p[5],u=p[6],e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(2),L(e.t0,"Unable to load team info."),e.abrupt("return",a.setState({loading:!1}));case 20:m=[],f=[],h=[],v=[],b=[],g=[],r.forEach(function(e){m.push({value:q(e),id:e.id,label:n.a.createElement(ct,{key:e.id,volunteer:e,refer:Object(Oe.a)(a)})})}),s.forEach(function(e){v.push({value:q(e),id:e.id,label:n.a.createElement(ct,{key:e.id,volunteer:e,refer:Object(Oe.a)(a)})})}),l.forEach(function(e){h.push({value:q(e),id:e.id,label:n.a.createElement(ft,{key:e.id,turf:e,refer:Object(Oe.a)(a)})})}),o.forEach(function(e){b.push({value:q(e),id:e.id,label:n.a.createElement(ft,{key:e.id,turf:e,refer:Object(Oe.a)(a)})})}),u.forEach(function(e){f.push({value:q(e),id:e.id,label:n.a.createElement(rt,{key:e.id,form:e,refer:Object(Oe.a)(a)})})}),i.forEach(function(e){g.push({value:q(e),id:e.id,label:n.a.createElement(rt,{key:e.id,form:e,refer:Object(Oe.a)(a)})})}),a.setState({team:t,memberOptions:m,turfOptions:h,formOptions:f,selectedMembersOption:v,selectedTurfOption:b,selectedFormsOption:g,loading:!1});case 33:case"end":return e.stop()}},e,null,[[2,16]])})),a.state={server:a.props.refer.props.server,team:a.props.team,selectedMembersOption:[],selectedFormsOption:[],selectedTurfOption:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.state.team||this._loadData()}},{key:"render",value:function(){var e=this.state.team;return!e||this.state.loading?n.a.createElement(S.a,null):n.a.createElement("div",null,n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{flex:1,overflow:"auto",padding:"5px 10px"}},n.a.createElement(H,{icon:j.r,style:{width:20,height:20,color:"gray"}})," ",e.name," ",this.props.edit?"":n.a.createElement(h.b,{to:"/teams/view/"+e.id},"view"))),this.props.edit?n.a.createElement(Ge,{team:e,refer:this}):"")}}]),t}(r.Component),Ge=function(e){return n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("div",null,"Members of this team:",n.a.createElement(ke.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.memberOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})),n.a.createElement("br",null),n.a.createElement("div",null,"Form this team is assigned to:",n.a.createElement(ke.a,{value:e.refer.state.selectedFormsOption,onChange:e.refer.handleFormsChange,options:e.refer.state.formOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),n.a.createElement("br",null),"Turf this team assigned to:",n.a.createElement(ke.a,{value:e.refer.state.selectedTurfOption,onChange:e.refer.handleTurfChange,options:e.refer.state.turfOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})))};function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}var Ye=Me.a.enums({String:"Text Input",TEXTBOX:"Large Text Box",Number:"Number",Boolean:"On/Off Switch",SAND:"Agree/Disagree"},"FTYPE"),Ke={key:Me.a.String,label:Me.a.String,type:Ye},Xe=function(e,t,a){var r=Array.from(e),n=r.splice(t,1),s=Object(we.a)(n,1)[0];return r.splice(a,0,s),r},Ze=function(e,t,a,r){var n=Array.from(e),s=Array.from(t),o=n.splice(a.index,1),l=Object(we.a)(o,1)[0];s.splice(r.index,0,l);var c={};return c[a.droppableId]=n,c[r.droppableId]=s,c},$e=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(a,!0).forEach(function(t){Object(Fe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({userSelect:"none",padding:16,margin:"0 0 ".concat(8,"px 0"),background:e?"lightgreen":"grey"},t)},et=function(e){return{background:e?"lightblue":"lightgrey",padding:8,width:250}},tt=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).getList=function(e){return a.state[a.id2List[e]]},a.onDragEnd=function(e){var t=e.source,r=e.destination;if(r)if(t.droppableId===r.droppableId){var n=Xe(a.getList(t.droppableId),t.index,r.index),s={attributes:n};"droppable2"===t.droppableId&&(s={attributes_selected:n}),a.setState(s)}else{var o=Ze(a.getList(t.droppableId),a.getList(r.droppableId),t,r);a.setState({attributes:o.droppable,attributes_selected:o.droppable2})}},a.handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})},a._loadData=Object(i.a)(c.a.mark(function e(){var t,r,n,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),t=[],r=[],n=[],s={},e.prev=4,e.next=7,ce(Object(Oe.a)(a));case 7:return t=e.sent,e.next=10,ue(Object(Oe.a)(a));case 10:(r=e.sent).forEach(function(e){s[e.id]={label:e.name,type:e.type,optional:!0,options:e.values}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),L(e.t0,"Unable to load forms.");case 17:a.setState({forms:t,attributes:r,attributes_selected:n,fields:s,loading:!1});case 18:case"end":return e.stop()}},e,null,[[4,14]])})),a._deleteForm=function(){var e=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({saving:!0,menuDelete:!1}),e.prev=1,e.next=4,U(a.props.server,F+"/form/delete","POST",{formId:t});case 4:M("Form has been deleted."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to delete form.");case 10:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/forms/",a._loadData();case 13:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a._createForm=Object(i.a)(c.a.mark(function e(){var t,r,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.addFormForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:if((r=t.name.trim()).match(/^[a-zA-Z0-9\-_ ]+$/)){e.next=7;break}return L({},"From name can only contain alphanumeric characters, and spaces and dashes."),e.abrupt("return");case 7:if(!(r.length>255)){e.next=10;break}return L({},"Form name cannot be longer than 255 characters."),e.abrupt("return");case 10:return a.setState({saving:!0}),e.prev=11,n={name:r,attributes:Object.keys(a.state.fields)},e.next=15,U(a.props.server,F+"/form/create","POST",n);case 15:M("Form has been created."),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),L(e.t0,"Unable to create form.");case 21:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/forms/",a._loadData();case 24:case"end":return e.stop()}},e,null,[[11,18]])}));var r=localStorage.getItem("formsperpage");r||(r=5);var n={},s=Object.keys(n);return a.mainForm=Me.a.struct({name:Me.a.String}),a.state={loading:!0,forms:[],attributes:[],attributes_selected:[],fields:n,order:s,customForm:null,search:"",perPage:r,pageNum:1,menuDelete:!1},a.id2List={droppable:"attributes",droppable2:"attributes_selected"},a.formServerItems=Me.a.struct({name:Me.a.String}),a.customFormItems=Me.a.struct(Ke),a.formServerOptions={fields:{name:{label:"Form Name",error:"You must enter a form name."}}},a.onChange=a.onChange.bind(Object(Oe.a)(a)),a.onTypeSearch=a.onTypeSearch.bind(Object(Oe.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(Oe.a)(a)),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handlePageNumChange",value:function(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"inputTypeToReadable",value:function(e){switch(e){case"String":return"Text Input";case"TEXTBOX":return"Text Box";case"Number":return"Number";case"Boolean":return"On/Off Switch";case"SAND":return"Agree/Disagree";case"List":return"Select from List";default:return e}}},{key:"rmField",value:function(e){var t=this.state,a=t.fields,r=t.order;for(var n in a)a[n]===e&&(delete a[n],r.splice(r.indexOf(n),1));this.setState({fields:a,order:r}),this.forceUpdate()}},{key:"onChange",value:function(e){"List"===e.type&&(e=Me.a.String)}},{key:"onChangeForm",value:function(e){this.setState({addFormForm:e})}},{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=[];return this.state.forms.forEach(function(a){e.state.search&&!q(a).includes(e.state.search)||t.push(a)}),n.a.createElement(h.a,null,n.a.createElement("div",null,n.a.createElement(v.b,{exact:!0,path:"/forms/",render:function(){return n.a.createElement(B,{flag:e.state.loading,func:function(){return e._loadData()}},"Search:"," ",n.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),n.a.createElement("br",null),n.a.createElement(at,{forms:t,refer:e}))}}),n.a.createElement(v.b,{path:"/forms/add",render:function(t){return n.a.createElement("div",null,n.a.createElement(Me.a.form.Form,{ref:function(t){return e.addFormForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeForm(t)},value:e.state.addFormForm}),n.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},n.a.createElement(He.a,{onDragEnd:e.onDragEnd},n.a.createElement(He.c,{droppableId:"droppable"},function(t,a){return n.a.createElement("div",{ref:t.innerRef,style:et(a.isDraggingOver)},e.state.attributes.map(function(t,a){return n.a.createElement(He.b,{key:t.id,draggableId:t.id,index:a},function(a,r){return n.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:$e(r.isDragging,a.draggableProps.style)}),t.label+(t.required?" *":"")," :"," ",e.inputTypeToReadable(t.type)," ")})}),t.placeholder)}),"\xa0 Drag to assign \xa0",n.a.createElement(He.c,{droppableId:"droppable2"},function(t,a){return n.a.createElement("div",{ref:t.innerRef,style:et(a.isDraggingOver)},e.state.attributes_selected.map(function(t,a){return n.a.createElement(He.b,{key:t.id,draggableId:t.id,index:a},function(a,r){return n.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:$e(r.isDragging,a.draggableProps.style)}),t.label+(t.required?" *":"")," :"," ",e.inputTypeToReadable(t.type)," ",n.a.createElement(xe.a,{value:"ack",color:"primary"})," Readonly")})}),t.placeholder)}))),n.a.createElement("button",{style:{margin:25},onClick:function(){return e._createForm()}},"Create Form"))}}),n.a.createElement(v.b,{path:"/forms/view/:id",render:function(t){return n.a.createElement("div",null,n.a.createElement(rt,{key:t.match.params.id,id:t.match.params.id,edit:!0,refer:e}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(_e.a,{onClick:e.handleClickDelete,color:"primary"},"Delete Form"),n.a.createElement(Le.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(Ue.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this form?"),n.a.createElement(Ve.a,null,n.a.createElement(_e.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),n.a.createElement(_e.a,{onClick:function(){return e._deleteForm(t.match.params.id)},color:"primary"},"Yes"))))}}),n.a.createElement(R,{flag:this.state.saving})))}}]),t}(r.Component),at=function(e){var t=e.refer.state.perPage,a=n.a.createElement("div",null),r=[];return e.forms.forEach(function(a,s){Math.floor(s/t)+1===e.refer.state.pageNum&&r.push(n.a.createElement(rt,{key:a.id,form:a,refer:e.refer}))}),a=n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(Ce.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.forms.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",n.a.createElement("div",{style:{width:75}},"# Per Page"," ",n.a.createElement(ke.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),n.a.createElement("div",null,n.a.createElement("h3",null,e.type,"Forms (",e.forms.length,")"),n.a.createElement(h.b,{to:"/forms/add"},n.a.createElement("button",null,"Add Form")),a,r,a)},rt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleTeamsChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedTeamsOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/form/assigned/team/add","POST",{teamId:r.add[n],formId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/form/assigned/team/remove","POST",{teamId:r.rm[s],formId:a.props.id});case 16:e.next=12;break;case 18:M("Team assignments saved."),a.setState({selectedTeamsOption:t}),e.next=25;break;case 22:e.prev=22,e.t4=e.catch(2),L(e.t4,"Unable to add/remove teams.");case 25:a.props.refer.setState({saving:!1});case 26:case"end":return e.stop()}},e,null,[[2,22]])}));return function(t){return e.apply(this,arguments)}}(),a.handleMembersChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedMembersOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/form/assigned/volunteer/add","POST",{vId:r.add[n],formId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/form/assigned/volunteer/remove","POST",{vId:r.rm[s],formId:a.props.id});case 16:e.next=12;break;case 18:M("Volunteer assignments saved."),a.setState({selectedMembersOption:t}),e.next=25;break;case 22:e.prev=22,e.t4=e.catch(2),L(e.t4,"Unable to add/remove teams.");case 25:a.props.refer.setState({saving:!1});case 26:case"end":return e.stop()}},e,null,[[2,22]])}));return function(t){return e.apply(this,arguments)}}(),a._loadData=Object(i.a)(c.a.mark(function e(){var t,r,s,o,l,i,u,d,p,m,f;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r=[],s=[],o=[],l=[],a.setState({loading:!0}),e.prev=2,e.next=5,Promise.all([oe(Object(Oe.a)(a),a.props.id,!0),J(a.props.refer),J(a.props.refer,"form",a.props.id),ne(a.props.refer),ne(a.props.refer,"form",a.props.id)]);case 5:i=e.sent,u=Object(we.a)(i,5),t=u[0],r=u[1],s=u[2],o=u[3],l=u[4],e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(2),L(e.t0,"Unable to load form info."),e.abrupt("return",a.setState({loading:!1}));case 18:d=[],p=[],m=[],f=[],o.forEach(function(e){d.push({value:q(e),id:e.id,label:n.a.createElement(ze,{key:e.id,team:e,refer:Object(Oe.a)(a)})})}),l.forEach(function(e){m.push({value:q(e),id:e.id,label:n.a.createElement(ze,{key:e.id,team:e,refer:Object(Oe.a)(a)})})}),r.forEach(function(e){p.push({value:q(e),id:e.id,label:n.a.createElement(ct,{key:e.id,volunteer:e,refer:Object(Oe.a)(a)})})}),s.forEach(function(e){f.push({value:q(e),id:e.id,label:n.a.createElement(ct,{key:e.id,volunteer:e,refer:Object(Oe.a)(a)})})}),a.setState({form:t,volunteers:r,teamOptions:d,membersOption:p,selectedTeamsOption:m,selectedMembersOption:f,loading:!1});case 27:case"end":return e.stop()}},e,null,[[2,14]])})),a.state={server:a.props.refer.props.server,form:a.props.form,selectedTeamsOption:[],selectedMembersOption:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.state.form||this._loadData()}},{key:"render",value:function(){var e=this.state.form;return!e||this.state.loading?n.a.createElement(S.a,null):n.a.createElement("div",null,n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(H,{icon:j.d,style:{width:20,height:20,color:"gray"}})," ",e.name," ",this.props.edit?"":n.a.createElement(h.b,{to:"/forms/view/"+e.id},"view"))),this.props.edit?n.a.createElement(nt,{form:e,refer:this}):"")}}]),t}(r.Component),nt=function(e){return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("br",null),"Teams assigned to this form:",n.a.createElement(ke.a,{value:e.refer.state.selectedTeamsOption,onChange:e.refer.handleTeamsChange,options:e.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),n.a.createElement("br",null),"Volunteers assigned directly to this form:",n.a.createElement(ke.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.membersOption,isMulti:!0,isSearchable:!0,placeholder:"None"})))};Be.a.locale(qe.a);var st=50,ot=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._loadData=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a.setState({loading:!0,search:""}),e.prev=2,e.next=5,J(Object(Oe.a)(a));case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),L(e.t0,"Unable to load volunteers.");case 11:a.setState({loading:!1,volunteers:t});case 12:case"end":return e.stop()}},e,null,[[2,8]])})),a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})};var r=localStorage.getItem("volunteersperpage");return r||(r=5),a.state={loading:!0,thisVolunteer:{},volunteers:[],search:"",perPage:r,pageNum:1},a.onTypeSearch=a.onTypeSearch.bind(Object(Oe.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(Oe.a)(a)),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"render",value:function(){var e=this,t=[],a=[],r=[],s=[];return this.state.volunteers.forEach(function(n){e.state.search&&!q(n).includes(e.state.search)||(n.locked?r.push(n):n.invited?s.push(n):n.ass.ready||n.ass.teams.length?t.push(n):a.push(n))}),n.a.createElement(B,{flag:this.state.loading,func:function(){return e._loadData()}},n.a.createElement(h.a,null,n.a.createElement("div",null,"Search:"," ",n.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),n.a.createElement("br",null),n.a.createElement(h.b,{to:"/volunteers/",onClick:function(){return e.setState({pageNum:1})}},"Volunteers (",t.length,")"),"\xa0-\xa0",n.a.createElement(h.b,{to:"/volunteers/unassigned",onClick:function(){return e.setState({pageNum:1})}},"Unassigned (",a.length,")"),"\xa0-\xa0",n.a.createElement(h.b,{to:"/volunteers/invited",onClick:function(){return e.setState({pageNum:1})}},"Invited (",s.length,")"),"\xa0-\xa0",n.a.createElement(h.b,{to:"/volunteers/denied",onClick:function(){return e.setState({pageNum:1})}},"Denied (",r.length,")"),n.a.createElement(v.b,{exact:!0,path:"/volunteers/",render:function(){return n.a.createElement(lt,{refer:e,volunteers:t})}}),n.a.createElement(v.b,{exact:!0,path:"/volunteers/unassigned",render:function(){return n.a.createElement(lt,{refer:e,type:"Unassigned",volunteers:a})}}),n.a.createElement(v.b,{exact:!0,path:"/volunteers/invited",render:function(){return n.a.createElement("div",null,n.a.createElement(lt,{refer:e,type:"Invited",volunteers:s}),n.a.createElement(_e.a,{onClick:Object(i.a)(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(e.props.server,F+"/volunteer/invite","POST");case 2:(a=t.sent).token?e.setState({thisVolunteer:{id:"invite:"+a.token}}):L({},"Invite failed.");case 4:case"end":return t.stop()}},t)})),color:"primary"},"Invite Someone"))}}),n.a.createElement(v.b,{exact:!0,path:"/volunteers/denied",render:function(){return n.a.createElement(lt,{refer:e,type:"Denied",volunteers:r})}}),n.a.createElement(v.b,{path:"/volunteers/view/:id",render:function(t){return n.a.createElement(ct,{key:t.match.params.id,id:t.match.params.id,edit:!0,refer:e})}}),n.a.createElement(_.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:!!this.state.thisVolunteer.id,onClose:function(){return e.setState({thisVolunteer:{}})}},n.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},n.a.createElement(ct,{key:this.state.thisVolunteer.id,id:this.state.thisVolunteer.id,edit:!0,refer:this}))),n.a.createElement(R,{flag:this.state.saving}))))}}]),t}(r.Component),lt=function(e){var t=e.refer.state.perPage,a=n.a.createElement("div",null),r=[];return e.volunteers.forEach(function(a,s){Math.floor(s/t)+1===e.refer.state.pageNum&&r.push(n.a.createElement(ct,{key:a.id,volunteer:a,refer:e.refer}))}),a=n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(Ce.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.volunteers.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",n.a.createElement("div",{style:{width:75}},"# Per Page"," ",n.a.createElement(ke.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),n.a.createElement("div",null,n.a.createElement("h3",null,e.type,"Volunteers (",e.volunteers.length,")"),a,n.a.createElement(Te.a,{component:"nav"},r),a)},ct=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleTeamsChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedTeamsOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/team/members/add","POST",{teamId:r.add[n],vId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/team/members/remove","POST",{teamId:r.rm[s],vId:a.props.id});case 16:e.next=12;break;case 18:return e.next=20,z(Object(Oe.a)(a),a.props.id);case 20:o=e.sent,M("Team assignments saved."),a.setState({selectedTeamsOption:t,volunteer:o}),e.next=28;break;case 25:e.prev=25,e.t4=e.catch(2),L(e.t4,"Unable to add/remove teams.");case 28:a.props.refer.setState({saving:!1});case 29:case"end":return e.stop()}},e,null,[[2,25]])}));return function(t){return e.apply(this,arguments)}}(),a.handleLeaderChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedLeaderOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/team/members/promote","POST",{teamId:r.add[n],vId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/team/members/demote","POST",{teamId:r.rm[s],vId:a.props.id});case 16:e.next=12;break;case 18:return e.next=20,z(Object(Oe.a)(a),a.props.id);case 20:o=e.sent,M("Team leaders saved."),a.setState({selectedLeaderOption:t,volunteer:o}),e.next=28;break;case 25:e.prev=25,e.t4=e.catch(2),L(e.t4,"Unable to edit team leadership.");case 28:a.props.refer.setState({saving:!1});case 29:case"end":return e.stop()}},e,null,[[2,25]])}));return function(t){return e.apply(this,arguments)}}(),a.handleFormsChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedFormsOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/form/assigned/volunteer/add","POST",{formId:r.add[n],vId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/form/assigned/volunteer/remove","POST",{formId:r.rm[s],vId:a.props.id});case 16:e.next=12;break;case 18:return e.next=20,z(Object(Oe.a)(a),a.props.id);case 20:o=e.sent,M("Form selection saved."),a.setState({selectedFormsOption:t,volunteer:o}),e.next=28;break;case 25:e.prev=25,e.t4=e.catch(2),L(e.t4,"Unable to add/remove form.");case 28:a.props.refer.setState({saving:!1});case 29:case"end":return e.stop()}},e,null,[[2,25]])}));return function(t){return e.apply(this,arguments)}}(),a.handleTurfChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedTurfOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/turf/assigned/volunteer/add","POST",{turfId:r.add[n],vId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/turf/assigned/volunteer/remove","POST",{turfId:r.rm[s],vId:a.props.id});case 16:e.next=12;break;case 18:return e.next=20,z(Object(Oe.a)(a),a.props.id);case 20:o=e.sent,M("Turf selection saved."),a.setState({selectedTurfOption:t,volunteer:o}),e.next=28;break;case 25:e.prev=25,e.t4=e.catch(2),L(e.t4,"Unable to add/remove turf.");case 28:a.props.refer.setState({saving:!1});case 29:case"end":return e.stop()}},e,null,[[2,25]])}));return function(t){return e.apply(this,arguments)}}(),a._loadData=Object(i.a)(c.a.mark(function e(){var t,r,s,o,l,i,u,d,p,m,f,h,v,b,g,E;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r=[],s=[],o=[],l=[],i=[],a.setState({loading:!0}),e.prev=2,e.next=5,Promise.all([z(Object(Oe.a)(a),a.props.id),ce(a.props.refer),Z(a.props.refer),ne(a.props.refer)]);case 5:u=e.sent,d=Object(we.a)(u,4),t=d[0],r=d[1],s=d[2],o=d[3],e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),L(e.t0,"Unable to load canavasser info."),e.abrupt("return",a.setState({loading:!1}));case 17:if(!t.location){e.next=24;break}return e.next=20,ee(a.props.refer,t.location.x,t.location.y,0);case 20:return l=e.sent,e.next=23,ee(a.props.refer,t.location.x,t.location.y,st);case 23:i=e.sent;case 24:p=[],m=[],f=[],h=[],v=[],b=[],g=[{value:"",label:"None"}],E=[{value:"",label:"None"},{value:"auto",id:"auto",label:n.a.createElement(ft,{key:"auto",turf:{id:"auto",name:"Area surrounnding this volunteer's home address"},refer:Object(Oe.a)(a),icon:j.k})}],o.forEach(function(e){p.push({value:q(e),id:e.id,label:n.a.createElement(ze,{key:e.id,team:e,refer:Object(Oe.a)(a)})}),t.ass.teams.forEach(function(t,r){t.id===e.id&&(f.push({value:q(e),id:e.id,label:n.a.createElement(ze,{key:e.id,team:e,refer:Object(Oe.a)(a)})}),m.push({value:q(e),id:e.id,label:n.a.createElement(ze,{key:e.id,team:e,refer:Object(Oe.a)(a)})}),t.leader&&h.push({value:q(e),id:e.id,label:n.a.createElement(ze,{key:e.id,team:e,refer:Object(Oe.a)(a)})}))})}),r.forEach(function(e){g.push({value:q(e),id:e.id,label:n.a.createElement(rt,{key:e.id,form:e,refer:Object(Oe.a)(a)})})}),t.ass.forms.forEach(function(e){e.direct&&v.push({value:q(e),id:e.id,label:n.a.createElement(rt,{key:e.id,form:e,refer:Object(Oe.a)(a)})})}),s.forEach(function(e){E.push({value:q(e),id:e.id,label:n.a.createElement(ft,{key:e.id,turf:e,refer:Object(Oe.a)(a)})})}),t.ass.turfs.forEach(function(e){e.direct&&b.push({value:q(e),id:e.id,label:n.a.createElement(ft,{key:e.id,turf:e,refer:Object(Oe.a)(a),icon:t.autoturf?j.k:null})})}),a.setState({loading:!1,volunteer:t,teamOptions:p,leaderOptions:m,formOptions:g,turfOptions:E,selectedTeamsOption:f,selectedLeaderOption:h,selectedFormsOption:v,selectedTurfOption:b,hometurf:l,nearbyturf:i});case 38:case"end":return e.stop()}},e,null,[[2,13]])})),a._lockVolunteer=function(){var e=Object(i.a)(c.a.mark(function e(t,r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r?"lock":"unlock",a.props.refer.setState({saving:!0}),e.prev=2,e.next=5,U(a.state.server,F+"/volunteer/"+n,"POST",{id:t.id});case 5:M("Volunteer hass been "+n+"ed."),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),L(e.t0,"Unable to "+n+" volunteer.");case 11:a.props.refer.setState({saving:!1}),a._loadData();case 13:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t,a){return e.apply(this,arguments)}}(),a.state={server:a.props.refer.props.server,volunteer:a.props.volunteer,selectedTeamsOption:[],selectedLeaderOption:[],selectedFormsOption:[],selectedTurfOption:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.state.volunteer||this._loadData(),x.a.rebuild()}},{key:"componentDidUpdate",value:function(){x.a.rebuild()}},{key:"render",value:function(){var e=this,t=this.state.volunteer;return!t||this.state.loading?n.a.createElement(S.a,null):this.props.edit?n.a.createElement("div",null,n.a.createElement(De.a,{alignItems:"flex-start",style:{width:350}},n.a.createElement(Ie.a,null,n.a.createElement(Ne.a,{alt:t.name,src:t.avatar})),n.a.createElement(Pe.a,{primary:t.name,secondary:t.locationstr?pt(t.locationstr):"N/A"}),n.a.createElement(dt,{volunteer:t})),n.a.createElement(it,{volunteer:t,refer:this})):n.a.createElement(De.a,{button:!0,style:{width:350},alignItems:"flex-start",onClick:function(){return e.props.refer.setState({thisVolunteer:t})}},n.a.createElement(Ie.a,null,n.a.createElement(Ne.a,{alt:t.name,src:t.avatar})),n.a.createElement(Pe.a,{primary:t.name,secondary:t.locationstr?pt(t.locationstr):"N/A"}),n.a.createElement(dt,{volunteer:t}))}}]),t}(r.Component),it=function(e){return n.a.createElement("div",null,n.a.createElement("br",null),e.volunteer.locked?n.a.createElement("button",{onClick:function(){return e.refer._lockVolunteer(e.volunteer,!1)}},"Restore Access"):n.a.createElement("button",{onClick:function(){return e.refer._lockVolunteer(e.volunteer,!0)}},"Deny Access"),n.a.createElement("br",null),"Last Seen:"," ",new Be.a("en-US").format(new Date(e.volunteer.last_seen-3e4)),n.a.createElement("br",null),"Email: ",e.volunteer.email?e.volunteer.email:"N/A",n.a.createElement("br",null),"Phone: ",e.volunteer.phone?e.volunteer.phone:"N/A",n.a.createElement("br",null),"Address:"," ",n.a.createElement(ut,{refer:e.refer,volunteer:e.volunteer}),n.a.createElement("br",null),e.refer.state.hometurf.length?n.a.createElement("div",null,"Turf this volunteer's home address is in:",e.refer.state.hometurf.map(function(e){return n.a.createElement("div",null,e.name)})):n.a.createElement("div",null,"This volunteer's home address isn't in any turf."),n.a.createElement("br",null),e.refer.state.nearbyturf.length?n.a.createElement("div",null,"Turf this volunteer's home address is near by:",e.refer.state.nearbyturf.slice(0,5).map(function(e){return n.a.createElement("div",null,e.name)})):n.a.createElement("div",null,"No turfs are within ",st,"km of this volunteer."),n.a.createElement("br",null),"# of doors knocked: N/A",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",null,"Teams this volunteer is a member of:",n.a.createElement(ke.a,{value:e.refer.state.selectedTeamsOption,onChange:e.refer.handleTeamsChange,options:e.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),n.a.createElement("br",null),"Teams this volunteer is a leader of:",n.a.createElement(ke.a,{value:e.refer.state.selectedLeaderOption,onChange:e.refer.handleLeaderChange,options:e.refer.state.selectedTeamsOption,isMulti:!0,isSearchable:!0,placeholder:"None"})),n.a.createElement("br",null),e.refer.state.selectedTeamsOption.length?n.a.createElement("div",null,"Forms / Turf this users sees based on the above team(s):",n.a.createElement("br",null),e.volunteer.ass.forms.filter(function(e){return!e.direct}).map(function(t){return n.a.createElement(rt,{key:t.id,form:t,refer:e.refer})}),e.volunteer.ass.turfs.filter(function(e){return!e.direct}).map(function(t){return n.a.createElement(ft,{key:t.id,turf:t,refer:e.refer})})):"",n.a.createElement("div",null,"Forms this volunteer is directly assigned to:",n.a.createElement(ke.a,{value:e.refer.state.selectedFormsOption,onChange:e.refer.handleFormsChange,options:e.refer.state.formOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),n.a.createElement("br",null),"Turf this volunteer is directly assigned to:",n.a.createElement(ke.a,{value:e.refer.state.selectedTurfOption,onChange:e.refer.handleTurfChange,options:e.refer.state.turfOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})))},ut=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).submitAddress=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({address:t}),e.prev=1,e.next=4,Object(C.geocodeByAddress)(t);case 4:return r=e.sent,e.next=7,Object(C.getLatLng)(r[0]);case 7:return n=e.sent,e.next=10,U(a.props.refer.state.server,F+"/volunteer/update","POST",{id:a.props.volunteer.id,address:t,lat:n.lat,lng:n.lng});case 10:a.props.refer._loadData(),M("Address hass been saved."),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),L(e.t0,"Unable to update address info.");case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}(),a.state={edit:!1,address:a.props.volunteer.locationstr?a.props.volunteer.locationstr:""},a.onTypeAddress=function(e){return a.setState({address:e})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return this.state.edit?n.a.createElement(be,{debounce:500,value:this.state.address,onChange:this.onTypeAddress,onSelect:this.submitAddress}):n.a.createElement("div",null,this.state.address," ",n.a.createElement("button",{onClick:function(){return e.setState({edit:!0})}},"click to edit"))}}]),t}(r.Component),dt=function(e){var t=[],a=e.volunteer.id;return e.volunteer.admin&&t.push(n.a.createElement(H,{icon:j.e,color:"gold",key:a+"admin","data-tip":"Administrator"})),e.volunteer.ass.leader&&t.push(n.a.createElement(H,{icon:j.i,color:"green",key:a+"leader","data-tip":"Team Leader"})),e.volunteer.locked?t.push(n.a.createElement(H,{icon:j.a,color:"red",key:a+"locked","data-tip":"Denied access"})):(e.volunteer.ass.ready?t.push(n.a.createElement(H,{icon:j.c,color:"green",key:a+"ready","data-tip":"Ready to Canvass"})):t.push(n.a.createElement(H,{icon:j.g,color:"red",key:a+"notready","data-tip":"Not ready to volunteer, check assignments"})),e.volunteer.locationstr||t.push(n.a.createElement(H,{icon:j.k,color:"red",key:a+"addr","data-tip":"Home Address is not set"}))),t};function pt(e){var t=e.split(", ");return t.length<4?e:(t.shift(),t.join(", "))}var mt=function(e){return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("pre",null,JSON.stringify(e.refer.state.turf.stats,null,2)),n.a.createElement("br",null),"Teams assigned to this turf:",n.a.createElement(ke.a,{value:e.refer.state.selectedTeamsOption,onChange:e.refer.handleTeamsChange,options:e.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),n.a.createElement("br",null),"Volunteers assigned directly to this turf:",n.a.createElement(ke.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.membersOption,isMulti:!0,isSearchable:!0,placeholder:"None"})))},ft=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleTeamsChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedTeamsOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/turf/assigned/team/add","POST",{teamId:r.add[n],turfId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/turf/assigned/team/remove","POST",{teamId:r.rm[s],turfId:a.props.id});case 16:e.next=12;break;case 18:M("Team assignments saved."),a.setState({selectedTeamsOption:t}),e.next=25;break;case 22:e.prev=22,e.t4=e.catch(2),L(e.t4,"Unable to add/remove teams.");case 25:a.props.refer.setState({saving:!1});case 26:case"end":return e.stop()}},e,null,[[2,22]])}));return function(t){return e.apply(this,arguments)}}(),a.handleMembersChange=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.props.refer.setState({saving:!0}),e.prev=2,r=ve(a.state.selectedMembersOption,t),e.t0=c.a.keys(r.add);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,U(a.state.server,F+"/turf/assigned/volunteer/add","POST",{vId:r.add[n],turfId:a.props.id});case 9:e.next=5;break;case 11:e.t2=c.a.keys(r.rm);case 12:if((e.t3=e.t2()).done){e.next=18;break}return s=e.t3.value,e.next=16,U(a.state.server,F+"/turf/assigned/volunteer/remove","POST",{vId:r.rm[s],turfId:a.props.id});case 16:e.next=12;break;case 18:M("Volunteer assignments saved."),a.setState({selectedMembersOption:t}),e.next=25;break;case 22:e.prev=22,e.t4=e.catch(2),L(e.t4,"Unable to add/remove teams.");case 25:a.props.refer.setState({saving:!1});case 26:case"end":return e.stop()}},e,null,[[2,22]])}));return function(t){return e.apply(this,arguments)}}(),a._loadData=Object(i.a)(c.a.mark(function e(){var t,r,s,o,l,i,u,d,p,m,f;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r=[],s=[],o=[],l=[],a.setState({loading:!0}),e.prev=2,e.next=5,Promise.all([K(Object(Oe.a)(a),a.props.id,!0),J(a.props.refer),J(a.props.refer,"turf",a.props.id),ne(a.props.refer),ne(a.props.refer,"turf",a.props.id)]);case 5:i=e.sent,u=Object(we.a)(i,5),t=u[0],r=u[1],s=u[2],o=u[3],l=u[4],e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(2),L(e.t0,"Unable to load turf info."),e.abrupt("return",a.setState({loading:!1}));case 18:d=[],p=[],m=[],f=[],o.forEach(function(e){d.push({value:q(e),id:e.id,label:n.a.createElement(ze,{key:e.id,team:e,refer:Object(Oe.a)(a)})})}),l.forEach(function(e){m.push({value:q(e),id:e.id,label:n.a.createElement(ze,{key:e.id,team:e,refer:Object(Oe.a)(a)})})}),r.forEach(function(e){p.push({value:q(e),id:e.id,label:n.a.createElement(ct,{key:e.id,volunteer:e,refer:Object(Oe.a)(a)})})}),s.forEach(function(e){f.push({value:q(e),id:e.id,label:n.a.createElement(ct,{key:e.id,volunteer:e,refer:Object(Oe.a)(a)})})}),a.setState({turf:t,volunteers:r,teamOptions:d,membersOption:p,selectedTeamsOption:m,selectedMembersOption:f,loading:!1});case 27:case"end":return e.stop()}},e,null,[[2,14]])})),a.state={server:a.props.refer.props.server,turf:a.props.turf,selectedTeamsOption:[],selectedMembersOption:[]},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.state.turf||this._loadData()}},{key:"render",value:function(){var e=this.state.turf;return!e||this.state.loading?n.a.createElement(S.a,null):n.a.createElement("div",null,n.a.createElement("div",{style:{display:"flex",padding:"10px"}},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(H,{icon:j.o,style:{width:20,height:20,color:"gray"}})," ",e.name," ",this.props.edit?"":n.a.createElement(h.b,{to:"/turf/view/"+e.id},"view"))),this.props.edit?n.a.createElement(mt,{turf:e,refer:this}):"")}}]),t}(r.Component),ht=function(e){var t=e.refer.state.perPage,a=n.a.createElement("div",null),r=[];return e.turf.forEach(function(a,s){Math.floor(s/t)+1===e.refer.state.pageNum&&r.push(n.a.createElement(ft,{key:a.id,turf:a,refer:e.refer}))}),a=n.a.createElement("div",{style:{display:"flex"}},n.a.createElement(Ce.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.turf.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",n.a.createElement("div",{style:{width:75}},"# Per Page"," ",n.a.createElement(ke.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),n.a.createElement("div",null,n.a.createElement("h3",null,e.type,"Turf (",e.turf.length,")"),n.a.createElement(h.b,{to:"/turf/add"},n.a.createElement("button",null,"Add Turf")),a,r,a)},vt=a(101),bt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).handleStateChange=function(e){e||(e=[]),a.setState({typeOptions:[{value:"state",label:"State"},{value:"cd",label:"Congressional"},{value:"sldu",label:vt.us_states[e.value].sldu},{value:"sldl",label:vt.us_states[e.value].sldl}]}),a.props.refer.handleStateChange(e)},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.refer.state.selectedDrawOption)return n.a.createElement("br",null);var t=[];switch(Object.keys(vt.us_states).map(function(e){return t.push({value:e,label:vt.us_states[e].name})}),this.props.refer.state.selectedDrawOption.value){case"select":return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("br",null),"State or region:",n.a.createElement(ke.a,{value:this.props.refer.state.selectedStateOption,onChange:this.handleStateChange,options:t,isSearchable:!0,placeholder:"Select state or region"})),this.props.refer.state.selectedStateOption?n.a.createElement("div",null,n.a.createElement("br",null),"District Type:",n.a.createElement(ke.a,{value:this.props.refer.state.selectedTypeOption,onChange:this.props.refer.handleTypeChange,onMenuClose:this.props.refer.selectedTypeFetch,options:this.state.typeOptions,isSearchable:!1,placeholder:"Select district for this turf"})):"",this.props.refer._showDistrictOption()?n.a.createElement("div",null,n.a.createElement("br",null),"District Number:",this.props.refer.state.districtOptions.length?n.a.createElement(ke.a,{value:this.props.refer.state.selectedDistrictOption,onChange:this.props.refer.handleDistrictChange,options:this.props.refer.state.districtOptions,isSearchable:!0,placeholder:"Select district for this turf"}):n.a.createElement(S.a,null)):"");case"import":return n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("input",{type:"file",accept:".geojson,.json",onChange:function(t){return e.props.refer.handleImportFiles(t.target.files)}}));case"radius":return n.a.createElement("div",null,n.a.createElement("br",null),"Type the address:",n.a.createElement(be,{debounce:500,value:this.props.refer.state.address,onChange:this.props.refer.onTypeAddress,onSelect:this.props.refer.submitAddress}));case"draw":return n.a.createElement("div",null,n.a.createElement("br",null),"Use a"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://google-developers.appspot.com/maps/documentation/utils/geojson/"},"GeoJSON Draw Tool"),', save the file, and then select the "Import GeoJSON shape file" option.');default:return n.a.createElement("div",null,"Unknown generation method.")}}}]),t}(r.Component),gt=a(423),Et=a.n(gt),yt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})},a.submitAddress=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({address:t,saving:!0}),e.prev=1,e.next=4,Object(C.geocodeByAddress)(t);case 4:return r=e.sent,e.next=7,Object(C.getLatLng)(r[0]);case 7:n=e.sent,a.setState({addressCoords:n}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),L(e.t0,"Unable to search or geocode address.");case 14:a.setState({saving:!1});case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),a.handleDrawChange=function(e){a.setState({selectedDrawOption:e,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,importFileData:null,addressCoords:null,address:""})},a.handleStateChange=function(e){a.setState({selectedStateOption:e})},a.handleTypeChange=function(e){a.setState({selectedTypeOption:e})},a.handleDistrictChange=function(e){a.setState({selectedDistrictOption:e})},a.handleImportFiles=function(e){a.setState({saving:!0});var t=new FileReader;t.onload=function(e){a.setState({importFileData:e.target.result,saving:!1})},t.readAsText(e[0])},a._deleteTurf=function(){var e=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({saving:!0,menuDelete:!1}),e.prev=1,e.next=4,U(a.props.server,F+"/turf/delete","POST",{turfId:t});case 4:M("Turf has been deleted."),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),L(e.t0,"Unable to delete turf.");case 10:a.setState({saving:!1}),a._loadData(),window.location.href="/HelloVoterHQ/#/turf/";case 13:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),a._createTurf=Object(i.a)(c.a.mark(function e(){var t,r,n,s,o,l,i,u,d,p,m;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=a.addTurfForm.getValue())){e.next=3;break}return e.abrupt("return");case 3:if(a.setState({saving:!0}),r=[],null===a.state.importFileData){e.next=16;break}e.prev=6,r.push(JSON.parse(a.state.importFileData)),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(6),L(e.t0,"Unable to parse import data file."),e.abrupt("return",a.setState({saving:!1}));case 14:e.next=54;break;case 16:if("radius"!==a.state.selectedDrawOption.value){e.next=20;break}r.push(Et()([a.state.addressCoords.lng,a.state.addressCoords.lat],1e3)),e.next=54;break;case 20:if(n=a.state.selectedStateOption.value,e.prev=21,!a.state.selectedDistrictOption||"all"!==a.state.selectedDistrictOption.value){e.next=40;break}e.t1=c.a.keys(a.state.districtOptions);case 24:if((e.t2=e.t1()).done){e.next=38;break}if(s=e.t2.value,"all"!==a.state.districtOptions[s].value){e.next=28;break}return e.abrupt("continue",24);case 28:return e.next=30,fetch(a.urlFromDist(n,a.state.selectedTypeOption.value,a.state.districtOptions[s].value));case 30:return o=e.sent,e.next=33,o.json();case 33:(l=e.sent).name=a.state.districtOptions[s].value,r.push(l),e.next=24;break;case 38:e.next=48;break;case 40:return e.next=42,fetch(a.urlFromDist(n,a.state.selectedTypeOption.value,a.state.selectedDistrictOption?a.state.selectedDistrictOption.value:null));case 42:return i=e.sent,e.t3=r,e.next=46,i.json();case 46:e.t4=e.sent,e.t3.push.call(e.t3,e.t4);case 48:e.next=54;break;case 50:return e.prev=50,e.t5=e.catch(21),L(e.t5,"Unable to fetch district info data."),e.abrupt("return",a.setState({saving:!1}));case 54:e.prev=54,e.t6=c.a.keys(r);case 56:if((e.t7=e.t6()).done){e.next=67;break}return u=e.t7.value,d=r[u],p=void 0,m=void 0,p=d.geometry?d.geometry:d,m=a.state.selectedDistrictOption&&"all"===a.state.selectedDistrictOption.value?t.name+" "+d.name:t.name,e.next=65,U(a.props.server,F+"/turf/create","POST",{name:m,geometry:p});case 65:e.next=56;break;case 67:M("Turf has been created."),e.next=73;break;case 70:e.prev=70,e.t8=e.catch(54),L(e.t8,"Unable to create turf.");case 73:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/turf/",a._loadData();case 76:case"end":return e.stop()}},e,null,[[6,10],[21,50],[54,70]])})),a.selectedTypeFetch=Object(i.a)(c.a.mark(function e(){var t,r,n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.selectedTypeOption){e.next=2;break}return e.abrupt("return");case 2:a.setState({districtOptions:[]}),r=a.state.selectedStateOption.value,e.t0=a.state.selectedTypeOption.value,e.next="cd"===e.t0?7:"sldu"===e.t0?9:"sldl"===e.t0?11:13;break;case 7:return t="cds/2016/",e.abrupt("break",14);case 9:return t="states/"+r+"/sldu/",e.abrupt("break",14);case 11:return t="states/"+r+"/sldl/",e.abrupt("break",14);case 13:return e.abrupt("return");case 14:return e.next=16,fetch("https://api.github.com/repos/OurVoiceUSA/districts/contents/"+t);case 16:return n=e.sent,s=[{value:"all",label:"Create all of them!"}],e.next=20,n.json();case 20:o=e.sent,e.t1=a.state.selectedTypeOption.value,e.next="cd"===e.t1?24:26;break;case 24:return o.forEach(function(e){e.name.includes(a.state.selectedStateOption.value)&&s.push({value:e.name,label:e.name})}),e.abrupt("break",27);case 26:o.forEach(function(e){var t=e.name.replace(".geojson","");s.push({value:t,label:t})});case 27:a.setState({districtOptions:s});case 28:case"end":return e.stop()}},e)})),a._loadData=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0,search:""}),t=[],e.prev=2,e.next=5,Z(Object(Oe.a)(a));case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),L(e.t0,"Unable to load turf.");case 11:a.setState(a.initState()),a.setState({loading:!1,turf:t});case 13:case"end":return e.stop()}},e,null,[[2,8]])})),a.state=a.initState(),a.formServerItems=Me.a.struct({name:Me.a.String}),a.formServerOptions={fields:{name:{label:"Turf Name",error:"You must enter a turf name."}}},a.onTypeAddress=function(e){return a.setState({address:e})},a.onTypeSearch=a.onTypeSearch.bind(Object(Oe.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(Oe.a)(a)),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"initState",value:function(){var e=localStorage.getItem("turfperpage");return e||(e=5),{loading:!0,selectedDrawOption:null,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,districtOptions:[],turf:[],thisTurf:{},importFileData:null,address:"",addressCoords:null,search:"",perPage:e,pageNum:1,menuDelete:!1}}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"onChangeTurf",value:function(e){this.setState({addTurfForm:e})}},{key:"_showDistrictOption",value:function(){if(!this.state.selectedTypeOption)return!1;switch(this.state.selectedTypeOption.value){case"cd":case"sldu":case"sldl":return!0;default:return!1}}},{key:"_showSubmitButton",value:function(){return!this.state.saving&&(!!this.state.selectedDrawOption&&(!(!this.state.selectedTypeOption||"state"!==this.state.selectedTypeOption.value)||(!(!this._showDistrictOption()||!this.state.selectedDistrictOption)||(null!==this.state.importFileData||null!==this.state.addressCoords))))}},{key:"urlFromDist",value:function(e,t,a){var r;switch(t){case"state":r="states/"+e+"/shape.geojson";break;case"cd":r="cds/2016/"+a+"/shape.geojson";break;case"sldu":r="states/"+e+"/sldu/"+a+".geojson";break;case"sldl":r="states/"+e+"/sldl/"+a+".geojson";break;default:throw new Error("unknown selectedTypeOption")}return"https://raw.githubusercontent.com/OurVoiceUSA/districts/gh-pages/"+r}},{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=[{value:"select",label:"Select from legislative boundary"},{value:"import",label:"Import GeoJSON shape file"},{value:"radius",label:"Area surrounding an address"},{value:"draw",label:"Manually draw with your mouse"}],a=[];return this.state.turf.forEach(function(t){e.state.search&&!q(t).includes(e.state.search)||a.push(t)}),n.a.createElement(h.a,null,n.a.createElement("div",null,n.a.createElement(v.b,{exact:!0,path:"/turf/",render:function(){return n.a.createElement(B,{flag:e.state.loading,func:e._loadData},"Search:"," ",n.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),n.a.createElement("br",null),n.a.createElement(ht,{turf:a,refer:e}))}}),n.a.createElement(v.b,{exact:!0,path:"/turf/add",render:function(){return n.a.createElement("div",null,n.a.createElement(Me.a.form.Form,{ref:function(t){return e.addTurfForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTurf(t)},value:e.state.addTurfForm}),n.a.createElement("br",null),"Method of generating turf:",n.a.createElement(ke.a,{value:e.state.selectedDrawOption,onChange:e.handleDrawChange,options:t,isSearchable:!1,placeholder:"Select method"}),n.a.createElement(bt,{refer:e}),e._showSubmitButton()?n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("button",{onClick:function(){return e._createTurf()}},"Submit")):"")}}),n.a.createElement(v.b,{path:"/turf/view/:id",render:function(t){return n.a.createElement("div",null,n.a.createElement(ft,{key:t.match.params.id,id:t.match.params.id,edit:!0,refer:e}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(_e.a,{onClick:e.handleClickDelete,color:"primary"},"Delete Turf"),n.a.createElement(Le.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(Ue.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this turf?"),n.a.createElement(Ve.a,null,n.a.createElement(_e.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),n.a.createElement(_e.a,{onClick:function(){return e._deleteTurf(t.match.params.id)},color:"primary"},"Yes"))))}}),n.a.createElement(R,{flag:this.state.saving})))}}]),t}(r.Component),Ot=function(e){var t=e.value,a=e.percent,r=e.x,s=e.y,o=e.midAngle;return n.a.createElement("g",{transform:"translate(".concat(r,", ").concat(s,")"),textAnchor:o<-90||o>=90?"end":"start"},n.a.createElement("text",{x:0,y:0},"Count: ".concat(t)),n.a.createElement("text",{x:0,y:20},"(Percent: ".concat((100*a).toFixed(2),"%)")))},kt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._init=Object(i.a)(c.a.mark(function e(){var t,r,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),t=[],e.next=4,Z(Object(Oe.a)(a));case 4:return r=e.sent,s=[],e.next=8,ue(Object(Oe.a)(a));case 8:o=e.sent,r.forEach(function(e){t.push({value:q(e),id:e.id,label:n.a.createElement(ft,{key:e.id,turf:e,refer:Object(Oe.a)(a)})})}),o.forEach(function(e){s.push({value:q(e),id:e.id,label:e.name})}),a.setState({loading:!1,attributeOptions:s,turfOptions:t});case 12:case"end":return e.stop()}},e)})),a.doQuery=Object(i.a)(c.a.mark(function e(){var t,r,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.selectedAttributeOption){e.next=2;break}return e.abrupt("return");case 2:return a.setState({loading:!0}),t=[],r=F+"/analytics/list?turfId=",a.state.selectedTurfOption&&a.state.selectedTurfOption.id&&(r+=a.state.selectedTurfOption.id),a.state.selectedAttributeOption&&a.state.selectedAttributeOption.id&&(r+="&aId="+a.state.selectedAttributeOption.id),a.state.include_null&&(r+="&include_null=true"),e.next=10,U(a.props.server,r);case 10:for((n=e.sent)&&n.data&&n.data.map(function(e){return t.push({name:e[0]?e[0]:"No Data",value:e[1]})});t.length>6;)t[5]={name:"Other",value:t[5].value+t.pop().value};a.setState({data_breakdown:t,loading:!1});case 14:case"end":return e.stop()}},e)})),a.handleTurfChange=function(e){e||(e=[]),a.setState({selectedTurfOption:e},function(){return a.doQuery()})},a.handleAttributeChange=function(e){e||(e=[]),a.setState({selectedAttributeOption:e},function(){return a.doQuery()})},a.state={turfOptions:[],selectedTurfOption:null,data_breakdown:[],animation:!0},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._init()}},{key:"render",value:function(){var e=this;return n.a.createElement(B,{flag:this.state.loading,func:function(){return e.doQuery()}},n.a.createElement("h3",null,"Analytics"),n.a.createElement(ke.a,{value:this.state.selectedAttributeOption,onChange:this.handleAttributeChange,options:this.state.attributeOptions,isMulti:!1,isSearchable:!0,placeholder:"Select an attribute to query data for"}),n.a.createElement("br",null),n.a.createElement(ke.a,{value:this.state.selectedTurfOption,onChange:this.handleTurfChange,options:this.state.turfOptions,isMulti:!1,isSearchable:!0,placeholder:"Select a turf to include only records within that turf"}),n.a.createElement(xe.a,{color:"primary",checked:this.state.include_null,onChange:function(t,a){e.setState({include_null:a},Object(i.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.doQuery();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})))}}),' Include records with "No Data"',this.state.data_breakdown.length?n.a.createElement(Se.e,{width:800,height:400},n.a.createElement(Se.c,null),n.a.createElement(Se.d,{data:this.state.data_breakdown,dataKey:"value",startAngle:180,endAngle:-180,innerRadius:60,outerRadius:80,label:Ot,paddingAngle:5,isAnimationActive:this.state.animation},this.state.data_breakdown.map(function(e,t){return n.a.createElement(Se.a,{key:"slice-".concat(t),fill:["red","blue","yellow","green","grey"][t]})}),n.a.createElement(Se.b,{width:50,position:"center"},this.state.selectedAttributeOption.label))):n.a.createElement("h3",null,"No Data"))}}]),t}(r.Component),xt=a(424),St=a(425),wt=a.n(St),jt=a(121),Ct=(a(402),Object(jt.sortableElement)(function(e){return n.a.createElement("div",{style:{display:"flex",padding:"10px"},className:"dashboard-card"},n.a.createElement("div",{style:{padding:"5px 10px"}},n.a.createElement(H,{style:{width:50,height:50,color:"gray"},icon:e.icon?e.icon:j.n})),n.a.createElement("div",{style:{flex:1,overflow:"auto"}},n.a.createElement("h3",null,e.name,": ",e.stat)))})),Tt=Object(jt.sortableContainer)(function(e){return n.a.createElement("div",{className:"dashboard-container"},e.dash.map(function(t,a){var r=e.cards[t]||{};return n.a.createElement(Ct,{name:r.name,stat:r.stat,icon:r.icon,index:a})}))}),Dt=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).onSortEnd=function(e){var t=e.oldIndex,r=e.newIndex,n=Object(jt.arrayMove)(a.state.dash,t,r);localStorage.setItem("dash",n.map(function(e){return e})),a.setState(function(){return{dash:n}})},a._loadData=Object(i.a)(c.a.mark(function e(){var t,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},r=[],a.setState({loading:!0}),e.prev=3,e.next=6,U(a.props.server,F+"/dashboard");case 6:0===(t=e.sent).admins&&a.setState({noAdmins:!0}),r={vol:{name:"Volunteers",stat:t.volunteers,icon:j.q},team:{name:"Teams",stat:t.teams,icon:j.r},turf:{name:"Turfs",stat:t.turfs,icon:j.l},form:{name:"Forms",stat:t.forms,icon:j.d},attributes:{name:"Attributes",stat:t.attributes,icon:j.b},addr:{name:"Addresses",stat:n.a.createElement(xt.a,{value:t.addresses,displayType:"text",thousandSeparator:!0}),icon:j.m},dbsz:{name:"Database size",stat:wt()(t.dbsize?t.dbsize:0,{round:1}),icon:j.f}},e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),L(e.t0,"Unable to load dashboard info.");case 14:a.setState({cards:r,data:t,loading:!1});case 15:case"end":return e.stop()}},e,null,[[3,11]])}));var r=(localStorage.getItem("dash")||"vol,team,turf,form,attributes,addr,dbsz").split(",");return a.state={loading:!0,noAdmins:!1,data:{},cards:[],dash:r},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this;return n.a.createElement(B,{flag:this.state.loading,func:this._loadData},n.a.createElement(Tt,{state:this.state,axis:"xy",onSortEnd:this.onSortEnd,cards:this.state.cards,dash:this.state.dash}),n.a.createElement(_.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.noAdmins,onClose:function(){return e.setState({noAdmins:!1})}},n.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},"Welcome! Looks like you're new here. By default, users have zero permissions when they sign in. To make yourself an admin and gain full access to the UI, run the follow command from the shell:",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("pre",null,"npm run makeadmin -- ",this.props.refer.getUserProp("id")))))}}]),t}(r.Component),Pt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._init=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),t=[],e.next=4,ue(Object(Oe.a)(a));case 4:e.sent.forEach(function(e){t.push({value:q(e),id:e.id,label:e.name,data:e})}),a.setState({loading:!1,attributeOptions:t});case 7:case"end":return e.stop()}},e)})),a.handleAttributeChange=function(e){e||(e=[]),a.setState({selectedAttributeOption:e})},a.state={},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._init()}},{key:"render",value:function(){var e=this;return n.a.createElement(B,{flag:this.state.loading,func:function(){return e._init()}},n.a.createElement("h3",null,"Attributes"),n.a.createElement(ke.a,{value:this.state.selectedAttributeOption,onChange:this.handleAttributeChange,options:this.state.attributeOptions,isMulti:!1,isSearchable:!0,placeholder:"Select an attribute to edit"}),this.state.selectedAttributeOption?n.a.createElement("div",null,JSON.stringify(this.state.selectedAttributeOption.data)):n.a.createElement("div",null))}}]),t}(r.Component),It=a(125),Nt=a.n(It),_t=(a(895),function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={checked:a.props.checked||!1,isMulti:a.props.isMulti||!0,value:a.props.value,map1:{value:",",label:"delimited by comma"},map2:{value:0,label:"1st value"}},a._handleCheck=function(){var e=a.props,t=e.updateFormats,r=e.label;a.setState({checked:!a.state.checked,isMulti:!a.state.isMulti,value:"",map1:{value:",",label:"delimited by comma"},map2:{value:0,label:"1st value"}},function(){return t&&t(r,a.state)})},a._setValue=function(e){var t=a.props,r=t.updateFormats,n=t.label;return a.setState({value:e},function(){return r&&r(n,a.state)})},a._setMapValue=function(e,t){var r=a.props,n=r.updateFormats,s=r.label;a.setState(Object(Fe.a)({},e,t),function(){return n&&n(s,a.state)})},a._renderCheckbox=function(e){var t=e.checked;return n.a.createElement(xe.a,{className:"ck-bx",onChange:function(){return a._handleCheck()},onClick:function(){return a._handleCheck()},value:"ack",color:"primary",checked:t})},a._renderMapOptions=function(e){var t=e.map1,r=void 0===t?"":t,s=e.map2,o=void 0===s?"":s;e.value;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{width:160}},n.a.createElement(ke.a,{className:"map-option-1",onChange:function(e){return a._setMapValue("map1",e)},value:r,options:[{value:",",label:"delimited by comma"},{value:" ",label:"delimited by space"}],placeholder:"None"})),n.a.createElement("div",{style:{width:150}},n.a.createElement(ke.a,{className:"map-option-2",onChange:function(e){return a._setMapValue("map2",e)},value:o,options:[{value:0,label:"1st value"},{value:1,label:"2nd value"},{value:2,label:"last value"}],placeholder:"None"})))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,r=void 0===a?"":a,s=t.options,o=void 0===s?[]:s,l=t.checkbox,c=void 0!==l&&l,i=t.dimensions,u=(i=void 0===i?{width:450,labelWidth:150}:i).width,d=i.labelWidth,p=this.state,m=p.checked,f=p.isMulti,h=p.value,v=p.map1,b=p.map2;return n.a.createElement("div",{className:"mapselect"},n.a.createElement("div",{style:{width:d}},r,":")," ",n.a.createElement("div",{style:{width:u}},n.a.createElement(ke.a,{className:"map-select-input",value:h,options:o,onChange:function(t){return e._setValue(t)},isMulti:f,placeholder:"None"})),c?this._renderCheckbox({checked:m}):"",m?this._renderMapOptions({map1:v,map2:b,value:h}):"")}}]),t}(n.a.Component)),Ft=a(9),At=a(986),Mt=a(987),Lt=a(991),Ut=a(990),Vt=a(992),Ht=a(1002),Bt=a(988),Rt=a(1008),qt=a(447),Wt=a(980),Qt=a(270),zt=a.n(Qt),Gt=a(272),Jt=a.n(Gt),Yt=a(271),Kt=a.n(Yt),Xt=a(269),Zt=a.n(Xt),$t=function(e,t){return t.func?t.params?t.func(e[t.params[0]],e[t.params[1]]):t.func(e):e[t.params[0]]},ea=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).handleFirstPageButtonClick=function(e){a.props.onChangePage(e,0)},a.handleBackButtonClick=function(e){a.props.onChangePage(e,a.props.page-1)},a.handleNextButtonClick=function(e){a.props.onChangePage(e,a.props.page+1)},a.handleLastPageButtonClick=function(e){a.props.onChangePage(e,Math.max(0,Math.ceil(a.props.count/a.props.rowsPerPage)-1))},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.count,r=e.page,s=e.rowsPerPage,o=e.theme;return n.a.createElement("div",{className:t.root},n.a.createElement(Wt.a,{onClick:this.handleFirstPageButtonClick,disabled:0===r,"aria-label":"First Page"},"rtl"===o.direction?n.a.createElement(Zt.a,null):n.a.createElement(zt.a,null)),n.a.createElement(Wt.a,{onClick:this.handleBackButtonClick,disabled:0===r,"aria-label":"Previous Page"},"rtl"===o.direction?n.a.createElement(Kt.a,null):n.a.createElement(Jt.a,null)),n.a.createElement(Wt.a,{onClick:this.handleNextButtonClick,disabled:r>=Math.ceil(a/s)-1,"aria-label":"Next Page"},"rtl"===o.direction?n.a.createElement(Jt.a,null):n.a.createElement(Kt.a,null)),n.a.createElement(Wt.a,{onClick:this.handleLastPageButtonClick,disabled:r>=Math.ceil(a/s)-1,"aria-label":"Last Page"},"rtl"===o.direction?n.a.createElement(zt.a,null):n.a.createElement(Zt.a,null)))}}]),t}(r.Component),ta=Object(Ft.a)(function(e){return{root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:2.5*e.spacing.unit}}},{withTheme:!0})(ea),aa=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.state={spec:a.props.spec,rows:a.props.rows,page:0,rowsPerPage:5},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.rows,r=t.spec,s=t.rowsPerPage,o=t.page,l=s-Math.min(s,a.length-o*s);return n.a.createElement(qt.a,{className:e.root},n.a.createElement("div",{className:e.tableWrapper},n.a.createElement(At.a,{className:e.table},n.a.createElement(Mt.a,null,n.a.createElement(Bt.a,null,r.map(function(e){return n.a.createElement(Rt.a,{title:e.tooltip},n.a.createElement(Ut.a,null,e.header))}))),n.a.createElement(Lt.a,null,a.slice(o*s,o*s+s).map(function(e){return n.a.createElement(Bt.a,{key:e.id},r.map(function(t){return t.funcItemTooltip&&t.funcItemTooltip(e)?n.a.createElement(Rt.a,{title:e.error},n.a.createElement(Ut.a,null,$t(e,t))):n.a.createElement(Ut.a,null,$t(e,t))}))}),l>0&&n.a.createElement(Bt.a,{style:{height:48*l}},n.a.createElement(Ut.a,{colSpan:6}))),n.a.createElement(Vt.a,null,n.a.createElement(Bt.a,null,n.a.createElement(Ht.a,{rowsPerPageOptions:[5,10,25],colSpan:3,count:a.length,rowsPerPage:s,page:o,SelectProps:{native:!0},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:ta}))))))}}]),t}(r.Component),ra=Object(Ft.a)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:500},tableWrapper:{overflowX:"auto"}}})(aa),na=a(995),sa=a(1006),oa=(a(896),Object(Ft.a)({root:{flexGrow:1}})(function(e){var t=e.title,a=e.completed;return n.a.createElement("div",{className:"progress-bar progress-bar-".concat(0===a?"hidden":"shown")},!0===a?n.a.createElement("div",{className:"progress-complete"},n.a.createElement(sa.a,null),"Complete"):n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{style:{marginTop:"5px"}},t),n.a.createElement(na.a,{style:{width:"90%",paddingTop:"10px"},variant:"determinate",value:a})))})),la=["Unique Record ID","Street Address","Unit","City","State","Zip","Longitude","Latitude","Name","Party Affiliation"],ca=function(e,t){return function(){return t(e.apply(void 0,arguments))}},ia=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce(ca)},ua=[{header:"Import File",tooltip:"The file name of the imported file.",params:["filename"]},{header:"Upload Time",tooltip:"The time it took the file to go from the uploader's computer to the server.",func:A,params:["created","submitted"]},{header:"Queue Delay",tooltip:"The time this import had to wait in queue for other jobs to finish.",func:A,params:["submitted","parse_start"]},{header:"Parse time",tooltip:"The time it took to aggregate address, people, and attribute data into the database.",func:A,params:["parse_start","parse_end"]},{header:"Record Count",tooltip:"The number of unique records contained in the import file.",func:function(e){return e?P()(e,{fractionDigits:0}):""},params:["num_records"]},{header:"Geocode Time",tooltip:"The time it took the system to geocode the addresses in the import file.",func:A,params:["geocode_start","geocode_end"]},{header:"Dedupe Time",tooltip:"The time it took the system to identify and remove duplicates as a result of this import.",func:A,params:["dedupe_start","dedupe_end"]},{header:"Turf Index Time",tooltip:"The time it took the system to index each address to turfs it belongs to.",func:A,params:["turfadd_start","turfadd_end"]},{header:"Address Index Time",tooltip:"The time it took to add these addresses to the master database index.",func:A,params:["index_start","index_end"]},{header:"Total Time",tooltip:"The total time the import took from file upload start to complete finish.",func:A,params:["created","completed"]}];function da(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function pa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?da(a,!0).forEach(function(t){Object(Fe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):da(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ma=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={data:a.props.data||[],headers:a.props.headers||[],fields:la,formats:{},mapped:[]},a.formatHeaders=function(e){return e.map(function(e){return{value:e,label:e}})},a.updateFormats=function(e,t){return a.setState({formats:pa({},a.state.formats,Object(Fe.a)({},e,t))},function(){return a.updateMapped()})},a.updateMapped=function(){return a.setState({mapped:a.mapData(a.state)||[]},function(){return a.props.getMapped&&a.props.getMapped(a.state.mapped)})},a.mapData=function(e){var t=e.formats,r=e.fields,n=Object(Oe.a)(a),s=n.generateFormats,o=n.getAllIndexes,l=n.parseData;return ia(s,o,l)(t,r)},a.generateFormats=function(e,t){return Nt()(t,function(t){return e[t]?{name:t,format:e[t]}:{name:t,format:null}})},a.getAllIndexes=function(e){return Nt()(e,function(e){var t=e.name,r=e.format;if(r&&Array.isArray(r.value)){var n=r.value.map(function(e){return a.state.headers.findIndex(function(t){return t===e.value})});return{name:t,format:r,indexes:n}}if(r){var s=a.state.headers.findIndex(function(e){return r.value&&e===r.value.value});return{name:t,format:r,indexes:s}}return{name:t,format:r,indexes:null}})},a.parseData=function(e){var t=a.state.data;return Nt()(t,function(t){return Nt()(e,function(e){var a=e.indexes,r=e.format;return a&&Array.isArray(a)?a.reduce(function(e,a){return"".concat(e.trim()," ").concat(t[a].trim())},"").trim():a&&t[a]?t[a].split(r.map1.value)[r.map2.value]:""})})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.updateFormats,t=void 0===e?function(){return console.warn("Cannot find update format function.")}:e,a=this.props.fields,r=void 0===a?[]:a,s=this.state.headers,o=void 0===s?[]:s,l=this.formatHeaders(o);return n.a.createElement(n.a.Fragment,null,r.map(function(e){return n.a.createElement(_t,{key:e,label:e,updateFormats:t,options:l,checkbox:!0,isMulti:!0})}))}}]),t}(n.a.Component),fa=function(e){var t=e.data,a=e.title;return n.a.createElement("div",{className:"records-wrapper"},t.map(function(e){return n.a.createElement("div",{className:"preview-item  ".concat(a?" preview-title":""),key:"".concat(e).concat(3444*Math.random())},n.a.createElement("div",{style:{width:250}},""!==e?e:"NULL"))}))};a(897);function ha(){return parseInt(1e3*Math.random())}var va=function(e){var t=e.titles,a=e.records;return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",null,"Sample Records based on selection"),n.a.createElement("div",{key:"".concat(t).concat(a),style:{display:"flex"}},n.a.createElement(fa,{key:"".concat(t).concat(ha()),data:t,title:!0}),a.map(function(e){return n.a.createElement(fa,{key:"".concat(e).concat(ha()),data:e})})))},ba=a(427),ga=a.n(ba),Ea=a(428),ya=a.n(Ea),Oa=a(996);function ka(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function xa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ka(a,!0).forEach(function(t){Object(Fe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ka(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Sa={loading:!1,sending:!1,data:null,headers:[],mapped:[],perPage:localStorage.getItem("importsperpage")||5,pageNum:1,submitting:!1,completed:0},wa=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state=xa({server:a.props.server,imports:[]},Sa),a.preProcess=function(){var e=Object(i.a)(c.a.mark(function e(t,r){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.shift(),t.pop(),a.setState({data:t,headers:n,filename:r});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.sendData=Object(i.a)(c.a.mark(function e(){var t,r,n,s,o,l,i,u,d,p,m,f;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,r=t.mapped,n=t.filename,s=r.length,a.setState({sending:!0,completed:1}),e.next=5,U(a.props.server,F+"/import/begin","POST",{filename:n,attributes:["Name","Party Affiliation"]});case 5:l=(o=["#","apt","unit","ste","spc"]).map(function(e){return new RegExp(".* "+e+" ","i")}),i=o.map(function(e){return new RegExp(" "+e+" .*","i")});case 8:if(!r.length){e.next=34;break}u=[],d=0;case 11:if(!(d<1e3)){e.next=28;break}if(!r.length){e.next=25;break}if((p=r.pop())[3]){e.next=24;break}e.t0=c.a.keys(o);case 16:if((e.t1=e.t0()).done){e.next=24;break}if(m=e.t1.value,!p[2].match(l[m])){e.next=22;break}return p[3]=p[2].replace(l[m],"").trim(),p[2]=p[2].replace(i[m],"").trim(),e.abrupt("break",24);case 22:e.next=16;break;case 24:u.push(p);case 25:d++,e.next=11;break;case 28:return e.next=30,U(a.props.server,F+"/import/add","POST",{filename:n,data:u});case 30:f=Math.ceil((s-r.length)/s*100),a.setState({completed:f}),e.next=8;break;case 34:return e.next=36,U(a.props.server,F+"/import/end","POST",{filename:n});case 36:a.setState({completed:!0}),M("Upload complete! An import job has been queued and will process soon."),setTimeout(function(){a.setState({sending:!1}),a._loadData()},3e3);case 39:case"end":return e.stop()}},e)})),a._loadData=Object(i.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a.setState({loading:!0}),e.prev=2,e.next=5,W(Object(Oe.a)(a));case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),L(e.t0,"Unable to load import data.");case 11:a.setState({loading:!1,imports:t},function(){a._resetState()});case 12:case"end":return e.stop()}},e,null,[[2,8]])})),a._resetState=function(){return a.setState(xa({},Sa))},a.getMapped=function(e){return a.setState({mapped:e})},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"preProcessError",value:function(e){L(e,"Failed to preprocess the import file.")}},{key:"render",value:function(){var e=this,t=this.state,a=t.mapped,r=void 0===a?[]:a,s=t.data,o=void 0===s?[]:s,l=t.headers,c=void 0===l?[]:l,i=t.perPage,u=t.pageNum,d=t.imports,p=t.loading,m=t.completed;return p?n.a.createElement(S.a,null):c.length?n.a.createElement("div",null,n.a.createElement(oa,{title:"Uploading import file...",completed:m}),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("h3",null,"Import Data")," \xa0\xa0\xa0",n.a.createElement(H,{icon:j.h,size:"3x"})),n.a.createElement(ma,{headers:c,fields:la,data:o,getMapped:this.getMapped}),n.a.createElement(Oa.a,{variant:"middle"}),n.a.createElement("br",null),n.a.createElement(ya.a,{disabled:this.state.sending,variant:"contained",color:"primary",onClick:function(){return e.sendData()}},"Import"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(Oa.a,{variant:"middle"}),n.a.createElement(va,{key:this,titles:la,records:r.slice(0,3)})):n.a.createElement("div",null,n.a.createElement(ga.a,{label:"Data Importa",onError:this.preProcessError,onFileLoaded:this.preProcess}),n.a.createElement("br",null),n.a.createElement("h3",null,"Select a CSV file to get to the next menu!"),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(B,{flag:this.state.loading,func:function(){return e._loadData()}},n.a.createElement(ra,{perPage:i,pageNum:u,spec:ua,rows:d,handlePageClick:this.handlePageClick,handlePageNumChange:this.handlePageNumChange})))}}]),t}(r.Component),ja=function(e){return new Date(e).toString()},Ca=function(e){return"boolean"===typeof e.success?e.success?"successful":"failed":e.started?"running":"waiting"},Ta=function(e){return e.error?e.error:null},Da=function(e,t){switch(e){case"ImportFile":return"Import file "+t.filename;case"Turf":return"Turf "+t.name;default:return"Unknown"}},Pa=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._loadData=Object(i.a)(c.a.mark(function e(){var t,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],a.setState({loading:!0}),e.next=4,U(a.state.server,F+"/queue/list");case 4:(r=e.sent).data&&(t=r.data.map(function(e){var t=e[0];return t.type=e[1],t.obj=e[2],t})),a.setState({rows:t,loading:!1});case 7:case"end":return e.stop()}},e)})),a.state={rows:[],server:a.props.server},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state.rows;return n.a.createElement(B,{flag:this.state.loading,func:function(){return e._loadData()}},n.a.createElement(ra,{spec:[{header:"Enqueu Time",tooltip:"The date/time that this job entered the queue.",func:ja,params:["created"]},{header:"Task",tooltip:"The operation that this queue manages.",params:["task"]},{header:"Queue Delay",tooltip:"The time this task had to wait in queue for other jobs to finish.",func:A,params:["created","started"]},{header:"Runtime",tooltip:"The time it took for this task to complete.",func:A,params:["started","completed"]},{header:"Status",tooltip:"The status of this particular task.",func:Ca,funcItemTooltip:Ta},{header:"Task Reference",tooltip:"The particular item that queued task was processing.",func:Da,params:["type","obj"]}],rows:t}))}}]),t}(r.Component),Ia=a(1007),Na=a(129),_a=a(147),Fa=a.n(_a);function Aa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Ma(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Aa(a,!0).forEach(function(t){Object(Fe.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Aa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var La=function(e){return{main:Object(Fe.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Ma({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:175,width:"calc(100% - ".concat(175,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:175,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(Fe.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:7*e.spacing.unit},e.breakpoints.up("sm"),{width:9*e.spacing.unit}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit,height:"100vh",overflow:"auto"},chartContainer:{marginLeft:-22},tableContainer:{height:320},h5:{marginBottom:2*e.spacing.unit}}},Ua=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={classes:e.classes},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.classes;return n.a.createElement("main",{className:e.main},n.a.createElement(Ia.a,null),n.a.createElement(qt.a,{className:e.paper},n.a.createElement(Na.a,{component:"h1",variant:"h5"},"HelloVoterHQ is loading..."),n.a.createElement(S.a,{height:15})),n.a.createElement("br",null),n.a.createElement("center",null,"Built with ",n.a.createElement("span",{role:"img","aria-label":"Love"},"\u2764\ufe0f")," by Our Voice USA"))}}]),t}(r.Component),Va=Fa()(La)(Ua),Ha=a(997),Ba=a(998),Ra=a(994),qa=a(1005),Wa=a(429),Qa=a.n(Wa),za=function(e){function t(e){var a,r;Object(u.a)(this,t),a=Object(p.a)(this,Object(m.a)(t).call(this,e));try{r=a.props.location.pathname.split("/").pop(),E.a.decode(r),a.props.refer._loadData(r)}catch(s){L(s,"Unable to extract jwt from URI"),r="error"}var n=[{label:"Organization ID",value:"org"},{label:"3rd Party Server",value:"server"}];return a.state={dev:!1,classes:e.classes,token:r,selectedLoginOption:n[0],loginOptions:n},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.classes,r=t.token,s=t.loginOptions,o=t.selectedLoginOption;return r&&"error"!==r?n.a.createElement(h.a,null,n.a.createElement(v.b,{render:function(){return n.a.createElement(v.a,{to:"/"})}})):n.a.createElement("main",{className:a.main},n.a.createElement(Ia.a,null),n.a.createElement(qt.a,{className:a.paper},n.a.createElement(Ne.a,{className:a.avatar},n.a.createElement(Qa.a,null)),n.a.createElement(Na.a,{component:"h1",variant:"h5"},"Sign in to HelloVoterHQ"),n.a.createElement("form",{className:a.form,onSubmit:function(t){t.preventDefault(),e.props.refer.doSave(t,e.state.target)}},n.a.createElement(ke.a,{value:o,options:s,onChange:function(t){return e.setState({selectedLoginOption:t})}}),n.a.createElement(Ga,{refer:this}),n.a.createElement(_e.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:function(){return e.setState({target:"google"})}},"Google Sign In"),n.a.createElement(_e.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.setState({target:"facebook"})},className:a.submit},"Facebook Sign In"))),n.a.createElement("br",null),n.a.createElement("center",null,"Built with ",n.a.createElement("span",{role:"img","aria-label":"Love"},"\u2764\ufe0f")," by Our Voice USA"))}}]),t}(r.Component),Ga=function(e){switch(e.refer.state.selectedLoginOption.value){case"org":return n.a.createElement("div",null,n.a.createElement(Ha.a,{margin:"normal",required:!0,fullWidth:!0},n.a.createElement(qa.a,{htmlFor:"domain"},"Enter your Organization ID. Example: NCC1701"),n.a.createElement(Ra.a,{id:"orgId",name:"orgId",autoComplete:"orgId",autoFocus:!0,defaultValue:e.refer.state.orgId})),n.a.createElement(Ba.a,{control:n.a.createElement(xe.a,{value:"ack",color:"primary",required:!0}),label:"By checking this box you acknowledge that you have read and agreed to our terms of use."}));case"server":return n.a.createElement("div",null,n.a.createElement(Ha.a,{margin:"normal",required:!0,fullWidth:!0},n.a.createElement(qa.a,{htmlFor:"domain"},"Server Address"),n.a.createElement(Ra.a,{id:"server",name:"server",autoComplete:"server",autoFocus:!0,defaultValue:e.refer.state.qserver})),n.a.createElement(Ba.a,{control:n.a.createElement(xe.a,{value:"ack",color:"primary",required:!0}),label:"By checking this box you acknowledge that the server to which you are connecting is not affiliated with Our Voice USA and the data you send and receive is governed by that server's terms of use."}));default:return null}},Ja=Fa()(La)(za),Ya=function(e){var t=e.menuLogout,a=e.handleCloseLogout,r=e._logout;return n.a.createElement(Le.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(Ue.a,{id:"alert-dialog-title"},"Are you sure you wish to logout?"),n.a.createElement(Ve.a,null,n.a.createElement(_e.a,{onClick:a,color:"primary",autoFocus:!0},"No"),n.a.createElement(_e.a,{onClick:function(){return r()},color:"primary"},"Yes")))},Ka=a(102),Xa=a(430),Za=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._loadData=Object(i.a)(c.a.mark(function e(){var t,r,s,o,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r=[],s=[{label:"None"}],e.next=3,Promise.all([Z(Object(Oe.a)(a),null,!0),ce(Object(Oe.a)(a))]);case 3:o=e.sent,l=Object(we.a)(o,2),t=l[0],(r=l[1]).forEach(function(e){s.push({value:q(e),id:e.id,label:n.a.createElement(rt,{key:e.id,form:e,refer:Object(Oe.a)(a)})})}),a.setState({turfs:t,forms:r,formOptions:s});case 9:case"end":return e.stop()}},e)})),a.handleFormsChange=function(){var e=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t||(t=[]),a.setState({selectedFormsOption:t,formId:t.id},function(){return a.loadMarkerData()});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onMarkerClick=function(){var e=Object(i.a)(c.a.mark(function e(t,r,n){var s,o,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.state.formId,a.setState({showingInfoWindow:!0}),e.next=4,fe(Object(Oe.a)(a),t.address.id,s);case 4:o=e.sent,(l=o[0]).title=t.title,a.setState({selectedPlace:l,activeMarker:r});case 8:case"end":return e.stop()}},e)}));return function(t,a,r){return e.apply(this,arguments)}}(),a.onTurfClick=function(){var e=Object(i.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),a.setState({infoLocation:t.paths[0],activeTurf:t.name});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.loadMarkerData=function(){var e=Object(i.a)(c.a.mark(function e(t,r){var n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r?(n=r.center.lng(),s=r.center.lat(),a.setState({longitude:n,latitude:s})):(n=a.state.longitude,s=a.state.latitude),e.next=3,pe(Object(Oe.a)(a),n,s,a.state.formId);case 3:o=e.sent,a.setState({addresses:o});case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onMapClicked=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.state={turfs:[],addresses:[],showingInfoWindow:!1,selectedPlace:{},selectedFormsOption:{},formId:null},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"statusColor",value:function(e){if(!e.visits||0===e.visits.length)return"purple";switch(e.visits[0].status){case 0:return"yellow";case 1:return"green";case 2:return"red";default:return"purple"}}},{key:"render",value:function(){var e,t=this,a=[],r=this.state,s=r.addresses,o=r.selectedPlace,l=(e=this.props).isGeolocationAvailable&&e.isGeolocationEnabled?e.coords?{access:!0,lng:e.coords.longitude,lat:e.coords.latitude}:{access:!0}:{access:!1};return l.lng&&l.lat?(this.state.turfs.forEach(function(e){e.geometry&&Object(vt.geojson2polygons)(JSON.parse(e.geometry)).forEach(function(t){return a.push({name:e.name,polygon:t})})}),n.a.createElement(B,{flag:this.state.loading,func:function(){return t.loadMarkerData()}},n.a.createElement("div",{style:{display:"flex"}},"Show interaction status by Form:",n.a.createElement(ke.a,{value:this.state.selectedFormsOption,onChange:this.handleFormsChange,options:this.state.formOptions,isSearchable:!0,placeholder:"None"})),n.a.createElement(Ka.Map,{google:this.props.google,zoom:17,initialCenter:l,onReady:this.loadMarkerData,onDragend:this.loadMarkerData,onClick:this.onMapClicked},s.map(function(e,a){return n.a.createElement(Ka.Marker,{key:a,onClick:t.onMarkerClick,title:e.address.street+", "+e.address.city+", "+e.address.state+", "+e.address.zip,icon:{url:"http://maps.google.com/mapfiles/ms/icons/"+t.statusColor(e)+"-dot.png"},address:e.address,position:{lng:e.address.longitude,lat:e.address.latitude}})}),a.map(function(e,a){return n.a.createElement(Ka.Polygon,{key:a,paths:e.polygon,name:e.name,onClick:t.onTurfClick,strokeColor:"#0000FF",strokeWeight:5,fillColor:"#000000",fillOpacity:0})}),n.a.createElement(Ka.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},n.a.createElement($a,{place:o})),n.a.createElement(Ka.InfoWindow,{position:this.state.infoLocation,visible:!!this.state.activeTurf},n.a.createElement("h1",null,"Turf: ",this.state.activeTurf))))):n.a.createElement("div",null,"Loading map...")}}]),t}(r.Component),$a=function(e){var t=e.place.people,a=e.place.units;return t||(t=[]),a||(a=[]),n.a.createElement("div",null,n.a.createElement("h1",null,e.place.title),a.length?"This is a multi unit address with "+a.length+" units.":"",t.map(function(e){return n.a.createElement(er,{person:e})}))},er=function(e){var t=e.person.attrs;t||(t=[]);var a="",r="";return t.forEach(function(e){"Name"===e.name&&(a=e.value),"Party Affiliation"===e.name&&(r=e.value)}),n.a.createElement("div",null,n.a.createElement("b",null,"Name: ",a),n.a.createElement("br",null),n.a.createElement("b",null,"Party: ",r))},tr=Object(Ka.GoogleApiWrapper)(function(e){return{apiKey:e.apiKey}})(Object(Xa.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})(Za)),ar=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,"Settings Component")}}]),t}(r.Component),rr=a(999),nr=a(993),sr=a(431),or=a.n(sr),lr=a(17),cr=a.n(lr),ir=function(e){var t=e.classes,a=e.server,r=e.open,s=e.handleDrawerOpen,o=e.getUserProp;return n.a.createElement(rr.a,{position:"absolute",className:cr()(t.appBar,r&&t.appBarShift)},n.a.createElement(nr.a,{disableGutters:!r,className:t.toolbar},n.a.createElement(Wt.a,{color:"inherit","aria-label":"Open drawer",onClick:s,className:cr()(t.menuButton,r&&t.menuButtonHidden)},n.a.createElement(or.a,null)),n.a.createElement(Na.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},n.a.createElement("div",{style:{margin:10}},"HelloVoterHQ @ ",a.hostname)),n.a.createElement(Ne.a,{alt:"Remy Sharp",src:o("avatar"),className:t.avatar,onClick:function(){return window.location.href="/HelloVoterHQ/#/volunteers/view/"+o("id")}})))},ur=a(1004),dr=a(445),pr=a.n(dr),mr=a(1e3),fr=a(432),hr=a.n(fr),vr=a(433),br=a.n(vr),gr=a(434),Er=a.n(gr),yr=a(435),Or=a.n(yr),kr=a(436),xr=a.n(kr),Sr=a(437),wr=a.n(Sr),jr=a(438),Cr=a.n(jr),Tr=a(439),Dr=a.n(Tr),Pr=a(440),Ir=a.n(Pr),Nr=a(441),_r=a.n(Nr),Fr=a(442),Ar=a.n(Fr),Mr=a(443),Lr=a.n(Mr),Ur=a(444),Vr=a.n(Ur),Hr=function(e){var t=e.handleClickLogout;return n.a.createElement(r.Fragment,null,n.a.createElement(Te.a,null,n.a.createElement(h.b,{to:"/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(hr.a,null)),n.a.createElement(Pe.a,{primary:"Dashboard"}))),n.a.createElement(h.b,{to:"/volunteers/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(br.a,null)),n.a.createElement(Pe.a,{primary:"Volunteers"}))),n.a.createElement(h.b,{to:"/teams/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(Er.a,null)),n.a.createElement(Pe.a,{primary:"Teams"}))),n.a.createElement(h.b,{to:"/turf/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(Or.a,null)),n.a.createElement(Pe.a,{primary:"Turf"}))),n.a.createElement(h.b,{to:"/forms/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(xr.a,null)),n.a.createElement(Pe.a,{primary:"Forms"}))),n.a.createElement(h.b,{to:"/attributes/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(wr.a,null)),n.a.createElement(Pe.a,{primary:"Attributes"}))),n.a.createElement(h.b,{to:"/map/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(Cr.a,null)),n.a.createElement(Pe.a,{primary:"Map"}))),n.a.createElement(h.b,{to:"/import/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(Dr.a,null)),n.a.createElement(Pe.a,{primary:"Import Data"}))),n.a.createElement(h.b,{to:"/queue/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(Ir.a,null)),n.a.createElement(Pe.a,{primary:"System Queue"}))),n.a.createElement(h.b,{to:"/analytics/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(_r.a,null)),n.a.createElement(Pe.a,{primary:"Analytics"})))),n.a.createElement(Oa.a,null),n.a.createElement(Te.a,null,n.a.createElement(De.a,{button:!0,onClick:t},n.a.createElement(mr.a,null,n.a.createElement(Ar.a,null)),n.a.createElement(Pe.a,{primary:"Logout"}))),n.a.createElement(Oa.a,null),n.a.createElement(Te.a,null,n.a.createElement(h.b,{to:"/about/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(Lr.a,null)),n.a.createElement(Pe.a,{primary:"About"}))),n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoterHQ/tree/master/docs/"},n.a.createElement(De.a,{button:!0},n.a.createElement(mr.a,null,n.a.createElement(Vr.a,null)),n.a.createElement(Pe.a,{primary:"Help"})))))},Br=function(e){var t=e.classes,a=e.open,r=e.handleClickLogout,s=e.handleDrawerClose;return n.a.createElement(ur.a,{variant:"permanent",classes:{paper:cr()(t.drawerPaper,!a&&t.drawerPaperClose)},open:a},n.a.createElement("div",{className:t.toolbarIcon},n.a.createElement(Wt.a,{onClick:s},n.a.createElement(pr.a,null))),n.a.createElement(Oa.a,null),n.a.createElement(Hr,{handleClickLogout:r}))},Rr=function(e){var t=e.location;return n.a.createElement("div",null,n.a.createElement("h1",null,"OOOPS!!"),n.a.createElement("div",null,"We can't seem to find the page you're looking for:",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("code",null,t.pathname),n.a.createElement("br",null),n.a.createElement("br",null),"If you feel this page is in error,"," ",n.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoterHQ/issues/new"},"report an issue")," ","and the coders will take a look."))},qr=function(e){var t=e.server,a=e.refer,r=e.google_maps_key;return n.a.createElement(v.d,null,n.a.createElement(v.b,{exact:!0,path:"/",render:function(){return n.a.createElement(Dt,{server:t,refer:a})}}),n.a.createElement(v.b,{path:"/volunteers/",render:function(){return n.a.createElement(ot,{server:t})}}),n.a.createElement(v.b,{path:"/teams/",render:function(){return n.a.createElement(We,{server:t})}}),n.a.createElement(v.b,{path:"/turf/",render:function(){return n.a.createElement(yt,{server:t})}}),n.a.createElement(v.b,{path:"/forms/",render:function(){return n.a.createElement(tt,{server:t})}}),n.a.createElement(v.b,{path:"/attributes/",render:function(){return n.a.createElement(Pt,{server:t})}}),n.a.createElement(v.b,{path:"/map/",render:function(){return n.a.createElement(tr,{server:t,apiKey:r})}}),n.a.createElement(v.b,{path:"/import/",render:function(){return n.a.createElement(wa,{server:t})}}),n.a.createElement(v.b,{path:"/queue/",render:function(){return n.a.createElement(Pa,{server:t})}}),n.a.createElement(v.b,{path:"/analytics/",render:function(){return n.a.createElement(kt,{server:t})}}),n.a.createElement(v.b,{path:"/settings/",render:function(){return n.a.createElement(ar,{server:t})}}),n.a.createElement(v.b,{path:"/jwt/",render:function(e){return n.a.createElement(Ja,Object.assign({},e,{refer:a}))}}),n.a.createElement(v.b,{path:"/about/",render:function(){return n.a.createElement(ye,{server:t})}}),n.a.createElement(v.b,{component:Rr}))},Wr=(a(929),function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e)))._loadData=function(){var e=Object(i.a)(c.a.mark(function e(t){var r,n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.setState({loading:!0}),r="",n="","",e.prev=4,t?(n=t,localStorage.setItem("jwt",t)):n=localStorage.getItem("jwt"),r=localStorage.getItem("server"),s=localStorage.getItem("orgId"),o={error:!0},!r||!n){e.next=19;break}return e.prev=10,e.next=13,a.singHello(r,E.a.decode(n).id.split(":")[0],n,s);case 13:o=e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),console.warn(e.t0);case 19:o.error&&(r="",n=""),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(4),console.warn(e.t1);case 25:a.setState({server:{hostname:r,jwt:n},loading:!1},function(){return a._loadKeys()});case 26:case"end":return e.stop()}},e,null,[[4,22],[10,16]])}));return function(t){return e.apply(this,arguments)}}(),a._loadKeys=Object(i.a)(c.a.mark(function e(){var t,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.state.google_maps_key){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,U(a.state.server,F+"/google_maps_key");case 5:if(t=e.sent){e.next=8;break}return e.abrupt("return");case 8:(r=document.createElement("script")).type="text/javascript",r.src="https://maps.googleapis.com/maps/api/js?key="+t.google_maps_key+"&libraries=places",document.head.appendChild(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.warn(e.t0);case 17:a.setState({google_maps_key:t.google_maps_key});case 18:case"end":return e.stop()}},e,null,[[2,14]])})),a.handleClickLogout=function(){a.setState({menuLogout:!0})},a.handleCloseLogout=function(){a.setState({menuLogout:!1})},a.onChange=function(e){a.setState({connectForm:e})},a.getUserProp=function(e){var t;if(!a.state.server.jwt)return null;try{t=E.a.decode(a.state.server.jwt)[e]}catch(r){L(r,"Holy crap this error should never happen!! Better dust off that r\xe9sum\xe9..."),console.warn(r)}return t},a._logout=function(){localStorage.removeItem("server"),localStorage.removeItem("jwt"),localStorage.removeItem("orgId"),a.setState({menuLogout:!1,server:{}})},a.doSave=function(){var e=Object(i.a)(c.a.mark(function e(t,r){var n,s,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.orgId?(s=t.target.orgId.value,a.setState({orgId:s}),localStorage.setItem("orgId",s),o=s.substring(0,2).toLowerCase(),n="gotv-"+o+".ourvoiceusa.org"):n=t.target.server?t.target.server.value:"localhost:8080",e.next=3,a.singHello(n,r,null,s);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.singHello=function(){var e=Object(i.a)(c.a.mark(function e(t,r,n,s){var o,l,i,u,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("server",t),localStorage.setItem("orgId",s),l=!0,t.match(/^localhost/)&&(l=!1),e.prev=4,e.next=7,fetch("http"+(l?"s":"")+"://"+t+F+"/hello",{method:"POST",headers:{Authorization:"Bearer "+(n||(a.state.server.jwt?a.state.server.jwt:"of the one ring")),"Content-Type":"application/json"}});case 7:if(o=e.sent,i=o.headers.get("x-sm-oauth-url")){e.next=11;break}return e.abrupt("return",{error:!0,msg:"Missing required header."});case 11:e.t0=o.status,e.next=200===e.t0?14:400===e.t0?15:401===e.t0?16:403===e.t0?21:22;break;case 14:return e.abrupt("break",23);case 15:return e.abrupt("return",{error:!0,msg:"The server didn't understand the request sent from this device."});case 16:return u="","google"===r&&(u="gm"),"facebook"===r&&(u="fm"),window.location.href=i+"/"+u+"/?app=HelloVoterHQ"+(l?"":"&local=true"),e.abrupt("return",{error:!1,flag:!0});case 21:return e.abrupt("return",{error:!0,msg:"We're sorry, but your request to volunteer with this server has been rejected."});case 22:return e.abrupt("return",{error:!0,msg:"Unknown error connecting to server."});case 23:return e.next=25,o.json();case 25:if(!0===(d=e.sent).data.ready){e.next=30;break}return e.abrupt("return",{error:!1,msg:"The server said: "+d.msg});case 30:return console.warn({server:t,dbx:null,user:a.state.user}),e.abrupt("return",{error:!1,flag:!0});case 32:e.next=38;break;case 34:return e.prev=34,e.t1=e.catch(4),console.warn("singHello: "+e.t1),e.abrupt("return",{error:!0,msg:"Unable to make a connection to target server"});case 38:case"end":return e.stop()}},e,null,[[4,34]])}));return function(t,a,r,n){return e.apply(this,arguments)}}(),a.handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})};var r=O.a.parse(window.location.search);return a.state={loading:!0,open:!0,menuLogout:!1,server:{},qserver:r.server},console.log("%cWARNING: This is a developer console! If you were told to open this and copy/paste something, and you are not a javascript developer, it is a scam and entering info here could give them access to your account!","background: red; color: yellow; font-size: 45px"),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,r=a.server;return a.loading?n.a.createElement(h.a,null,n.a.createElement(v.b,{path:"/",render:function(e){return n.a.createElement(Va,e)}})):r.hostname?n.a.createElement(h.a,null,n.a.createElement("div",{className:t.root},n.a.createElement(x.a,null),n.a.createElement(Ia.a,null),n.a.createElement(ir,{open:this.state.open,classes:t,server:r,getUserProp:this.getUserProp,handleDrawerOpen:this.handleDrawerOpen}),n.a.createElement(Br,{classes:t,open:this.state.open,getUserProp:this.getUserProp,handleClickLogout:this.handleClickLogout,handleDrawerClose:this.handleDrawerClose}),n.a.createElement("main",{className:t.content},n.a.createElement("div",{className:t.appBarSpacer}),n.a.createElement(b.NotificationContainer,null),n.a.createElement(qr,{server:r,refer:this,google_maps_key:this.state.google_maps_key}),n.a.createElement(Ya,{menuLogout:this.state.menuLogout,handleCloseLogout:this.handleCloseLogout,_logout:this._logout})))):n.a.createElement(h.a,null,n.a.createElement(v.b,{path:"/",render:function(t){return n.a.createElement(Ja,Object.assign({},t,{refer:e}))}}))}}]),t}(r.Component)),Qr=Object(Ft.a)(La)(Wr);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(Qr,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[489,1,2]]]);
//# sourceMappingURL=main.36047ff8.chunk.js.map