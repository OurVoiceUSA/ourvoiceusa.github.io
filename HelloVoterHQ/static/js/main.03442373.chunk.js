(this.webpackJsonpHelloVoterHQ=this.webpackJsonpHelloVoterHQ||[]).push([[0],{100:function(e,t,a){"use strict";var n=a(99),r=a(15),l=a(16),o=a(19),s=a(17),c=a(18),i=a(0),u=a.n(i),d=a(21),p=a(1067),m=(a(967),function(e){function t(){var e,a;Object(r.a)(this,t);for(var l=arguments.length,c=new Array(l),i=0;i<l;i++)c[i]=arguments[i];return(a=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).state={checked:a.props.checked||!1,isMulti:a.props.isMulti||!0,value:a.props.value,map1:{value:",",label:"delimited by comma"},map2:{value:0,label:"1st value"}},a._handleCheck=function(){var e=a.props,t=e.updateFormats,n=e.label;a.setState({checked:!a.state.checked,isMulti:!a.state.isMulti,value:"",map1:{value:",",label:"delimited by comma"},map2:{value:0,label:"1st value"}},(function(){return t&&t(n,a.state)}))},a._setValue=function(e){var t=a.props,n=t.updateFormats,r=t.label;return a.setState({value:e},(function(){return n&&n(r,a.state)}))},a._setMapValue=function(e,t){var r=a.props,l=r.updateFormats,o=r.label;a.setState(Object(n.a)({},e,t),(function(){return l&&l(o,a.state)}))},a._renderCheckbox=function(e){var t=e.checked;return u.a.createElement(p.a,{className:"ck-bx",onChange:function(){return a._handleCheck()},onClick:function(){return a._handleCheck()},value:"ack",color:"primary",checked:t})},a._renderMapOptions=function(e){var t=e.map1,n=void 0===t?"":t,r=e.map2,l=void 0===r?"":r;e.value;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{style:{width:160}},u.a.createElement(d.a,{className:"map-option-1",onChange:function(e){return a._setMapValue("map1",e)},value:n,options:[{value:",",label:"delimited by comma"},{value:" ",label:"delimited by space"}],placeholder:"None"})),u.a.createElement("div",{style:{width:150}},u.a.createElement(d.a,{className:"map-option-2",onChange:function(e){return a._setMapValue("map2",e)},value:l,options:[{value:0,label:"1st value"},{value:1,label:"2nd value"},{value:2,label:"last value"}],placeholder:"None"})))},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=void 0===a?"":a,r=t.options,l=void 0===r?[]:r,o=t.checkbox,s=void 0!==o&&o,c=t.dimensions,i=(c=void 0===c?{width:450,labelWidth:150}:c).width,p=c.labelWidth,m=this.state,f=m.checked,h=m.isMulti,b=m.value,v=m.map1,g=m.map2;return u.a.createElement("div",{className:"mapselect"},u.a.createElement("div",{style:{width:p}},n,":")," ",u.a.createElement("div",{style:{width:i}},u.a.createElement(d.a,{className:"map-select-input",value:b,options:l,onChange:function(t){return e._setValue(t)},isMulti:h,placeholder:"None"})),s?this._renderCheckbox({checked:f}):"",f?this._renderMapOptions({map1:v,map2:g,value:b}):"")}}]),t}(u.a.Component)),f=a(9),h=a(1051),b=a(1052),v=a(1056),g=a(1055),E=a(1057),O=a(1066),y=a(1053),j=a(1071),k=a(501),S=a(1050),w=a(306),C=a.n(w),x=a(308),T=a.n(x),D=a(307),P=a.n(D),I=a(305),N=a.n(I),_=function(e,t){return t.func?t.params?t.func(e[t.params[0]],e[t.params[1]]):t.func(e):e[t.params[0]]},A=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).handleFirstPageButtonClick=function(e){a.props.onChangePage(e,0)},a.handleBackButtonClick=function(e){a.props.onChangePage(e,a.props.page-1)},a.handleNextButtonClick=function(e){a.props.onChangePage(e,a.props.page+1)},a.handleLastPageButtonClick=function(e){a.props.onChangePage(e,Math.max(0,Math.ceil(a.props.count/a.props.rowsPerPage)-1))},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.count,n=e.page,r=e.rowsPerPage,l=e.theme;return u.a.createElement("div",{className:t.root},u.a.createElement(S.a,{onClick:this.handleFirstPageButtonClick,disabled:0===n,"aria-label":"First Page"},"rtl"===l.direction?u.a.createElement(N.a,null):u.a.createElement(C.a,null)),u.a.createElement(S.a,{onClick:this.handleBackButtonClick,disabled:0===n,"aria-label":"Previous Page"},"rtl"===l.direction?u.a.createElement(P.a,null):u.a.createElement(T.a,null)),u.a.createElement(S.a,{onClick:this.handleNextButtonClick,disabled:n>=Math.ceil(a/r)-1,"aria-label":"Next Page"},"rtl"===l.direction?u.a.createElement(T.a,null):u.a.createElement(P.a,null)),u.a.createElement(S.a,{onClick:this.handleLastPageButtonClick,disabled:n>=Math.ceil(a/r)-1,"aria-label":"Last Page"},"rtl"===l.direction?u.a.createElement(C.a,null):u.a.createElement(N.a,null)))}}]),t}(i.Component),F=Object(f.a)((function(e){return{root:{flexShrink:0,color:e.palette.text.secondary,marginLeft:2.5*e.spacing.unit}}}),{withTheme:!0})(A),M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.state={spec:a.props.spec,rows:a.props.rows,page:0,rowsPerPage:5},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.rows,n=t.spec,r=t.rowsPerPage,l=t.page,o=r-Math.min(r,a.length-l*r);return u.a.createElement(k.a,{className:e.root},u.a.createElement("div",{className:e.tableWrapper},u.a.createElement(h.a,{className:e.table},u.a.createElement(b.a,null,u.a.createElement(y.a,null,n.map((function(e){return u.a.createElement(j.a,{title:e.tooltip},u.a.createElement(g.a,null,e.header))})))),u.a.createElement(v.a,null,a.slice(l*r,l*r+r).map((function(e){return u.a.createElement(y.a,{key:e.id},n.map((function(t){return t.funcItemTooltip&&t.funcItemTooltip(e)?u.a.createElement(j.a,{title:e.error},u.a.createElement(g.a,null,_(e,t))):u.a.createElement(g.a,null,_(e,t))})))})),o>0&&u.a.createElement(y.a,{style:{height:48*o}},u.a.createElement(g.a,{colSpan:6}))),u.a.createElement(E.a,null,u.a.createElement(y.a,null,u.a.createElement(O.a,{rowsPerPageOptions:[5,10,25],colSpan:3,count:a.length,rowsPerPage:r,page:l,SelectProps:{native:!0},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage,ActionsComponent:F}))))))}}]),t}(i.Component),U=Object(f.a)((function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:500},tableWrapper:{overflowX:"auto"}}}))(M),L=a(1060),V=a(1070),H=(a(968),Object(f.a)({root:{flexGrow:1}})((function(e){var t=e.title,a=e.completed;return u.a.createElement("div",{className:"progress-bar progress-bar-".concat(0===a?"hidden":"shown")},!0===a?u.a.createElement("div",{className:"progress-complete"},u.a.createElement(V.a,null),"Complete"):u.a.createElement(u.a.Fragment,null,u.a.createElement("h3",{style:{marginTop:"5px"}},t),u.a.createElement(L.a,{style:{width:"90%",paddingTop:"10px"},variant:"determinate",value:a})))})));a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return U})),a.d(t,"c",(function(){return H}))},1006:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),o=a.n(l),s=(a(548),a(5)),c=a.n(s),i=a(15),u=a(16),d=a(19),p=a(17),m=a(18),f=a(22),h=a(47),b=a(175),v=(a(565),a(297)),g=a.n(v),E=a(458),O=a.n(E),y=a(108),j=a.n(y),k=a(153),S=a(3),w=a(29),C=a(299),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){var e,t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.state.global,t={},n.prev=2,n.next=5,c.a.awrap(Object(S.g)(e,"/dashboard"));case 5:t=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),Object(S.C)(n.t0,"Unable to load dashboard info.");case 11:a.setState({api_version:t.version?t.version:"unknown",neo4j_version:t.neo4j_version?t.neo4j_version:"unknown"});case 12:case"end":return n.stop()}}),null,null,[[2,8]])},a.state={global:e.global,api_version:null,neo4j_version:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.api_version,a=e.neo4j_version;return r.a.createElement("div",null,r.a.createElement("div",null,"HelloVoterHQ"," version ","2.0.0"),r.a.createElement("div",null,t?"HelloVoterAPI version "+t:r.a.createElement(k.a,{height:15})),r.a.createElement("div",null,a?"Neo4j version "+a:r.a.createElement(k.a,{height:15})),t&&"unknown"!==t&&"2.0.0"!==t&&r.a.createElement("h3",{style:{color:"red"}},"WARNING: API version doesn't match HQ version."),r.a.createElement("div",null,"\xa9 2019, Our Voice USA, a 501(c)(3) Non-Profit Organization. Not for any candidate or political party."),r.a.createElement("div",null,"This program is free software; refer to our"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/blob/master/LICENSE"},"License")," ","for more details."),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://raw.githubusercontent.com/OurVoiceUSA/HelloVoter/master/docs/Privacy-Policy.md"},"Privacy Policy"),"||",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://raw.githubusercontent.com/OurVoiceUSA/HelloVoter/master/docs/Terms-of-Service.md"},"Terms of Service")),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://twitter.com/OurVoiceUSA"},r.a.createElement(S.b,{icon:C.b})," @OurVoiceUSA")),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.facebook.com/OurVoiceUsa"},r.a.createElement(S.b,{icon:C.a})," @OurVoiceUSA")),r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ourvoiceusa.org/"},r.a.createElement(S.b,{icon:w.j})," ourvoiceusa.org")))}}]),t}(n.Component),T=a(12),D=a(21),P=a(1067),I=a(152),N=a(54),_=function(e){var t=e.value,a=e.percent,n=e.x,l=e.y,o=e.midAngle;return r.a.createElement("g",{transform:"translate(".concat(n,", ").concat(l,")"),textAnchor:o<-90||o>=90?"end":"start"},r.a.createElement("text",{x:0,y:0},"Count: ".concat(t)),r.a.createElement("text",{x:0,y:20},"(Percent: ".concat((100*a).toFixed(2),"%)")))},A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e)))._init=function(){var e,t,n,l,o;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.state.global,a.setState({loading:!0}),t=[],s.next=5,c.a.awrap(Object(S.w)(e));case 5:return n=s.sent,l=[],s.next=9,c.a.awrap(Object(S.l)(e));case 9:o=s.sent,n.forEach((function(n){t.push({value:Object(S.z)(n),id:n.id,label:r.a.createElement(N.a,{global:e,key:n.id,turf:n,refer:Object(T.a)(a)})})})),o.forEach((function(e){l.push({value:Object(S.z)(e),id:e.id,label:e.name})})),a.setState({loading:!1,attributeOptions:l,turfOptions:t});case 13:case"end":return s.stop()}}))},a.doQuery=function(){var e,t,n,r;return c.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e=a.state.global,a.state.selectedAttributeOption){l.next=3;break}return l.abrupt("return");case 3:return a.setState({loading:!0}),t=[],n="/analytics/list?turfId=",a.state.selectedTurfOption&&a.state.selectedTurfOption.id&&(n+=a.state.selectedTurfOption.id),a.state.selectedAttributeOption&&a.state.selectedAttributeOption.id&&(n+="&aId="+a.state.selectedAttributeOption.id),a.state.include_null&&(n+="&include_null=true"),l.next=11,c.a.awrap(Object(S.g)(e,n));case 11:for((r=l.sent)&&r.data&&r.data.map((function(e){return t.push({name:e[0]?e[0]:"No Data",value:e[1]})}));t.length>6;)t[5]={name:"Other",value:t[5].value+t.pop().value};a.setState({data_breakdown:t,loading:!1});case 15:case"end":return l.stop()}}))},a.handleTurfChange=function(e){e||(e=[]),a.setState({selectedTurfOption:e},(function(){return a.doQuery()}))},a.handleAttributeChange=function(e){e||(e=[]),a.setState({selectedAttributeOption:e},(function(){return a.doQuery()}))},a.state={global:e.global,turfOptions:[],selectedTurfOption:null,data_breakdown:[],animation:!0},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._init()}},{key:"render",value:function(){var e=this;return r.a.createElement(S.e,{flag:this.state.loading,func:function(){return e.doQuery()}},r.a.createElement("h3",null,"Analytics"),r.a.createElement(D.a,{value:this.state.selectedAttributeOption,onChange:this.handleAttributeChange,options:this.state.attributeOptions,isMulti:!1,isSearchable:!0,placeholder:"Select an attribute to query data for"}),r.a.createElement("br",null),r.a.createElement(D.a,{value:this.state.selectedTurfOption,onChange:this.handleTurfChange,options:this.state.turfOptions,isMulti:!1,isSearchable:!0,placeholder:"Select a turf to include only records within that turf"}),r.a.createElement(P.a,{color:"primary",checked:this.state.include_null,onChange:function(t,a){e.setState({include_null:a},(function(){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(e.doQuery());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}))}))}}),' Include records with "No Data"',this.state.data_breakdown.length?r.a.createElement(I.e,{width:800,height:400},r.a.createElement(I.c,null),r.a.createElement(I.d,{data:this.state.data_breakdown,dataKey:"value",startAngle:180,endAngle:-180,innerRadius:60,outerRadius:80,label:_,paddingAngle:5,isAnimationActive:this.state.animation},this.state.data_breakdown.map((function(e,t){return r.a.createElement(I.a,{key:"slice-".concat(t),fill:["red","blue","yellow","green","grey"][t]})})),r.a.createElement(I.b,{width:50,position:"center"},this.state.selectedAttributeOption.label))):r.a.createElement("h3",null,"No Data"))}}]),t}(n.Component),F=a(481),M=a(482),U=a.n(M),L=a(310),V=a(147),H=(a(452),Object(V.c)((function(e){return r.a.createElement("div",{style:{display:"flex",padding:"10px"},className:"dashboard-card"},r.a.createElement("div",{style:{padding:"5px 10px"}},r.a.createElement(S.b,{style:{width:50,height:50,color:"gray"},icon:e.icon?e.icon:w.o})),r.a.createElement("div",{style:{flex:1,overflow:"auto"}},r.a.createElement("h3",null,e.name,": ",e.stat)))}))),q=Object(V.b)((function(e){return r.a.createElement("div",{className:"dashboard-container"},e.dash.map((function(t,a){var n=e.cards[t]||{};return r.a.createElement(H,{key:n.name,name:n.name,stat:n.stat,icon:n.icon,index:a})})))})),R=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex,r=Object(V.a)(a.state.dash,t,n);localStorage.setItem("dash",r.map((function(e){return e}))),a.setState((function(){return{dash:r}}))},a._loadData=function(){var e,t,n;return c.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=a.state.global,t={},n=[],a.setState({loading:!0}),l.prev=4,l.next=7,c.a.awrap(Object(S.g)(e,"/dashboard"));case 7:0===(t=l.sent).admins&&a.setState({noAdmins:!0}),n={vol:{name:"Volunteers",stat:t.volunteers,icon:w.r},team:{name:"Teams",stat:t.teams,icon:w.s},turf:{name:"Turfs",stat:t.turfs,icon:w.l},form:{name:"Forms",stat:t.forms,icon:w.d},attributes:{name:"Attributes",stat:t.attributes,icon:w.b},addr:{name:"Addresses",stat:r.a.createElement(F.a,{value:t.addresses,displayType:"text",thousandSeparator:!0}),icon:w.m},dbsz:{name:"Database size",stat:U()(t.dbsize?t.dbsize:0,{round:1}),icon:w.f}},l.next=15;break;case 12:l.prev=12,l.t0=l.catch(4),Object(S.C)(l.t0,"Unable to load dashboard info.");case 15:a.setState({cards:n,data:t,loading:!1});case 16:case"end":return l.stop()}}),null,null,[[4,12]])};var n=(localStorage.getItem("dash")||"vol,team,turf,form,attributes,addr,dbsz").split(",");return a.state={global:e.global,loading:!0,noAdmins:!1,data:{},cards:[],dash:n},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.global,n=t.data,l=t.loading,o=t.noAdmins;return r.a.createElement(S.e,{flag:l,func:this._loadData},n.version&&"2.0.0"!==n.version&&r.a.createElement("h3",{style:{color:"red"}},"WARNING: API version doesn't match HQ version."),r.a.createElement(q,{state:this.state,axis:"xy",onSortEnd:this.onSortEnd,cards:this.state.cards,dash:this.state.dash}),r.a.createElement(S.c,{refer:this}),r.a.createElement(L.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:o,onClose:function(){return e.setState({noAdmins:!1})}},r.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},"Welcome! Looks like you're new here. By default, users have zero permissions when they sign in. To make yourself an admin and gain full access to the UI, run the follow command from the shell:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("pre",null,"npm run makeadmin -- ",a.getUserProp("id")))))}}]),t}(n.Component),Q=a(53),z=a(453),B=a(48),W=a(70),G=a.n(W),J=a(230),Y=a(55),X=a.n(Y),Z=a(102),K=a(87),$=a(1010),ee=a(1012),te=a(1013),ae=a(231),ne=a.n(ae);function re(e){return{value:e,label:Object(Z.ucFirst)(e)}}var le=[re("string"),re("boolean"),re("number"),re("textbox")],oe=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a._deleteAttribute=function(e){var t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.state.global,a.setState({saving:!0,menuDelete:!1}),n.prev=2,n.next=5,c.a.awrap(Object(S.g)(t,"/attribute/delete","POST",{id:e}));case 5:Object(S.D)("Attribute has been deleted."),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),Object(S.C)(n.t0,"Unable to delete Attributes.");case 11:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/attributes/",a._loadData();case 14:case"end":return n.stop()}}),null,null,[[2,8]])},a._createAttribute=function(){var e,t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.state.global,null!==(t=a.addAttributeForm.getValue())){n.next=4;break}return n.abrupt("return");case 4:return a.setState({saving:!0}),n.prev=5,n.next=8,c.a.awrap(Object(S.g)(e,"/attribute/create","POST",{name:t.name}));case 8:Object(S.D)("Attribute has been created."),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),Object(S.C)(n.t0,"Unable to create Attribute.");case 14:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/attributes/",a._loadData();case 17:case"end":return n.stop()}}),null,null,[[5,11]])},a._loadData=function(){var e,t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.state.global,a.setState({loading:!0,search:""}),t=[],n.prev=3,n.next=6,c.a.awrap(Object(S.l)(e));case 6:t=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),Object(S.C)(n.t0,"Unable to load volunteers.");case 12:a.setState({loading:!1,attributes:t});case 13:case"end":return n.stop()}}),null,null,[[3,9]])},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})};var n=localStorage.getItem("attributesperpage");return n||(n=5),a.state={global:e.global,loading:!0,attributes:[],search:"",perPage:n,pageNum:1,menuDelete:!1},a.formServerItems=X.a.struct({name:X.a.String}),a.formServerOptions={fields:{server:{label:"Attribute Name",error:"You must enter an Attribute name."}}},a.onTypeSearch=a.onTypeSearch.bind(Object(T.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(T.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"onChangeAttribute",value:function(e){this.setState({addAttributeForm:e})}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("attributesperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"render",value:function(){var e=this,t=this.state.global,a=[];return this.state.attributes.forEach((function(t){e.state.search&&!Object(S.z)(t).includes(e.state.search)||a.push(t)})),r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement(h.a,{exact:!0,path:"/attributes/",render:function(){return r.a.createElement(S.e,{flag:e.state.loading,func:e._loadData},"Search:"," ",r.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),r.a.createElement(se,{global:t,refer:e,attributes:a}))}}),r.a.createElement(h.a,{exact:!0,path:"/attributes/add",render:function(){return r.a.createElement("div",null,r.a.createElement(X.a.form.Form,{ref:function(t){return e.addattributeForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeAttribute(t)},value:e.state.addattributeForm}),r.a.createElement("button",{onClick:function(){return e._createAttribute()}},"Submit"))}}),r.a.createElement(h.a,{path:"/attributes/view/:id",render:function(a){return r.a.createElement("div",null,r.a.createElement(ce,{global:t,key:a.match.params.id,id:a.match.params.id,edit:!0,refer:e}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(K.a,{onClick:e.handleClickDelete,color:"primary"},"Delete attribute"),r.a.createElement($.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ee.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this attribute?"),r.a.createElement(te.a,null,r.a.createElement(K.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),r.a.createElement(K.a,{onClick:function(){return e._deleteAttribute(a.match.params.id)},color:"primary"},"Yes"))))}}),r.a.createElement(S.a,{flag:this.state.saving})))}}]),t}(n.Component),se=function(e){var t=e.refer.state.perPage,a=r.a.createElement("div",null),n=[];return e.attributes.forEach((function(a,l){Math.floor(l/t)+1===e.refer.state.pageNum&&n.push(r.a.createElement(ce,{global:e.global,key:a.id,attribute:a,refer:e.refer}))})),a=r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(G.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.attributes.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",r.a.createElement("div",{style:{width:75}},"# Per Page"," ",r.a.createElement(D.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),r.a.createElement("div",null,r.a.createElement("h3",null,e.type,"Attributes (",e.attributes.length,")"),r.a.createElement(f.b,{to:"/attributes/add"},r.a.createElement("button",null,"Add attribute")),a,n,a)},ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleMembersChange=function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e||(e=[]),a.props.refer.setState({saving:!0});case 2:case"end":return t.stop()}}))},a._loadData=function(){var e,t,n,r;return c.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=a.state.global,t={},a.setState({loading:!0}),l.prev=3,l.next=6,c.a.awrap(Promise.all([Object(S.k)(e,a.props.id)]));case 6:n=l.sent,r=Object(B.a)(n,1),t=r[0],l.next=15;break;case 11:return l.prev=11,l.t0=l.catch(3),Object(S.C)(l.t0,"Unable to load attribute info."),l.abrupt("return",a.setState({loading:!1}));case 15:a.setState({attribute:t,loading:!1});case 16:case"end":return l.stop()}}),null,null,[[3,11]])},a.onSave=function(e,t){var n,r,l,o;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=a.state,r=n.global,l=n.attribute,a.setState({saving:!0}),(o={id:l.id})[e]=t,s.prev=4,s.next=7,c.a.awrap(Object(S.g)(r,"/attribute/update","POST",o));case 7:Object(S.D)("Attribute has been updated."),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(4),Object(S.C)(s.t0,"Unable to update Attribute.");case 13:a._loadData();case 14:case"end":return s.stop()}}),null,null,[[4,10]])},a.state={global:e.global,attribute:a.props.attribute,selectedMembersOption:[]},a.onSaveName=a.onSaveName.bind(Object(T.a)(a)),a.onSaveType=a.onSaveType.bind(Object(T.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.state.attribute||this._loadData()}},{key:"onSaveName",value:function(e){this.onSave("name",e)}},{key:"onSaveType",value:function(e){this.onSave("type",e)}},{key:"render",value:function(){var e=this.state.attribute;return!e||this.state.loading?r.a.createElement(k.a,null):r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",padding:"10px"}},r.a.createElement("div",{style:{flex:1,overflow:"auto",padding:"5px 10px"}},r.a.createElement(ne.a,null)," ",e.name," ",this.props.edit?"":r.a.createElement(f.b,{to:"/attributes/view/"+e.id},"view"))),this.props.edit?r.a.createElement(ie,{attribute:e,onSaveName:this.onSaveName,onSaveType:this.onSaveType}):"")}}]),t}(n.Component),ie=function(e){var t=e.attribute,a=e.onSaveName,n=e.onSaveType;return r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement(J.a,{type:"text",value:t.name,onSave:a,onSaveType:n})),r.a.createElement(D.a,{value:re(t.type),onChange:n,options:le,isMulti:!1,isSearchable:!0,placeholder:"Select an attribute type"}),JSON.stringify(t))},ue=a(99),de=a(98),pe=a(149),me=a.n(pe),fe=a(100),he=["Unique Record ID","Street Address","Unit","City","State","Zip","Longitude","Latitude","Name","Party Affiliation"],be=function(e,t){return function(){return t(e.apply(void 0,arguments))}},ve=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.reduce(be)},ge=[{header:"Import File",tooltip:"The file name of the imported file.",params:["filename"]},{header:"Upload Time",tooltip:"The time it took the file to go from the uploader's computer to the server.",func:S.B,params:["created","submitted"]},{header:"Queue Delay",tooltip:"The time this import had to wait in queue for other jobs to finish.",func:S.B,params:["submitted","parse_start"]},{header:"Parse time",tooltip:"The time it took to aggregate address, people, and attribute data into the database.",func:S.B,params:["parse_start","parse_end"]},{header:"Record Count",tooltip:"The number of unique records contained in the import file.",func:S.A,params:["num_records"]},{header:"Geocode Time",tooltip:"The time it took the system to geocode the addresses in the import file.",func:S.B,params:["geocode_start","geocode_end"]},{header:"Dedupe Time",tooltip:"The time it took the system to identify and remove duplicates as a result of this import.",func:S.B,params:["dedupe_start","dedupe_end"]},{header:"Turf Index Time",tooltip:"The time it took the system to index each address to turfs it belongs to.",func:S.B,params:["turfadd_start","turfadd_end"]},{header:"Address Index Time",tooltip:"The time it took to add these addresses to the master database index.",func:S.B,params:["index_start","index_end"]},{header:"Total Time",tooltip:"The total time the import took from file upload start to complete finish.",func:S.B,params:["created","completed"]}],Ee=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={data:a.props.data||[],headers:a.props.headers||[],fields:he,formats:{},mapped:[]},a.formatHeaders=function(e){return e.map((function(e){return{value:e,label:e}}))},a.updateFormats=function(e,t){return a.setState({formats:Object(de.a)({},a.state.formats,Object(ue.a)({},e,t))},(function(){return a.updateMapped()}))},a.updateMapped=function(){return a.setState({mapped:a.mapData(a.state)||[]},(function(){return a.props.getMapped&&a.props.getMapped(a.state.mapped)}))},a.mapData=function(e){var t=e.formats,n=e.fields,r=Object(T.a)(a),l=r.generateFormats,o=r.getAllIndexes,s=r.parseData;return ve(l,o,s)(t,n)},a.generateFormats=function(e,t){return me()(t,(function(t){return e[t]?{name:t,format:e[t]}:{name:t,format:null}}))},a.getAllIndexes=function(e){return me()(e,(function(e){var t=e.name,n=e.format;if(n&&Array.isArray(n.value)){var r=n.value.map((function(e){return a.state.headers.findIndex((function(t){return t===e.value}))}));return{name:t,format:n,indexes:r}}if(n){var l=a.state.headers.findIndex((function(e){return n.value&&e===n.value.value}));return{name:t,format:n,indexes:l}}return{name:t,format:n,indexes:null}}))},a.parseData=function(e){var t=a.state.data;return me()(t,(function(t){return me()(e,(function(e){var a=e.indexes,n=e.format;return a&&Array.isArray(a)?a.reduce((function(e,a){return"".concat(e.trim()," ").concat(t[a].trim())}),"").trim():a&&t[a]?t[a].split(n.map1.value)[n.map2.value]:""}))}))},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.updateFormats,t=void 0===e?function(){return console.warn("Cannot find update format function.")}:e,a=this.props.fields,n=void 0===a?[]:a,l=this.state.headers,o=void 0===l?[]:l,s=this.formatHeaders(o);return r.a.createElement(r.a.Fragment,null,n.map((function(e){return r.a.createElement(fe.a,{key:e,label:e,updateFormats:t,options:s,checkbox:!0,isMulti:!0})})))}}]),t}(r.a.Component),Oe=function(e){var t=e.data,a=e.title;return r.a.createElement("div",{className:"records-wrapper"},t.map((function(e){return r.a.createElement("div",{className:"preview-item  ".concat(a?" preview-title":""),key:"".concat(e).concat(3444*Math.random())},r.a.createElement("div",{style:{width:250}},""!==e?e:"NULL"))})))};a(974);function ye(){return parseInt(1e3*Math.random())}var je=function(e){var t=e.titles,a=e.records;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Sample Records based on selection"),r.a.createElement("div",{key:"".concat(t).concat(a),style:{display:"flex"}},r.a.createElement(Oe,{key:"".concat(t).concat(ye()),data:t,title:!0}),a.map((function(e){return r.a.createElement(Oe,{key:"".concat(e).concat(ye()),data:e})}))))},ke=a(483),Se=a.n(ke),we=a(484),Ce=a.n(we),xe=a(1061),Te={loading:!1,sending:!1,data:null,headers:[],mapped:[],perPage:localStorage.getItem("importsperpage")||5,pageNum:1,submitting:!1,completed:0},De=(n.Component,function(e){return"boolean"===typeof e.success?e.success?"successful":"failed":e.started?"running":"waiting"}),Pe=function(e){return e.error?e.error:null},Ie=function(e,t){switch(e){case"ImportFile":return"Import file "+t.filename;case"Turf":return"Turf "+t.name;default:return"Unknown"}},Ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e)))._loadData=function(){var e,t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=a.state.global,t=[],a.setState({loading:!0}),r.next=5,c.a.awrap(Object(S.g)(e,"/queue/list"));case 5:(n=r.sent).data&&(t=n.data.map((function(e){var t=e[0];return t.type=e[1],t.obj=e[2],t}))),a.setState({rows:t,loading:!1});case 8:case"end":return r.stop()}}))},a.state={rows:[],global:e.global},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state.rows;return r.a.createElement(S.e,{flag:this.state.loading,func:function(){return e._loadData()}},r.a.createElement(fe.b,{spec:[{header:"Enqueu Time",tooltip:"The date/time that this job entered the queue.",func:S.E,params:["created"]},{header:"Task",tooltip:"The operation that this queue manages.",params:["task"]},{header:"Queue Delay",tooltip:"The time this task had to wait in queue for other jobs to finish.",func:S.B,params:["created","started"]},{header:"Runtime",tooltip:"The time it took for this task to complete.",func:S.B,params:["started","completed"]},{header:"Status",tooltip:"The status of this particular task.",func:De,funcItemTooltip:Pe},{header:"Task Reference",tooltip:"The particular item that queued task was processing.",func:Ie,params:["type","obj"]}],rows:t}))}}]),t}(n.Component),_e=a(1069),Ae=a(501),Fe=a(154),Me=a(174),Ue=a.n(Me),Le=function(e){return{main:Object(ue.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(de.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:175,width:"calc(100% - ".concat(175,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:175,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(ue.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:7*e.spacing.unit},e.breakpoints.up("sm"),{width:9*e.spacing.unit}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit,height:"100vh",overflow:"auto"},chartContainer:{marginLeft:-22},tableContainer:{height:320},h5:{marginBottom:2*e.spacing.unit}}},Ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={classes:e.classes},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.classes;return r.a.createElement("main",{className:e.main},r.a.createElement(_e.a,null),r.a.createElement(Ae.a,{className:e.paper},r.a.createElement(Fe.a,{component:"h1",variant:"h5"},"HelloVoterHQ is loading..."),r.a.createElement(k.a,{height:15})),r.a.createElement("br",null),r.a.createElement("center",null,"Built with ",r.a.createElement("span",{role:"img","aria-label":"Love"},"\u2764\ufe0f")," by Our Voice USA"))}}]),t}(n.Component),He=Ue()(Le)(Ve),qe=a(506),Re=a(1062),Qe=a(1063),ze=a(1059),Be=a(1072),We=a(485),Ge=a.n(We),Je=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(d.a)(this,Object(p.a)(t).call(this,e));var n,r=[];Object({NODE_ENV:"production",PUBLIC_URL:"/HelloVoterHQ",REACT_APP_VERSION:"2.0.0",REACT_APP_NAME:"HelloVoterHQ"}).REACT_APP_NO_AUTH||(r=[{label:"Organization ID",value:"org"},{label:"3rd Party Server",value:"server"}]);try{a.props.location.pathname.match(/\/jwt\//)&&(n=a.props.location.pathname.split("/").pop())}catch(l){console.warn(l)}return a.state={global:e.global,dev:!1,classes:e.classes,token:n,selectedLoginOption:r[0],loginOptions:r},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.token;e&&(localStorage.setItem("jwt",e),setTimeout((function(){window.location.href="/HelloVoterHQ/#/"}),500),setTimeout((function(){window.location.reload()}),1500))}},{key:"render",value:function(){var e=this,t=this.state,a=t.global,n=t.classes,l=t.token,o=t.loginOptions,s=t.selectedLoginOption;return l?r.a.createElement(He,{classes:n}):r.a.createElement("main",{className:n.main},r.a.createElement(_e.a,null),r.a.createElement(Ae.a,{className:n.paper},r.a.createElement(qe.a,{className:n.avatar},r.a.createElement(Ge.a,null)),r.a.createElement(Fe.a,{component:"h1",variant:"h5"},"Sign in to HelloVoterHQ"),r.a.createElement("form",{className:n.form,onSubmit:function(t){t.preventDefault(),a.doSave(t,e.state.target)}},r.a.createElement(D.a,{value:s,options:o,onChange:function(t){return e.setState({selectedLoginOption:t})}}),r.a.createElement("center",null,r.a.createElement("br",null),"\xa0 || \xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://raw.githubusercontent.com/OurVoiceUSA/HelloVoter/master/docs/Privacy-Policy.md"},"Privacy Policy"),"\xa0 || \xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://raw.githubusercontent.com/OurVoiceUSA/HelloVoter/master/docs/Terms-of-Service.md"},"Terms of Service"),"\xa0 || \xa0"),r.a.createElement(Ye,{global:a,refer:this}),Object({NODE_ENV:"production",PUBLIC_URL:"/HelloVoterHQ",REACT_APP_VERSION:"2.0.0",REACT_APP_NAME:"HelloVoterHQ"}).REACT_APP_NO_AUTH&&r.a.createElement(K.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,onClick:function(){return e.setState({target:"none"})}},"Sign In")||r.a.createElement("div",null,r.a.createElement(K.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,onClick:function(){return e.setState({target:"google"})}},"Google Sign In"),r.a.createElement(K.a,{type:"submit",fullWidth:!0,variant:"contained",color:"secondary",onClick:function(){return e.setState({target:"facebook"})},className:n.submit},"Facebook Sign In")))),r.a.createElement("br",null),r.a.createElement("center",null,"Built with ",r.a.createElement("span",{role:"img","aria-label":"Love"},"\u2764\ufe0f")," by Our Voice USA",r.a.createElement("p",null),"Not for any candidate or political party.",r.a.createElement("p",null),"Copyright (c) 2019, Our Voice USA. All rights reserved.",r.a.createElement("p",null),"This program is free software; you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version."))}}]),t}(n.Component),Ye=function(e){switch(e.refer.state.selectedLoginOption.value){case"org":return r.a.createElement("div",null,r.a.createElement(Re.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Be.a,{htmlFor:"domain"},"Enter your Organization ID. Example: NCC1701"),r.a.createElement(ze.a,{id:"orgId",name:"orgId",autoComplete:"orgId",autoFocus:!0,defaultValue:e.global.state.orgId})),r.a.createElement(Qe.a,{control:r.a.createElement(P.a,{value:"ack",color:"primary",required:!0}),label:"By checking this box you acknowledge that you have read and agreed to our Terms of Service."}));case"server":return r.a.createElement("div",null,r.a.createElement(Re.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(Be.a,{htmlFor:"domain"},"Server Address"),r.a.createElement(ze.a,{id:"server",name:"server",autoComplete:"server",autoFocus:!0,defaultValue:e.global.state.qserver})),r.a.createElement(Qe.a,{control:r.a.createElement(P.a,{value:"ack",color:"primary",required:!0}),label:"By checking this box you acknowledge that the server to which you are connecting is not affiliated with Our Voice USA and the data you send and receive is governed by that server's Terms of Service."}));default:return null}},Xe=Ue()(Le)(Je),Ze=function(e){var t=e.menuLogout,a=e.handleCloseLogout,n=e._logout;return r.a.createElement($.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ee.a,{id:"alert-dialog-title"},"Are you sure you wish to logout?"),r.a.createElement(te.a,null,r.a.createElement(K.a,{onClick:a,color:"primary",autoFocus:!0},"No"),r.a.createElement(K.a,{onClick:function(){return n()},color:"primary"},"Yes")))},Ke=(a(456),function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Settings Component")}}]),t}(n.Component)),$e=a(49),et=a(77),tt=a(1064),at=a(1058),nt=a(487),rt=a.n(nt),lt=a(1050),ot=a(11),st=a.n(ot),ct=function(e){var t=e.classes,a=e.global,n=e.open,l=e.handleDrawerOpen,o=e.getUserProp;return r.a.createElement(tt.a,{position:"absolute",className:st()(t.appBar,n&&t.appBarShift)},r.a.createElement(at.a,{disableGutters:!n,className:t.toolbar},r.a.createElement(lt.a,{color:"inherit","aria-label":"Open drawer",onClick:l,className:st()(t.menuButton,n&&t.menuButtonHidden)},r.a.createElement(rt.a,null)),r.a.createElement(Fe.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},r.a.createElement("div",{style:{margin:10}},"HelloVoterHQ ",a.state.orgId?"Organization ID: "+a.state.orgId:"@ "+a.state.server)),r.a.createElement(qe.a,{alt:"Remy Sharp",src:o("avatar"),className:t.avatar})))},it=a(1068),ut=a(499),dt=a.n(ut),pt=a(503),mt=a(234),ft=a(1065),ht=a(309),bt=a(488),vt=a.n(bt),gt=a(489),Et=a.n(gt),Ot=a(490),yt=a.n(Ot),jt=a(491),kt=a.n(jt),St=a(492),wt=a.n(St),Ct=a(493),xt=a.n(Ct),Tt=a(494),Dt=a.n(Tt),Pt=a(495),It=a.n(Pt),Nt=a(496),_t=a.n(Nt),At=a(497),Ft=a.n(At),Mt=a(498),Ut=a.n(Mt),Lt=function(e){var t=e.assignments,a=e.handleClickLogout;return r.a.createElement(n.Fragment,null,r.a.createElement(pt.a,null,r.a.createElement(f.b,{to:"/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(vt.a,null)),r.a.createElement(ht.a,{primary:"Dashboard"}))),r.a.createElement(f.b,{to:"/volunteers/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(Et.a,null)),r.a.createElement(ht.a,{primary:"Volunteers"}))),r.a.createElement(f.b,{to:"/teams/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(yt.a,null)),r.a.createElement(ht.a,{primary:"Teams"}))),r.a.createElement(f.b,{to:"/turf/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(kt.a,null)),r.a.createElement(ht.a,{primary:"Turf"}))),r.a.createElement(f.b,{to:"/forms/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(wt.a,null)),r.a.createElement(ht.a,{primary:"Forms"}))),t.admin&&r.a.createElement("div",null,r.a.createElement(f.b,{to:"/qrcode/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(xt.a,null)),r.a.createElement(ht.a,{primary:"QR Codes"}))),r.a.createElement(f.b,{to:"/attributes/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(ne.a,null)),r.a.createElement(ht.a,{primary:"Attributes"}))),r.a.createElement(f.b,{to:"/queue/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(Dt.a,null)),r.a.createElement(ht.a,{primary:"System Queue"}))),r.a.createElement(f.b,{to:"/analytics/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(It.a,null)),r.a.createElement(ht.a,{primary:"Analytics"}))))),r.a.createElement(xe.a,null),r.a.createElement(pt.a,null,r.a.createElement(mt.a,{button:!0,onClick:a},r.a.createElement(ft.a,null,r.a.createElement(_t.a,null)),r.a.createElement(ht.a,{primary:"Logout"}))),r.a.createElement(xe.a,null),r.a.createElement(pt.a,null,r.a.createElement(f.b,{to:"/about/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(Ft.a,null)),r.a.createElement(ht.a,{primary:"About"}))),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/tree/master/docs/"},r.a.createElement(mt.a,{button:!0},r.a.createElement(ft.a,null,r.a.createElement(Ut.a,null)),r.a.createElement(ht.a,{primary:"Help"})))))},Vt=function(e){var t=e.classes,a=e.open,n=e.assignments,l=e.handleClickLogout,o=e.handleDrawerClose;return r.a.createElement(it.a,{variant:"permanent",classes:{paper:st()(t.drawerPaper,!a&&t.drawerPaperClose)},open:a},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(lt.a,{onClick:o},r.a.createElement(dt.a,null))),r.a.createElement(xe.a,null),r.a.createElement(Lt,{assignments:n,handleClickLogout:l}))},Ht=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h1",null,"OOOPS!!"),r.a.createElement("div",null,"We can't seem to find the page you're looking for:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("code",null,t.pathname),r.a.createElement("br",null),r.a.createElement("br",null),"If you feel this page is in error,"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/OurVoiceUSA/HelloVoter/issues/new"},"report an issue")," ","and the coders will take a look."))},qt=function(e){var t=e.global;return r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(R,{global:t})}}),r.a.createElement(h.a,{path:"/jwt/",render:function(e){return r.a.createElement(Xe,Object.assign({},e,{global:t}))}}),r.a.createElement(h.a,{path:"/volunteers/",render:function(){return r.a.createElement(et.b,{global:t})}}),r.a.createElement(h.a,{path:"/teams/",render:function(){return r.a.createElement($e.b,{global:t})}}),r.a.createElement(h.a,{path:"/turf/",render:function(){return r.a.createElement(N.c,{global:t})}}),r.a.createElement(h.a,{path:"/forms/",render:function(){return r.a.createElement(Q.d,{global:t})}}),r.a.createElement(h.a,{path:"/qrcode/",render:function(){return r.a.createElement(z.a,{global:t})}}),r.a.createElement(h.a,{path:"/attributes/",render:function(){return r.a.createElement(oe,{global:t})}}),r.a.createElement(h.a,{path:"/queue/",render:function(){return r.a.createElement(Ne,{global:t})}}),r.a.createElement(h.a,{path:"/analytics/",render:function(){return r.a.createElement(A,{global:t})}}),r.a.createElement(h.a,{path:"/settings/",render:function(){return r.a.createElement(Ke,{global:t})}}),r.a.createElement(h.a,{path:"/about/",render:function(){return r.a.createElement(x,{global:t})}}),r.a.createElement(h.a,{component:Ht}))},Rt=(a(1005),a(9)),Qt=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e)))._loadData=function(){var e,t,n,r,l;return c.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e=a.state,t=e.server,n=e.token,r=e.orgId,a.setState({loading:!0}),l={error:!0},o.prev=3,!t||!n){o.next=10;break}return o.next=7,c.a.awrap(a.singHello(t,g.a.decode(n).id.split(":")[0],n,r));case 7:l=o.sent,o.next=11;break;case 10:throw new Error("missing server or token");case 11:if(!l.error){o.next=13;break}throw new Error("hai error");case 13:o.next=19;break;case 15:o.prev=15,o.t0=o.catch(3),n&&t&&(a.setState({server:null,token:null,orgId:null}),localStorage.clear(),console.warn("Cleaning localStorage")),console.warn(o.t0);case 19:a.setState({loading:!1,assignments:l.data?l.data:{}},(function(){return a._loadKeys()}));case 20:case"end":return o.stop()}}),null,null,[[3,15]])},a._loadKeys=function(){var e,t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=a.state.global,!a.state.google_maps_key){r.next=3;break}return r.abrupt("return");case 3:if(a.state.server){r.next=5;break}return r.abrupt("return");case 5:return r.prev=5,r.next=8,c.a.awrap(Object(S.g)(e,"/google_maps_key"));case 8:if(t=r.sent){r.next=11;break}return r.abrupt("return");case 11:(n=document.createElement("script")).type="text/javascript",n.src="https://maps.googleapis.com/maps/api/js?key="+t.google_maps_key+"&libraries=places",document.head.appendChild(n),a.setState({google_maps_key:t.google_maps_key}),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(5),console.warn(r.t0);case 21:case"end":return r.stop()}}),null,null,[[5,18]])},a.handleClickLogout=function(){a.setState({menuLogout:!0})},a.handleCloseLogout=function(){a.setState({menuLogout:!1})},a.onChange=function(e){a.setState({connectForm:e})},a.getUserProp=function(e){var t;if(!a.state.token)return null;try{t=g.a.decode(a.state.token)[e]}catch(n){Object(S.C)(n,"Holy crap this error should never happen!! Better dust off that r\xe9sum\xe9..."),console.warn(n)}return t},a._logout=function(){localStorage.clear(),a.setState({menuLogout:!1,server:null,token:null,orgId:null})},a.doSave=function(e,t){var n,r,l,o;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.target.orgId?(r=e.target.orgId.value,l=r.substring(0,2).toLowerCase(),n="gotv-"+l+".ourvoiceusa.org"):n=e.target.server?e.target.server.value:window.location.host.replace(":3000",":8080"),!Object({NODE_ENV:"production",PUBLIC_URL:"/HelloVoterHQ",REACT_APP_VERSION:"2.0.0",REACT_APP_NAME:"HelloVoterHQ"}).REACT_APP_NO_AUTH){s.next=7;break}o="eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Im5vYXV0aDpsb2NhbHVzZXIiLCJuYW1lIjoiTG9jYWwgVXNlciIsImVtYWlsIjoibG9jYWxAbG9jYWxob3N0IiwiaXNzIjoib3Vydm9pY2V1c2Eub3JnIiwiaWF0IjoxLCJleHAiOjIsImRpc2NsYWltZXIiOiJCbGFoIGJsYWggZGlzY2xhaW1lciJ9.qa5K2pgi1uLYkV7jP3aNvazcchvgBD8RwhdG6Q86GxlvusQx7nNCTr3LrAnn6pxDJxNidJoqjD3Ie77jj5hWK_-lbgtHMLhNXGExDxI8pQ0I5ZnAV_5pDu7vARinoy3mctQWFO2pIQSu8KzQc7eQ90IQZBseE7nQV-ugZRfK8Teo_48COcJxGxqwCNCO80G_JzBoif2xaWRb2i2n0qeSUKfXN4Fwy46JOiHFnL9yOS5s54tB6doe1wFJNYps8eVQbVkTBL1I9PQP4Gs-BmzND0vcQaczTdu_J50uvLL5do1FHb48lRhrA44ZrYv3EVwNsJXZtH3MbasxgPrZhl69VQ",localStorage.setItem("jwt",o),a.setState({token:o},(function(){return a.singHello(n,t,null,r)})),s.next=9;break;case 7:return s.next=9,c.a.awrap(a.singHello(n,t,null,r));case 9:case"end":return s.stop()}}))},a.singHello=function(e,t,n,r){var l,o,s,i,u;return c.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return localStorage.setItem("server",e),r&&localStorage.setItem("orgId",r),a.setState({server:e,orgId:r}),o=!0,e.match(/:8080$/)&&(o=!1),d.prev=5,d.next=8,c.a.awrap(fetch("http"+(o?"s":"")+"://"+e+"/HelloVoterHQ/"+(r?r+"/":"")+"api/v1/hello",{method:"POST",headers:{Authorization:"Bearer "+(n||(a.state.token?a.state.token:"of the one ring")),"Content-Type":"application/json"}}));case 8:if(l=d.sent,s=l.headers.get("x-sm-oauth-url")){d.next=12;break}return d.abrupt("return",{error:!0,msg:"Missing required header."});case 12:d.t0=l.status,d.next=200===d.t0?15:400===d.t0?16:401===d.t0?17:403===d.t0?22:23;break;case 15:return d.abrupt("break",24);case 16:return d.abrupt("return",{error:!0,msg:"The server didn't understand the request sent from this device."});case 17:return i="","google"===t&&(i="gm"),"facebook"===t&&(i="fm"),setTimeout((function(){window.location.href=s+"/"+i+"/?app=HelloVoterHQ"+(o?"":"&local=true")}),500),d.abrupt("return",{error:!1,flag:!0});case 22:return d.abrupt("return",{error:!0,msg:"We're sorry, but your request to volunteer with this server has been rejected."});case 23:return d.abrupt("return",{error:!0,msg:"Unknown error connecting to server."});case 24:return d.next=26,c.a.awrap(l.json());case 26:if(!0===(u=d.sent).data.ready){d.next=31;break}return d.abrupt("return",{error:!1,msg:"The server said: "+u.msg,data:u.data});case 31:return console.warn({user:a.state.user}),d.abrupt("return",{error:!1,flag:!0,data:u.data});case 33:d.next=39;break;case 35:return d.prev=35,d.t1=d.catch(5),console.warn("singHello: "+d.t1),d.abrupt("return",{error:!0,msg:"Unable to make a connection to target server"});case 39:case"end":return d.stop()}}),null,null,[[5,35]])},a.handleDrawerOpen=function(){a.setState({open:!0})},a.handleDrawerClose=function(){a.setState({open:!1})};var n=O.a.parse(window.location.search);return a.state={global:e.global,assignments:{},loading:!0,open:!0,menuLogout:!1,server:localStorage.getItem("server"),token:localStorage.getItem("jwt"),orgId:localStorage.getItem("orgId"),qserver:n.server},console.log("%cWARNING: This is a developer console! If you were told to open this and copy/paste something, and you are not a javascript developer, it is a scam and entering info here could give them access to your account!","background: red; color: yellow; font-size: 45px"),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.assignments,l=a.server,o=a.token;return a.loading?r.a.createElement(f.a,null,r.a.createElement(h.a,{path:"/",render:function(e){return r.a.createElement(He,e)}})):l&&o?r.a.createElement(f.a,null,r.a.createElement("div",{className:t.root},r.a.createElement(j.a,null),r.a.createElement(_e.a,null),r.a.createElement(ct,{open:this.state.open,classes:t,global:this,getUserProp:this.getUserProp,handleDrawerOpen:this.handleDrawerOpen}),r.a.createElement(Vt,{assignments:n,classes:t,open:this.state.open,getUserProp:this.getUserProp,handleClickLogout:this.handleClickLogout,handleDrawerClose:this.handleDrawerClose}),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(b.NotificationContainer,null),r.a.createElement(qt,{global:this}),r.a.createElement(Ze,{menuLogout:this.state.menuLogout,handleCloseLogout:this.handleCloseLogout,_logout:this._logout})))):r.a.createElement(f.a,null,r.a.createElement(h.a,{path:"/",render:function(t){return r.a.createElement(Xe,Object.assign({},t,{global:e}))}}))}}]),t}(n.Component),zt=Object(Rt.a)(Le)(Qt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(zt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},173:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var n=a(48),r=a(5),l=a.n(r),o=a(15),s=a(16),c=a(19),i=a(17),u=a(12),d=a(18),p=a(0),m=a.n(p),f=a(108),h=a.n(f),b=a(234),v=a(309),g=a(235),E=a(153),O=a(506),y=a(3),j=a(54),k=a(53),S=a(49),w=a(478),C=a(29),x=a(125),T=a(83),D=a.n(T);x.a.locale(D.a);var P=50;function I(e){var t=e.split(", ");return t.length<4?e:(t.shift(),t.join(", "))}var N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleTeamsChange=function(e){var t,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=a.state.global,e||(e=[]),a.props.refer.setState({saving:!0}),s.prev=3,n=Object(y.h)(a.state.selectedTeamsOption,e),r=[],n.add.forEach((function(e){r.push(Object(y.g)(t,"/team/members/add","POST",{teamId:e,vId:a.props.id}))})),n.rm.forEach((function(e){r.push(Object(y.g)(t,"/team/members/remove","POST",{teamId:e,vId:a.props.id}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(y.x)(t,a.props.id));case 12:o=s.sent,Object(y.D)("Team assignments saved."),a.setState({selectedTeamsOption:e,volunteer:o}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(y.C)(s.t0,"Unable to add/remove teams.");case 20:a.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},a.handleLeaderChange=function(e){var t,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=a.state.global,e||(e=[]),a.props.refer.setState({saving:!0}),s.prev=3,n=Object(y.h)(a.state.selectedLeaderOption,e),r=[],n.add.forEach((function(e){r.push(Object(y.g)(t,"/team/members/promote","POST",{teamId:e,vId:a.props.id}))})),n.rm.forEach((function(e){r.push(Object(y.g)(t,"/team/members/demote","POST",{teamId:e,vId:a.props.id}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(y.x)(t,a.props.id));case 12:o=s.sent,Object(y.D)("Team leaders saved."),a.setState({selectedLeaderOption:e,volunteer:o}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(y.C)(s.t0,"Unable to edit team leadership.");case 20:a.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},a.handleFormsChange=function(e){var t,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=a.state.global,e||(e=[]),a.props.refer.setState({saving:!0}),s.prev=3,n=Object(y.h)(a.state.selectedFormsOption,e),r=[],n.add.forEach((function(e){r.push(Object(y.g)(t,"/form/assigned/volunteer/add","POST",{formId:e,vId:a.props.id}))})),n.rm.forEach((function(e){r.push(Object(y.g)(t,"/form/assigned/volunteer/remove","POST",{formId:e,vId:a.props.id}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(y.x)(t,a.props.id));case 12:o=s.sent,Object(y.D)("Form selection saved."),a.setState({selectedFormsOption:e,volunteer:o}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(y.C)(s.t0,"Unable to add/remove form.");case 20:a.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},a.handleTurfChange=function(e){var t,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=a.state.global,e||(e=[]),a.props.refer.setState({saving:!0}),s.prev=3,n=Object(y.h)(a.state.selectedTurfOption,e),r=[],n.add.forEach((function(e){r.push(Object(y.g)(t,"/turf/assigned/volunteer/add","POST",{turfId:e,vId:a.props.id}))})),n.rm.forEach((function(e){r.push(Object(y.g)(t,"/turf/assigned/volunteer/remove","POST",{turfId:e,vId:a.props.id}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(y.x)(t,a.props.id));case 12:o=s.sent,Object(y.D)("Turf selection saved."),a.setState({selectedTurfOption:e,volunteer:o}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(y.C)(s.t0,"Unable to add/remove turf.");case 20:a.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},a._loadData=function(){var e,t,r,o,s,c,i,d,p,f,h,b,v,g,E,O,w;return l.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:return e=a.state.global,t={},r=[],o=[],s=[],c=[],i=[],a.setState({loading:!0}),x.prev=3,x.next=6,l.a.awrap(Promise.all([Object(y.x)(e,a.props.id),Object(y.n)(e),Object(y.w)(e),Object(y.u)(e)]));case 6:d=x.sent,p=Object(n.a)(d,4),t=p[0],r=p[1],o=p[2],s=p[3],x.next=18;break;case 14:return x.prev=14,x.t0=x.catch(3),Object(y.C)(x.t0,"Unable to load canavasser info."),x.abrupt("return",a.setState({loading:!1}));case 18:if(!t.location){x.next=25;break}return x.next=21,l.a.awrap(Object(y.p)(e,t.location.x,t.location.y,0));case 21:return c=x.sent,x.next=24,l.a.awrap(Object(y.p)(e,t.location.x,t.location.y,P));case 24:i=x.sent;case 25:f=[],h=[],b=[],v=[],g=[],E=[],O=[{value:"",label:"None"}],w=[{value:"",label:"None"}],s.forEach((function(n){f.push({value:Object(y.z)(n),id:n.id,label:m.a.createElement(S.a,{global:e,key:n.id,team:n,refer:Object(u.a)(a)})}),t.ass.teams.forEach((function(t,r){t.id===n.id&&(b.push({value:Object(y.z)(n),id:n.id,label:m.a.createElement(S.a,{global:e,key:n.id,team:n,refer:Object(u.a)(a)})}),h.push({value:Object(y.z)(n),id:n.id,label:m.a.createElement(S.a,{global:e,key:n.id,team:n,refer:Object(u.a)(a)})}),t.leader&&v.push({value:Object(y.z)(n),id:n.id,label:m.a.createElement(S.a,{global:e,key:n.id,team:n,refer:Object(u.a)(a)})}))}))})),r.forEach((function(t){O.push({value:Object(y.z)(t),id:t.id,label:m.a.createElement(k.a,{global:e,key:t.id,form:t,refer:Object(u.a)(a)})})})),t.ass.forms.forEach((function(t){t.direct&&g.push({value:Object(y.z)(t),id:t.id,label:m.a.createElement(k.a,{global:e,key:t.id,form:t,refer:Object(u.a)(a)})})})),o.forEach((function(t){w.push({value:Object(y.z)(t),id:t.id,label:m.a.createElement(j.a,{global:e,key:t.id,turf:t,refer:Object(u.a)(a)})})})),t.ass.turfs.forEach((function(n){n.direct&&E.push({value:Object(y.z)(n),id:n.id,label:m.a.createElement(j.a,{global:e,key:n.id,turf:n,refer:Object(u.a)(a),icon:t.autoturf?C.k:null})})})),a.setState({loading:!1,volunteer:t,teamOptions:f,leaderOptions:h,formOptions:O,turfOptions:w,selectedTeamsOption:b,selectedLeaderOption:v,selectedFormsOption:g,selectedTurfOption:E,hometurf:c,nearbyturf:i});case 39:case"end":return x.stop()}}),null,null,[[3,14]])},a._lockVolunteer=function(e,t){var n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=a.state.global,r=t?"lock":"unlock",a.props.refer.setState({saving:!0}),o.prev=3,o.next=6,l.a.awrap(Object(y.g)(n,"/volunteer/"+r,"POST",{id:e.id}));case 6:Object(y.D)("Volunteer hass been "+r+"ed."),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(3),Object(y.C)(o.t0,"Unable to "+r+" volunteer.");case 12:a.props.refer.setState({saving:!1}),a._loadData();case 14:case"end":return o.stop()}}),null,null,[[3,9]])},a.state={global:e.global,refer:a.props.refer.props.refer,volunteer:a.props.volunteer,selectedTeamsOption:[],selectedLeaderOption:[],selectedFormsOption:[],selectedTurfOption:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.state.volunteer||this._loadData(),h.a.rebuild()}},{key:"componentDidUpdate",value:function(){h.a.rebuild()}},{key:"render",value:function(){var e=this,t=this.state,a=t.global,n=t.volunteer;return!n||this.state.loading?m.a.createElement(E.a,null):this.props.edit?m.a.createElement("div",null,m.a.createElement(b.a,{alignItems:"flex-start",style:{width:350}},m.a.createElement(g.a,null,m.a.createElement(O.a,{alt:n.name,src:n.avatar})),m.a.createElement(v.a,{primary:n.name,secondary:n.locationstr?I(n.locationstr):"N/A"}),m.a.createElement(_,{volunteer:n})),m.a.createElement(w.a,{global:a,volunteer:n,refer:this})):m.a.createElement(b.a,{button:!0,style:{width:350},alignItems:"flex-start",onClick:function(){e.props.refer.setState({thisVolunteer:n}),window.location.href="/HelloVoterHQ/#/volunteers/view/"+n.id}},m.a.createElement(g.a,null,m.a.createElement(O.a,{alt:n.name,src:n.avatar})),m.a.createElement(v.a,{primary:n.name,secondary:n.locationstr?I(n.locationstr):"N/A"}),m.a.createElement(_,{volunteer:n}))}}]),t}(p.Component),_=function(e){var t=[],a=e.volunteer.id;return e.volunteer.admin&&t.push(m.a.createElement(y.b,{icon:C.e,color:"gold",key:a+"admin","data-tip":"Administrator"})),e.volunteer.ass.leader&&t.push(m.a.createElement(y.b,{icon:C.i,color:"green",key:a+"leader","data-tip":"Team Leader"})),e.volunteer.locked?t.push(m.a.createElement(y.b,{icon:C.a,color:"red",key:a+"locked","data-tip":"Denied access"})):(e.volunteer.ass.ready?t.push(m.a.createElement(y.b,{icon:C.c,color:"green",key:a+"ready","data-tip":"Ready to Canvas"})):t.push(m.a.createElement(y.b,{icon:C.g,color:"red",key:a+"notready","data-tip":"Not ready to volunteer, check assignments"})),e.volunteer.locationstr||t.push(m.a.createElement(y.b,{icon:C.k,color:"red",key:a+"addr","data-tip":"Home Address is not set"}))),t}},219:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return y}));var n=a(48),r=a(5),l=a.n(r),o=a(15),s=a(16),c=a(19),i=a(17),u=a(12),d=a(18),p=a(0),m=a.n(p),f=a(22),h=a(153),b=a(29),v=a(77),g=a(49),E=a(220),O=a(3),y=function(t){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(i.a)(a).call(this,e))).handleTeamsChange=function(e){var a,n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=t.state.global,e||(e=[]),t.props.refer.setState({saving:!0}),o.prev=3,n=Object(O.h)(t.state.selectedTeamsOption,e),r=[],n.add.forEach((function(e){r.push(Object(O.g)(a,"/turf/assigned/team/add","POST",{teamId:e,turfId:t.props.id}))})),n.rm.forEach((function(e){r.push(Object(O.g)(a,"/turf/assigned/team/remove","POST",{teamId:e,turfId:t.props.id}))})),o.next=10,l.a.awrap(Promise.all(r));case 10:Object(O.D)("Team assignments saved."),t.setState({selectedTeamsOption:e}),o.next=17;break;case 14:o.prev=14,o.t0=o.catch(3),Object(O.C)(o.t0,"Unable to add/remove teams.");case 17:t.props.refer.setState({saving:!1});case 18:case"end":return o.stop()}}),null,null,[[3,14]])},t.handleMembersChange=function(e){var a,n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=t.state.global,e||(e=[]),t.props.refer.setState({saving:!0}),o.prev=3,n=Object(O.h)(t.state.selectedMembersOption,e),r=[],n.add.forEach((function(e){r.push(Object(O.g)(a,"/turf/assigned/volunteer/add","POST",{vId:e,turfId:t.props.id}))})),n.rm.forEach((function(e){r.push(Object(O.g)(a,"/turf/assigned/volunteer/remove","POST",{vId:e,turfId:t.props.id}))})),o.next=10,l.a.awrap(Promise.all(r));case 10:Object(O.D)("Volunteer assignments saved."),t.setState({selectedMembersOption:e}),o.next=17;break;case 14:o.prev=14,o.t0=o.catch(3),Object(O.C)(o.t0,"Unable to add/remove teams.");case 17:t.props.refer.setState({saving:!1});case 18:case"end":return o.stop()}}),null,null,[[3,14]])},t._loadData=function(){var e,a,r,o,s,c,i,d,p,f,h,b;return l.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return e=t.state.global,a={},r=[],o=[],s=[],c=[],t.setState({loading:!0}),E.prev=3,E.next=6,l.a.awrap(Promise.all([Object(O.v)(e,t.props.id,!0),Object(O.y)(e),Object(O.y)(e,"turf",t.props.id),Object(O.u)(e),Object(O.u)(e,"turf",t.props.id)]));case 6:i=E.sent,d=Object(n.a)(i,5),a=d[0],r=d[1],o=d[2],s=d[3],c=d[4],E.next=19;break;case 15:return E.prev=15,E.t0=E.catch(3),Object(O.C)(E.t0,"Unable to load turf info."),E.abrupt("return",t.setState({loading:!1}));case 19:p=[],f=[],h=[],b=[],s.forEach((function(a){p.push({value:Object(O.z)(a),id:a.id,label:m.a.createElement(g.a,{global:e,key:a.id,team:a,refer:Object(u.a)(t)})})})),c.forEach((function(a){h.push({value:Object(O.z)(a),id:a.id,label:m.a.createElement(g.a,{global:e,key:a.id,team:a,refer:Object(u.a)(t)})})})),r.forEach((function(a){f.push({value:Object(O.z)(a),id:a.id,label:m.a.createElement(v.a,{global:e,key:a.id,volunteer:a,refer:Object(u.a)(t)})})})),o.forEach((function(a){b.push({value:Object(O.z)(a),id:a.id,label:m.a.createElement(v.a,{global:e,key:a.id,volunteer:a,refer:Object(u.a)(t)})})})),t.setState({turf:a,volunteers:r,teamOptions:p,membersOption:f,selectedTeamsOption:h,selectedMembersOption:b,loading:!1});case 28:case"end":return E.stop()}}),null,null,[[3,15]])},t.state={global:e.global,turf:t.props.turf,selectedTeamsOption:[],selectedMembersOption:[]},t}return Object(d.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.state.turf||this._loadData()}},{key:"render",value:function(){var t=this.state.turf;return!t||this.state.loading?m.a.createElement(h.a,null):m.a.createElement("div",null,m.a.createElement("div",{style:{display:"flex",padding:"10px"}},m.a.createElement("div",{style:{padding:"5px 10px"}},m.a.createElement(O.b,{icon:b.p,style:{width:20,height:20,color:"gray"}})," ",t.name," ",this.props.edit?"":m.a.createElement(f.b,{to:"/turf/view/"+t.id},"view"))),this.props.edit?m.a.createElement(E.a,{global:e,turf:t,refer:this}):"")}}]),a}(p.Component)}).call(this,a(34))},220:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),r=a.n(n),l=a(21),o=a(100),s=function(e){return r.a.createElement("div",null,r.a.createElement("div",null,"Teams assigned to this turf:",r.a.createElement(l.a,{value:e.refer.state.selectedTeamsOption,onChange:e.refer.handleTeamsChange,options:e.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),r.a.createElement("br",null),"Volunteers assigned directly to this turf:",r.a.createElement(l.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.membersOption,isMulti:!0,isSearchable:!0,placeholder:"None"}),r.a.createElement("br",null),r.a.createElement("h3",null,"Turf Stats"),r.a.createElement("pre",null,JSON.stringify(e.refer.state.turf.stats)),r.a.createElement(o.b,{spec:[{header:"Query Name",tooltip:"Constraints which define this attribute query.",params:["Name"]},{header:"Total Addresses",tooltip:"Total number of houses/buildings in this area.",params:["Total Addresses"]},{header:"Total People",tooltip:"Total number of people in this area.",params:["Total People"]},{header:"Total People Visited",tooltip:"Total number of people in this area who have been visited.",params:["Total People Visited"]},{header:"People Visited in past month",tooltip:"Total number of peple in this area who have been visited.",params:["People Visited in past month"]}],rows:Object.keys(e.refer.state.turf.stats["Stats by Attribute"]).map((function(t){return e.refer.state.turf.stats["Stats by Attribute"][t].Name=t,e.refer.state.turf.stats["Stats by Attribute"][t]}))})))}},3:function(e,t,a){"use strict";a.d(t,"B",(function(){return y})),a.d(t,"A",(function(){return j})),a.d(t,"E",(function(){return k})),a.d(t,"D",(function(){return S})),a.d(t,"C",(function(){return w})),a.d(t,"g",(function(){return C})),a.d(t,"f",(function(){return x})),a.d(t,"b",(function(){return T})),a.d(t,"e",(function(){return D})),a.d(t,"a",(function(){return P})),a.d(t,"z",(function(){return I})),a.d(t,"o",(function(){return N})),a.d(t,"i",(function(){return _})),a.d(t,"r",(function(){return A})),a.d(t,"s",(function(){return F})),a.d(t,"x",(function(){return M})),a.d(t,"y",(function(){return U})),a.d(t,"v",(function(){return L})),a.d(t,"w",(function(){return V})),a.d(t,"p",(function(){return H})),a.d(t,"t",(function(){return q})),a.d(t,"u",(function(){return R})),a.d(t,"m",(function(){return Q})),a.d(t,"n",(function(){return z})),a.d(t,"k",(function(){return B})),a.d(t,"l",(function(){return W})),a.d(t,"j",(function(){return G})),a.d(t,"q",(function(){return J})),a.d(t,"h",(function(){return Y})),a.d(t,"d",(function(){return X})),a.d(t,"c",(function(){return K}));var n=a(5),r=a.n(n),l=a(0),o=a.n(l),s=a(459),c=a(29),i=a(109),u=a.n(i),d=a(175),p=a(460),m=a.n(p),f=a(461),h=a.n(f),b=a(462),v=a.n(b),g=a(153),E=a(87),O=a(310);function y(e,t){return t?h()(t-e):""}function j(e){return e?m()(e,{fractionDigits:0}):""}function k(e){return new Date(e).toString()}function S(e){d.NotificationManager.success(e,"Success",3e3)}function w(e,t){d.NotificationManager.error(t,"Error",6e3),console.warn(e)}function C(e,t,a,n){var l,o,s,c,i;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(e&&e.state){u.next=2;break}return u.abrupt("return");case 2:return l=e.state,o=l.server,s=l.token,c=!0,o.match(/:8080$/)&&(c=!1),a||(a="GET"),u.next=8,r.a.awrap(fetch("http"+(c?"s":"")+"://"+o+"/HelloVoterHQ"+(e.state.orgId?"/"+e.state.orgId:"")+"/api/v1"+t,{method:a,headers:{Authorization:"Bearer "+s,"Content-Type":"application/json"},body:n?JSON.stringify(n):null}));case 8:if(!((i=u.sent).status>=400)){u.next=15;break}return u.t0=Error,u.next=13,r.a.awrap(i.text());case 13:throw u.t1=u.sent,new u.t0(u.t1);case 15:return u.abrupt("return",i.json());case 16:case"end":return u.stop()}}))}function x(e){return e.isGeolocationAvailable&&e.isGeolocationEnabled?e.coords?{access:!0,lng:e.coords.longitude,lat:e.coords.latitude}:{access:!0}:{access:!1}}var T=function(e){return o.a.createElement(s.a,Object.assign({style:{width:25},"data-tip":e["data-tip"]?e["data-tip"]:e.icon.iconName},e))},D=function(e){return e.flag?o.a.createElement(g.a,null):o.a.createElement("div",null,o.a.createElement(T,{icon:c.q,color:"green",onClick:e.func,"data-tip":"Reload Data"}),o.a.createElement("div",null,e.children))},P=function(e){return e.flag?o.a.createElement(O.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:!0},o.a.createElement("div",{style:{position:"absolute",top:100,left:"40%",right:"40%",backgroundColor:"white",padding:40}},o.a.createElement("center",null,"Saving changes...",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(g.a,{disableShrink:!0})))):o.a.createElement("div",null)};function I(e){var t=JSON.parse(JSON.stringify(e));return delete t.last_seen,delete t.created,delete t.id,JSON.stringify(t).toLowerCase()}function N(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],n.prev=1,n.next=4,r.a.awrap(C(e,"/import/list"));case 4:a=n.sent,t=a&&a.data?a.data:[],n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),w(n.t0,"Unable to load import info.");case 11:return n.abrupt("return",t);case 12:case"end":return n.stop()}}),null,null,[[1,8]])}function _(e,t,a){return"http"+(t.match(/:8080$/)?"":"s")+"://"+t+"/HelloVoterHQ/"+(a?a+"/":"")+"mobile/invite?inviteCode="+e+"&"+(a?"orgId="+a:"server="+t)}function A(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a={},n.prev=1,n.next=4,r.a.awrap(C(e,"/qrcode/get?id="+t));case 4:return a=n.sent,n.next=7,r.a.awrap(v.a.toDataURL(_(t,e.state.server,e.state.orgId)));case 7:a.img=n.sent,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),w(n.t0,"Unable to load QRCode info.");case 13:return n.abrupt("return",a);case 14:case"end":return n.stop()}}),null,null,[[1,10]])}function F(e,t){var a;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.prev=1,t.next=4,r.a.awrap(C(e,"/qrcode/list"));case 4:a=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),w(t.t0,"Unable to load QRCode data.");case 10:return t.abrupt("return",a);case 11:case"end":return t.stop()}}),null,null,[[1,7]])}function M(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a={},n.prev=1,n.next=4,r.a.awrap(C(e,"/volunteer/get?id="+t));case 4:a=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),w(n.t0,"Unable to load volunteer info.");case 10:return a.ass||(a.ass={forms:[],teams:[],turfs:[]}),n.abrupt("return",a);case 12:case"end":return n.stop()}}),null,null,[[1,7]])}function U(e,t,a){var n,l;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=[],o.prev=1,l="volunteer/list","team"===t?l="team/members/list?teamId="+a:"turf"===t?l="turf/assigned/volunteer/list?turfId="+a:"form"===t&&(l="form/assigned/volunteer/list?formId="+a),o.next=6,r.a.awrap(C(e,"/"+l));case 6:n=o.sent,o.next=12;break;case 9:o.prev=9,o.t0=o.catch(1),w(o.t0,"Unable to load volunteer data.");case 12:return o.abrupt("return",n);case 13:case"end":return o.stop()}}),null,null,[[1,9]])}function L(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a={},n.prev=1,n.next=4,r.a.awrap(C(e,"/turf/get?turfId="+t));case 4:a=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),w(n.t0,"Unable to load turf data.");case 10:return n.abrupt("return",a);case 11:case"end":return n.stop()}}),null,null,[[1,7]])}function V(e,t,a){var n,l,o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=[],s.prev=1,l="turf/list"+(a?"?geometry=true":""),t&&(l="team/turf/list?teamId="+t+(a?"&geometry=true":"")),s.next=6,r.a.awrap(C(e,"/"+l));case 6:o=s.sent,n=o.data?o.data:[],s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),w(s.t0,"Unable to load turf data.");case 13:return s.abrupt("return",n);case 14:case"end":return s.stop()}}),null,null,[[1,10]])}function H(e,t,a,n){var l,o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return l=[],s.prev=1,s.next=4,r.a.awrap(C(e,"/turf/list/byposition?longitude="+t+"&latitude="+a+(n?"&dist="+n:"")));case 4:o=s.sent,l=o.data?o.data:[],s.next=11;break;case 8:s.prev=8,s.t0=s.catch(1),w(s.t0,"Unable to load turf data.");case 11:return s.abrupt("return",l);case 12:case"end":return s.stop()}}),null,null,[[1,8]])}function q(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a={},n.prev=1,n.next=4,r.a.awrap(C(e,"/team/get?teamId="+t));case 4:a=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),w(n.t0,"Unable to load team data.");case 10:return n.abrupt("return",a.data[0]);case 11:case"end":return n.stop()}}),null,null,[[1,7]])}function R(e,t,a){var n,l,o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=[],s.prev=1,l="team/list","turf"===t?l="turf/assigned/team/list?turfId="+a:"form"===t&&(l="form/assigned/team/list?formId="+a),s.next=6,r.a.awrap(C(e,"/"+l));case 6:o=s.sent,n=o.data?o.data:[],s.next=13;break;case 10:s.prev=10,s.t0=s.catch(1),w(s.t0,"Unable to load teams data.");case 13:return s.abrupt("return",n);case 14:case"end":return s.stop()}}),null,null,[[1,10]])}function Q(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a={},n.prev=1,n.next=4,r.a.awrap(C(e,"/form/get?formId="+t));case 4:a=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),w(n.t0,"Unable to load form data.");case 10:return n.abrupt("return",a);case 11:case"end":return n.stop()}}),null,null,[[1,7]])}function z(e,t){var a,n;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=[],l.prev=1,n=t?"team/form/list?teamId="+t:"form/list",l.next=5,r.a.awrap(C(e,"/"+n));case 5:a=l.sent,l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),w(l.t0,"Unable to load form data.");case 11:return l.abrupt("return",a);case 12:case"end":return l.stop()}}),null,null,[[1,8]])}function B(e,t){var a,n;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a={},l.prev=1,l.next=4,r.a.awrap(C(e,"/attribute/get?id="+t));case 4:(n=l.sent).data&&(a=n.data[0]),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),w(l.t0,"Unable to load attribute data.");case 11:return l.abrupt("return",a);case 12:case"end":return l.stop()}}),null,null,[[1,8]])}function W(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=[],n.prev=1,n.next=4,r.a.awrap(C(e,"/attribute/list"));case 4:a=n.sent,t=a.data?a.data:[],n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),w(n.t0,"Unable to load attribute data.");case 11:return t.forEach((function(e){e.label||(e.label=e.name)})),n.abrupt("return",t);case 13:case"end":return n.stop()}}),null,null,[[1,8]])}function G(e,t,a,n){var l;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return l=[],o.prev=1,o.next=4,r.a.awrap(C(e,"/address/get/byposition?limit=1000&longitude="+t+"&latitude="+a+(n?"&formId="+n:"")));case 4:l=o.sent,o.next=10;break;case 7:o.prev=7,o.t0=o.catch(1),w(o.t0,"Unable to load address information.");case 10:return o.abrupt("return",l);case 11:case"end":return o.stop()}}),null,null,[[1,7]])}function J(e,t,a){var n;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=[],l.prev=1,l.next=4,r.a.awrap(C(e,"/people/get/byaddress?aId="+t+(a?"&formId="+a:"")));case 4:n=l.sent,l.next=10;break;case 7:l.prev=7,l.t0=l.catch(1),w(l.t0,"Unable to load address information.");case 10:return l.abrupt("return",n);case 11:case"end":return l.stop()}}),null,null,[[1,7]])}function Y(e,t){var a=[],n=[];e||(e=[]),t||(t=[]);var r=e.map((function(e){return e.id})),l=t.map((function(e){return e.id}));return l.forEach((function(e){-1===r.indexOf(e)&&a.push(e)})),r.forEach((function(e){-1===l.indexOf(e)&&n.push(e)})),{add:a,rm:n}}var X=function(e){return o.a.createElement(u.a,e,Z)},Z=function(e){var t=e.getInputProps,a=e.getSuggestionItemProps,n=e.suggestions,r=e.loading;return o.a.createElement("div",{className:"autocomplete-root"},o.a.createElement("input",t()),o.a.createElement("div",{className:"autocomplete-dropdown-container"},r&&o.a.createElement("div",null,"Loading..."),n.map((function(e){return o.a.createElement("div",a(e),o.a.createElement("span",null,e.description))}))))},K=function(e){return o.a.createElement("div",null,o.a.createElement(E.a,{onClick:function(){return e.refer.setState({ModalInvite:!0})},color:"primary"},"Invite Someone"),o.a.createElement(O.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:!!e.refer.state.ModalInvite,onClose:function(){return e.refer.setState({ModalInvite:!1})}},o.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},'To invite someone, have them use the HelloVoter mobile app to scan a QR Code (created in the "QR Codes" menu) and they will recieve the same assignments that QR Code has.')))}},451:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return w}));var n=a(5),r=a.n(n),l=a(15),o=a(16),s=a(19),c=a(17),i=a(12),u=a(18),d=a(0),p=a.n(d),m=a(22),f=a(47),h=a(70),b=a.n(h),v=a(21),g=a(503),E=a(87),O=a(3),y=a(173),j=a(125),k=a(83),S=a.n(k);j.a.locale(S.a);var w=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e)))._loadData=function(){var e,t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.state.global,t=[],a.setState({loading:!0,search:""}),n.prev=3,n.next=6,r.a.awrap(Object(O.y)(e));case 6:t=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),Object(O.C)(n.t0,"Unable to load volunteers.");case 12:a.setState({loading:!1,volunteers:t});case 13:case"end":return n.stop()}}),null,null,[[3,9]])},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})};var n=localStorage.getItem("volunteersperpage");return n||(n=5),a.state={global:e.global,loading:!0,thisVolunteer:{},volunteers:[],search:"",perPage:n,pageNum:1},a.onTypeSearch=a.onTypeSearch.bind(Object(i.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(i.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"render",value:function(){var e=this,t=this.state.global,a=[],n=[],l=[],o=[];return this.state.volunteers.forEach((function(t){e.state.search&&!Object(O.z)(t).includes(e.state.search)||(t.locked?l.push(t):t.invited?o.push(t):t.ass.ready||t.ass.teams.length?a.push(t):n.push(t))})),p.a.createElement(O.e,{flag:this.state.loading,func:function(){return e._loadData()}},p.a.createElement(m.a,null,p.a.createElement("div",null,p.a.createElement(O.c,{refer:this}),"Search:"," ",p.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),p.a.createElement("br",null),p.a.createElement(m.b,{to:"/volunteers/",onClick:function(){return e.setState({pageNum:1})}},"Volunteers (",a.length,")"),"\xa0-\xa0",p.a.createElement(m.b,{to:"/volunteers/unassigned",onClick:function(){return e.setState({pageNum:1})}},"Unassigned (",n.length,")"),"\xa0-\xa0",p.a.createElement(m.b,{to:"/volunteers/denied",onClick:function(){return e.setState({pageNum:1})}},"Denied (",l.length,")"),p.a.createElement(f.a,{exact:!0,path:"/volunteers/",render:function(){return p.a.createElement(C,{global:t,refer:e,volunteers:a})}}),p.a.createElement(f.a,{exact:!0,path:"/volunteers/unassigned",render:function(){return p.a.createElement(C,{global:t,refer:e,type:"Unassigned",volunteers:n})}}),p.a.createElement(f.a,{exact:!0,path:"/volunteers/invited",render:function(){return p.a.createElement("div",null,p.a.createElement(C,{global:t,refer:e,type:"Invited",volunteers:o}),p.a.createElement(E.a,{onClick:function(){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(O.g)(t,"/volunteer/invite","POST"));case 2:(a=n.sent).token?e.setState({thisVolunteer:{id:"invite:"+a.token}}):Object(O.C)({},"Invite failed.");case 4:case"end":return n.stop()}}))},color:"primary"},"Invite Someone"))}}),p.a.createElement(f.a,{exact:!0,path:"/volunteers/denied",render:function(){return p.a.createElement(C,{global:t,refer:e,type:"Denied",volunteers:l})}}),p.a.createElement(f.a,{path:"/volunteers/view/:id",render:function(a){return p.a.createElement("div",{style:{position:"absolute",top:100,left:200,right:200,backgroundColor:"white",padding:40}},p.a.createElement(y.a,{global:t,key:a.match.params.id,id:a.match.params.id,edit:!0,refer:e}))}}),p.a.createElement(O.a,{flag:this.state.saving}))))}}]),t}(d.Component),C=function(t){var a=t.refer.state.perPage,n=p.a.createElement("div",null),r=[];return t.volunteers.forEach((function(n,l){Math.floor(l/a)+1===t.refer.state.pageNum&&r.push(p.a.createElement(y.a,{global:e,key:n.id,volunteer:n,refer:t.refer}))})),n=p.a.createElement("div",{style:{display:"flex"}},p.a.createElement(b.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:t.volunteers.length/a,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:t.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",p.a.createElement("div",{style:{width:75}},"# Per Page"," ",p.a.createElement(v.a,{value:{value:a,label:a},onChange:t.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),p.a.createElement("div",null,p.a.createElement("h3",null,t.type," Volunteers (",t.volunteers.length,")"),n,p.a.createElement(g.a,{component:"nav"},r),n)}}).call(this,a(34))},452:function(e,t,a){},453:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return M}));var n=a(48),r=a(5),l=a.n(r),o=a(15),s=a(16),c=a(19),i=a(17),u=a(12),d=a(18),p=a(0),m=a.n(p),f=a(22),h=a(47),b=a(70),v=a.n(b),g=a(108),E=a.n(g),O=a(21),y=a(230),j=a(29),k=a(503),S=a(234),w=a(309),C=a(235),x=a(153),T=a(87),D=a(3),P=a(54),I=a(53),N=a(49),_=a(125),A=a(83),F=a.n(A);_.a.locale(F.a);var M=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e)))._loadData=function(){var e,t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.state.global,t=[],a.setState({loading:!0,search:""}),n.prev=3,n.next=6,l.a.awrap(Object(D.s)(e));case 6:t=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),Object(D.C)(n.t0,"Unable to load qrcodes.");case 12:a.setState({loading:!1,qrcodes:t});case 13:case"end":return n.stop()}}),null,null,[[3,9]])},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})};var n=localStorage.getItem("qrcodesperpage");return n||(n=5),a.state={global:e.global,loading:!0,thisQRCode:{},qrcodes:[],search:"",perPage:n,pageNum:1},a.onTypeSearch=a.onTypeSearch.bind(Object(u.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("qrcodesperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"render",value:function(){var e=this,t=this.state.global,a=[];return this.state.qrcodes.forEach((function(t){e.state.search&&!Object(D.z)(t).includes(e.state.search)||a.push(t)})),m.a.createElement(D.e,{flag:this.state.loading,func:function(){return e._loadData()}},m.a.createElement(f.a,null,m.a.createElement("div",null,"Search:"," ",m.a.createElement("input",{type:"text",value:this.state.value,onChange:this.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),m.a.createElement("br",null),m.a.createElement(h.a,{exact:!0,path:"/qrcode/",render:function(){return m.a.createElement(U,{global:t,refer:e,qrcodes:a})}}),m.a.createElement(h.a,{path:"/qrcode/view/:id",render:function(a){return m.a.createElement(L,{global:t,key:a.match.params.id,id:a.match.params.id,edit:!0,refer:e})}}),m.a.createElement(D.a,{flag:this.state.saving}))))}}]),t}(p.Component),U=function(e){var t=e.refer.state.perPage,a=m.a.createElement("div",null),n=[];return e.qrcodes.forEach((function(a,r){Math.floor(r/t)+1===e.refer.state.pageNum&&n.push(m.a.createElement(L,{global:e.global,key:a.id,qrcode:a,refer:e.refer}))})),a=m.a.createElement("div",{style:{display:"flex"}},m.a.createElement(v.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.qrcodes.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",m.a.createElement("div",{style:{width:75}},"# Per Page"," ",m.a.createElement(O.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),m.a.createElement("div",null,m.a.createElement("h3",null,e.type,"QRCodes (",e.qrcodes.length,")"),a,m.a.createElement(k.a,{component:"nav"},n),a,m.a.createElement(T.a,{onClick:function(){var t;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.a.awrap(Object(D.g)(e.global,"/qrcode/create","POST"));case 2:(t=a.sent)&&t.id?(e.refer.setState({thisQRCode:t}),e.refer._loadData()):Object(D.C)({},"QRCode creation failed.");case 4:case"end":return a.stop()}}))},color:"primary"},"Generate QR CODE"))},L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleTeamsChange=function(e){var t,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=a.state.global,e||(e=[]),a.props.refer.setState({saving:!0}),s.prev=3,n=Object(D.h)(a.state.selectedTeamsOption,e),r=[],n.add.forEach((function(e){r.push(Object(D.g)(t,"/qrcode/team/add","POST",{teamId:e,qId:a.props.id}))})),n.rm.forEach((function(e){r.push(Object(D.g)(t,"/qrcode/team/remove","POST",{teamId:e,qId:a.props.id}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(D.r)(t,a.props.id));case 12:o=s.sent,Object(D.D)("Team assignments saved."),a.setState({selectedTeamsOption:e,qrcode:o}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(D.C)(s.t0,"Unable to add/remove teams.");case 20:a.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},a.handleFormsChange=function(e){var t,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=a.state.global,e||(e=[]),a.props.refer.setState({saving:!0}),s.prev=3,n=Object(D.h)(a.state.selectedFormsOption,e),r=[],n.add.forEach((function(e){r.push(Object(D.g)(t,"/qrcode/form/add","POST",{formId:e,qId:a.props.id}))})),n.rm.forEach((function(e){r.push(Object(D.g)(t,"/qrcode/form/remove","POST",{formId:e,qId:a.props.id}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(D.r)(t,a.props.id));case 12:o=s.sent,Object(D.D)("Form selection saved."),a.setState({selectedFormsOption:e,qrcode:o}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(D.C)(s.t0,"Unable to add/remove form.");case 20:a.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},a.handleTurfChange=function(e){var t,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=a.state.global,e||(e=[]),a.props.refer.setState({saving:!0}),s.prev=3,n=Object(D.h)(a.state.selectedTurfOption,e),r=[],n.add.forEach((function(e){r.push(Object(D.g)(t,"/qrcode/turf/add","POST",{turfId:e,qId:a.props.id}))})),n.rm.forEach((function(e){r.push(Object(D.g)(t,"/qrcode/turf/remove","POST",{turfId:e,qId:a.props.id}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(D.r)(t,a.props.id));case 12:o=s.sent,Object(D.D)("Turf selection saved."),a.setState({selectedTurfOption:e,qrcode:o}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(D.C)(s.t0,"Unable to add/remove turf.");case 20:a.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},a._loadData=function(){var e,t,r,o,s,c,i,d,p,f,h,b,v,g;return l.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return e=a.state.global,t={},r=[],o=[],s=[],a.setState({loading:!0}),E.prev=3,E.next=6,l.a.awrap(Promise.all([Object(D.r)(e,a.props.id),Object(D.n)(e),Object(D.w)(e),Object(D.u)(e)]));case 6:c=E.sent,i=Object(n.a)(c,4),t=i[0],r=i[1],o=i[2],s=i[3],E.next=18;break;case 14:return E.prev=14,E.t0=E.catch(3),Object(D.C)(E.t0,"Unable to load canavasser info."),E.abrupt("return",a.setState({loading:!1}));case 18:d=[],p=[],f=[],h=[],b=[],v=[{value:"",label:"None"}],g=[{value:"",label:"None"}],s.forEach((function(n){d.push({value:Object(D.z)(n),id:n.id,label:m.a.createElement(N.a,{global:e,key:n.id,team:n,refer:Object(u.a)(a)})}),t.ass.teams.forEach((function(t,r){t.id===n.id&&(f.push({value:Object(D.z)(n),id:n.id,label:m.a.createElement(N.a,{global:e,key:n.id,team:n,refer:Object(u.a)(a)})}),p.push({value:Object(D.z)(n),id:n.id,label:m.a.createElement(N.a,{global:e,key:n.id,team:n,refer:Object(u.a)(a)})}))}))})),r.forEach((function(t){v.push({value:Object(D.z)(t),id:t.id,label:m.a.createElement(I.a,{global:e,key:t.id,form:t,refer:Object(u.a)(a)})})})),t.ass.forms.forEach((function(t){t.direct&&h.push({value:Object(D.z)(t),id:t.id,label:m.a.createElement(I.a,{global:e,key:t.id,form:t,refer:Object(u.a)(a)})})})),o.forEach((function(t){g.push({value:Object(D.z)(t),id:t.id,label:m.a.createElement(P.a,{global:e,key:t.id,turf:t,refer:Object(u.a)(a)})})})),t.ass.turfs.forEach((function(t){t.direct&&b.push({value:Object(D.z)(t),id:t.id,label:m.a.createElement(P.a,{global:e,key:t.id,turf:t,refer:Object(u.a)(a)})})})),a.setState({loading:!1,qrcode:t,teamOptions:d,leaderOptions:p,formOptions:v,turfOptions:g,selectedTeamsOption:f,selectedFormsOption:h,selectedTurfOption:b});case 31:case"end":return E.stop()}}),null,null,[[3,14]])},a._disableQRCode=function(e,t){var n;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.state.global,a.props.refer.setState({saving:!0}),t.prev=2,t.next=5,l.a.awrap(Object(D.g)(n,"/qrcode/disable","POST",{id:e.id}));case 5:Object(D.D)("QRCode has been disabled."),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),Object(D.C)(t.t0,"Unable to disable QRCode.");case 11:a.props.refer.setState({saving:!1}),a.props.refer._loadData();case 13:case"end":return t.stop()}}),null,null,[[2,8]])},a.onSave=function(e){var t,n,r;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.state,n=t.global,r=t.qrcode,a.props.refer.setState({saving:!0}),o.prev=2,o.next=5,l.a.awrap(Object(D.g)(n,"/qrcode/update","POST",{id:r.id,name:e}));case 5:Object(D.D)("QRCode has been updated."),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(2),Object(D.C)(o.t0,"Unable to update QRCode.");case 11:a.props.refer.setState({saving:!1}),a.props.refer._loadData();case 13:case"end":return o.stop()}}),null,null,[[2,8]])},a.state={global:e.global,refer:a.props.refer.props.refer,qrcode:a.props.qrcode,selectedTeamsOption:[],selectedFormsOption:[],selectedTurfOption:[]},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.state.qrcode||this._loadData(),E.a.rebuild()}},{key:"componentDidUpdate",value:function(){E.a.rebuild()}},{key:"render",value:function(){var e=this,t=this.state,a=t.global,n=t.qrcode;return!n||this.state.loading?m.a.createElement(x.a,null):this.props.edit?m.a.createElement("div",null,m.a.createElement(S.a,{alignItems:"flex-start",style:{width:350}},m.a.createElement(C.a,null,m.a.createElement("img",{alt:"QR Code",src:n.img}))),m.a.createElement(V,{global:a,qrcode:n,refer:this,link:Object(D.i)(n.id,a.state.server,a.state.orgId),onSave:this.onSave})):m.a.createElement(S.a,{button:!0,style:{width:350},alignItems:"flex-start",onClick:function(){e.props.refer.setState({thisQRCode:n}),window.location.href="/HelloVoterHQ/#/qrcode/view/"+n.id}},m.a.createElement(C.a,null,m.a.createElement(D.b,{icon:j.n,size:"large"})),m.a.createElement(w.a,{primary:n.name,secondary:""}))}}]),t}(p.Component),V=function(t){return m.a.createElement("div",null,m.a.createElement("h1",null,m.a.createElement(y.a,{type:"text",value:t.qrcode.name,onSave:t.onSave})),m.a.createElement("br",null),m.a.createElement("br",null),"Link to use on a mobile device: ",m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.link},t.link),m.a.createElement("br",null),m.a.createElement("br",null),"Last Used:"," ",t.qrcode.last_used?new _.a("en-US").format(new Date(t.qrcode.last_used-3e4)):"Never",m.a.createElement("br",null),"Number of people who've used it: ",t.qrcode.num_volunteers,m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("div",null,"Teams this QRCode gives access to:",m.a.createElement(O.a,{value:t.refer.state.selectedTeamsOption,onChange:t.refer.handleTeamsChange,options:t.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})),m.a.createElement("br",null),t.refer.state.selectedTeamsOption.length?m.a.createElement("div",null,"Forms / Turf this users sees based on the above team(s):",m.a.createElement("br",null),t.qrcode.ass.forms.filter((function(e){return!e.direct})).map((function(a){return m.a.createElement(I.a,{global:e,key:a.id,form:a,refer:t.refer})})),t.qrcode.ass.turfs.filter((function(e){return!e.direct})).map((function(a){return m.a.createElement(P.a,{global:e,key:a.id,turf:a,refer:t.refer})}))):"",m.a.createElement("div",null,"Forms this QRCode gives access to:",m.a.createElement(O.a,{value:t.refer.state.selectedFormsOption,onChange:t.refer.handleFormsChange,options:t.refer.state.formOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),m.a.createElement("br",null),"Turf this QRCode gives access to:",m.a.createElement(O.a,{value:t.refer.state.selectedTurfOption,onChange:t.refer.handleTurfChange,options:t.refer.state.turfOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})),m.a.createElement("br",null),t.qrcode.disabled&&m.a.createElement("div",null,"This QR Code is disabled"),!t.qrcode.disabled&&m.a.createElement(T.a,{onClick:function(){return t.refer._disableQRCode(t.qrcode,!1)}},"Disable QRCode"))}}).call(this,a(34))},456:function(e,t,a){"use strict";(function(e){var t=a(5),n=a.n(t),r=a(48),l=a(15),o=a(16),s=a(19),c=a(17),i=a(12),u=a(18),d=a(0),p=a.n(d),m=a(124),f=a(21),h=a(102),b=a(486),v=a(3),g=a(53),E=function(t){function a(t){var o;return Object(l.a)(this,a),(o=Object(s.a)(this,Object(c.a)(a).call(this,t)))._loadData=function(){var e,t,a,l,s,c;return n.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return e=o.state.global,t=[],a=[],l=[{label:"None"}],u.next=4,n.a.awrap(Promise.all([Object(v.w)(e,null,!0),Object(v.n)(e)]));case 4:s=u.sent,c=Object(r.a)(s,2),t=c[0],(a=c[1]).forEach((function(t){l.push({value:Object(v.z)(t),id:t.id,label:p.a.createElement(g.a,{global:e,key:t.id,form:t,refer:Object(i.a)(o)})})})),o.setState({turfs:t,forms:a,formOptions:l});case 10:case"end":return u.stop()}}))},o.handleFormsChange=function(e){return n.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e||(e=[]),o.setState({selectedFormsOption:e,formId:e.id},(function(){return o.loadMarkerData()}));case 2:case"end":return t.stop()}}))},o.onMarkerClick=function(t,a,r){var l,s,c;return n.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return l=o.state.formId,o.setState({showingInfoWindow:!0}),r.next=4,n.a.awrap(Object(v.q)(e,t.address.id,l));case 4:s=r.sent,(c=s[0]).title=t.title,o.setState({selectedPlace:c,activeMarker:a});case 8:case"end":return r.stop()}}))},o.onTurfClick=function(e){return n.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),o.setState({infoLocation:e.paths[0],activeTurf:e.name});case 2:case"end":return t.stop()}}))},o.loadMarkerData=function(e,t){var a,r,l,s;return n.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.state.global,t?(r=t.center.lng(),l=t.center.lat(),o.setState({longitude:r,latitude:l})):(r=o.state.longitude,l=o.state.latitude),e.next=4,n.a.awrap(Object(v.j)(a,r,l,o.state.formId));case 4:s=e.sent,o.setState({addresses:s});case 6:case"end":return e.stop()}}))},o.onMapClicked=function(e){o.state.showingInfoWindow&&o.setState({showingInfoWindow:!1,activeMarker:null})},o.state={global:t.global,turfs:[],addresses:[],showingInfoWindow:!1,selectedPlace:{},selectedFormsOption:{},formId:null},o}return Object(u.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"statusColor",value:function(e){if(!e.visits||0===e.visits.length)return"purple";switch(e.visits[0].status){case 0:return"yellow";case 1:return"green";case 2:return"red";default:return"purple"}}},{key:"render",value:function(){var e=this,t=[],a=this.state,n=a.addresses,r=a.selectedPlace,l=Object(v.f)(this.props);return l.lng&&l.lat?(this.state.turfs.forEach((function(e){e.geometry&&Object(h.geojson2polygons)(JSON.parse(e.geometry)).forEach((function(a){return t.push({name:e.name,polygon:a})}))})),p.a.createElement(v.e,{flag:this.state.loading,func:function(){return e.loadMarkerData()}},p.a.createElement("div",{style:{display:"flex"}},"Show interaction status by Form:",p.a.createElement(f.a,{value:this.state.selectedFormsOption,onChange:this.handleFormsChange,options:this.state.formOptions,isSearchable:!0,placeholder:"None"})),p.a.createElement(m.Map,{google:this.props.google,zoom:17,initialCenter:l,onReady:this.loadMarkerData,onDragend:this.loadMarkerData,onClick:this.onMapClicked},n.map((function(t,a){return p.a.createElement(m.Marker,{key:a,onClick:e.onMarkerClick,title:t.address.street+", "+t.address.city+", "+t.address.state+", "+t.address.zip,icon:{url:"http://maps.google.com/mapfiles/ms/icons/"+e.statusColor(t)+"-dot.png"},address:t.address,position:{lng:t.address.longitude,lat:t.address.latitude}})})),t.map((function(t,a){return p.a.createElement(m.Polygon,{key:a,paths:t.polygon,name:t.name,onClick:e.onTurfClick,strokeColor:"#0000FF",strokeWeight:5,fillColor:"#000000",fillOpacity:0})})),p.a.createElement(m.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},p.a.createElement(O,{place:r})),p.a.createElement(m.InfoWindow,{position:this.state.infoLocation,visible:!!this.state.activeTurf},p.a.createElement("h1",null,"Turf: ",this.state.activeTurf))))):p.a.createElement("div",null,"Loading map...")}}]),a}(d.Component),O=function(e){var t=e.place.people,a=e.place.units;return t||(t=[]),a||(a=[]),p.a.createElement("div",null,p.a.createElement("h1",null,e.place.title),a.length?"This is a multi unit address with "+a.length+" units.":"",t.map((function(e){return p.a.createElement(y,{person:e})})))},y=function(e){var t=e.person.attrs;t||(t=[]);var a="",n="";return t.forEach((function(e){"Name"===e.name&&(a=e.value),"Party Affiliation"===e.name&&(n=e.value)})),p.a.createElement("div",null,p.a.createElement("b",null,"Name: ",a),p.a.createElement("br",null),p.a.createElement("b",null,"Party: ",n))};Object(m.GoogleApiWrapper)((function(e){return{apiKey:e.apiKey}}))(Object(b.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})(E))}).call(this,a(34))},478:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return y}));var n=a(5),r=a.n(n),l=a(15),o=a(16),s=a(19),c=a(17),i=a(18),u=a(0),d=a.n(u),p=a(109),m=a(21),f=a(87),h=a(3),b=a(54),v=a(53),g=a(125),E=a(83),O=a.n(E);g.a.locale(O.a);var y=function(t){return d.a.createElement("div",null,d.a.createElement("br",null),t.volunteer.locked?d.a.createElement(f.a,{onClick:function(){return t.refer._lockVolunteer(t.volunteer,!1)}},"Restore Access"):d.a.createElement(f.a,{onClick:function(){return t.refer._lockVolunteer(t.volunteer,!0)}},"Deny Access"),d.a.createElement("br",null),"Last Seen:"," ",new g.a("en-US").format(new Date(t.volunteer.last_seen-3e4)),d.a.createElement("br",null),"Email: ",t.volunteer.email?t.volunteer.email:"N/A",d.a.createElement("br",null),"Phone: ",t.volunteer.phone?t.volunteer.phone:"N/A",d.a.createElement("br",null),"Address:"," ",d.a.createElement(j,{global:e,refer:t.refer,volunteer:t.volunteer}),d.a.createElement("br",null),t.refer.state.hometurf.length?d.a.createElement("div",null,"Turf this volunteer's home address is in:",t.refer.state.hometurf.map((function(e){return d.a.createElement("div",null,e.name)}))):d.a.createElement("div",null,"This volunteer's home address isn't in any turf."),d.a.createElement("br",null),t.refer.state.nearbyturf.length?d.a.createElement("div",null,"Turf this volunteer's home address is near by:",t.refer.state.nearbyturf.slice(0,5).map((function(e){return d.a.createElement("div",null,e.name)}))):d.a.createElement("div",null,"No turfs are within ",50,"km of this volunteer."),d.a.createElement("br",null),"# of doors knocked: N/A",d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("div",null,"Teams this volunteer is a member of:",d.a.createElement(m.a,{value:t.refer.state.selectedTeamsOption,onChange:t.refer.handleTeamsChange,options:t.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})),d.a.createElement("br",null),t.refer.state.selectedTeamsOption.length?d.a.createElement("div",null,"Forms / Turf this users sees based on the above team(s):",d.a.createElement("br",null),t.volunteer.ass.forms.filter((function(e){return!e.direct})).map((function(a){return d.a.createElement(v.a,{global:e,key:a.id,form:a,refer:t.refer})})),t.volunteer.ass.turfs.filter((function(e){return!e.direct})).map((function(a){return d.a.createElement(b.a,{global:e,key:a.id,turf:a,refer:t.refer})}))):"",d.a.createElement("div",null,"Forms this volunteer is directly assigned to:",d.a.createElement(m.a,{value:t.refer.state.selectedFormsOption,onChange:t.refer.handleFormsChange,options:t.refer.state.formOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),d.a.createElement("br",null),"Turf this volunteer is directly assigned to:",d.a.createElement(m.a,{value:t.refer.state.selectedTurfOption,onChange:t.refer.handleTurfChange,options:t.refer.state.turfOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})))},j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).submitAddress=function(e){var t,n,l;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.state.global,a.setState({address:e}),o.prev=2,o.next=5,r.a.awrap(Object(p.geocodeByAddress)(e));case 5:return n=o.sent,o.next=8,r.a.awrap(Object(p.getLatLng)(n[0]));case 8:return l=o.sent,o.next=11,r.a.awrap(Object(h.g)(t,"/volunteer/update","POST",{id:a.props.volunteer.id,address:e,lat:l.lat,lng:l.lng}));case 11:a.props.refer._loadData(),Object(h.D)("Address hass been saved."),o.next=18;break;case 15:o.prev=15,o.t0=o.catch(2),Object(h.C)(o.t0,"Unable to update address info.");case 18:case"end":return o.stop()}}),null,null,[[2,15]])},a.state={global:e.global,edit:!1,address:a.props.volunteer.locationstr?a.props.volunteer.locationstr:""},a.onTypeAddress=function(e){return a.setState({address:e})},a}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.edit?d.a.createElement(h.d,{debounce:500,value:this.state.address,onChange:this.onTypeAddress,onSelect:this.submitAddress}):d.a.createElement("div",null,this.state.address," ",d.a.createElement(f.a,{onClick:function(){return e.setState({edit:!0})}},"click to edit"))}}]),t}(u.Component)}).call(this,a(34))},49:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return A})),a.d(t,"a",(function(){return M}));var n=a(48),r=a(5),l=a.n(r),o=a(15),s=a(16),c=a(19),i=a(17),u=a(12),d=a(18),p=a(0),m=a.n(p),f=a(22),h=a(47),b=a(70),v=a.n(b),g=a(21),E=a(55),O=a.n(E),y=a(153),j=a(87),k=a(1010),S=a(1012),w=a(1013),C=a(3),x=a(54),T=a(53),D=a(77),P=a(29),I=a(125),N=a(83),_=a.n(N);I.a.locale(_.a);var A=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a._deleteTeam=function(e){var t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.state.global,a.setState({saving:!0,menuDelete:!1}),n.prev=2,n.next=5,l.a.awrap(Object(C.g)(t,"/team/delete","POST",{teamId:e}));case 5:Object(C.D)("Team has been deleted."),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),Object(C.C)(n.t0,"Unable to delete teams.");case 11:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/teams/",a._loadData();case 14:case"end":return n.stop()}}),null,null,[[2,8]])},a._createTeam=function(){var e,t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.state.global,null!==(t=a.addTeamForm.getValue())){n.next=4;break}return n.abrupt("return");case 4:return a.setState({saving:!0}),n.prev=5,n.next=8,l.a.awrap(Object(C.g)(e,"/team/create","POST",{name:t.name}));case 8:Object(C.D)("Team has been created."),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),Object(C.C)(n.t0,"Unable to create team.");case 14:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/teams/",a._loadData();case 17:case"end":return n.stop()}}),null,null,[[5,11]])},a._loadData=function(){var e,t;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.state.global,a.setState({loading:!0,search:""}),t=[],n.prev=3,n.next=6,l.a.awrap(Object(C.u)(e));case 6:t=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),Object(C.C)(n.t0,"Unable to load volunteers.");case 12:a.setState({loading:!1,teams:t});case 13:case"end":return n.stop()}}),null,null,[[3,9]])},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})};var n=localStorage.getItem("teamsperpage");return n||(n=5),a.state={global:e.global,loading:!0,teams:[],search:"",perPage:n,pageNum:1,menuDelete:!1},a.formServerItems=O.a.struct({name:O.a.String}),a.formServerOptions={fields:{server:{label:"Team Name",error:"You must enter a team name."}}},a.onTypeSearch=a.onTypeSearch.bind(Object(u.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(u.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this._loadData()}},{key:"onChangeTeam",value:function(e){this.setState({addTeamForm:e})}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("teamsperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"render",value:function(){var e=this,t=this.state.global,a=[];return this.state.teams.forEach((function(t){e.state.search&&!Object(C.z)(t).includes(e.state.search)||a.push(t)})),m.a.createElement(f.a,null,m.a.createElement("div",null,m.a.createElement(h.a,{exact:!0,path:"/teams/",render:function(){return m.a.createElement(C.e,{flag:e.state.loading,func:e._loadData},"Search:"," ",m.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),m.a.createElement(F,{global:t,refer:e,teams:a}))}}),m.a.createElement(h.a,{exact:!0,path:"/teams/add",render:function(){return m.a.createElement("div",null,m.a.createElement(O.a.form.Form,{ref:function(t){return e.addTeamForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTeam(t)},value:e.state.addTeamForm}),m.a.createElement("button",{onClick:function(){return e._createTeam()}},"Submit"))}}),m.a.createElement(h.a,{path:"/teams/view/:id",render:function(a){return m.a.createElement("div",null,m.a.createElement(M,{global:t,key:a.match.params.id,id:a.match.params.id,edit:!0,refer:e}),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement(j.a,{onClick:e.handleClickDelete,color:"primary"},"Delete Team"),m.a.createElement(k.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.a.createElement(S.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this team?"),m.a.createElement(w.a,null,m.a.createElement(j.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),m.a.createElement(j.a,{onClick:function(){return e._deleteTeam(a.match.params.id)},color:"primary"},"Yes"))))}}),m.a.createElement(C.a,{flag:this.state.saving})))}}]),t}(p.Component),F=function(e){var t=e.refer.state.perPage,a=m.a.createElement("div",null),n=[];return e.teams.forEach((function(a,r){Math.floor(r/t)+1===e.refer.state.pageNum&&n.push(m.a.createElement(M,{global:e.global,key:a.id,team:a,refer:e.refer}))})),a=m.a.createElement("div",{style:{display:"flex"}},m.a.createElement(v.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.teams.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",m.a.createElement("div",{style:{width:75}},"# Per Page"," ",m.a.createElement(g.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),m.a.createElement("div",null,m.a.createElement("h3",null,e.type,"Teams (",e.teams.length,")"),m.a.createElement(f.b,{to:"/teams/add"},m.a.createElement("button",null,"Add Team")),a,n,a)},M=function(t){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(i.a)(a).call(this,e))).handleMembersChange=function(e){var a,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=t.state.global,e||(e=[]),t.props.refer.setState({saving:!0}),s.prev=3,n=Object(C.h)(t.state.selectedMembersOption,e),r=[],n.add.forEach((function(e){r.push(Object(C.g)(a,"/team/members/add","POST",{teamId:t.props.id,vId:e}))})),n.rm.forEach((function(e){r.push(Object(C.g)(a,"/team/members/remove","POST",{teamId:t.props.id,vId:e}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(C.t)(a,t.props.id));case 12:o=s.sent,Object(C.D)("Team assignments saved."),t.setState({selectedMembersOption:e,team:o}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(C.C)(s.t0,"Unable to add/remove team members.");case 20:t.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},t.handleFormsChange=function(e){var a,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=t.state.global,e||(e=[]),t.props.refer.setState({saving:!0}),s.prev=3,n=Object(C.h)(t.state.selectedFormsOption,e),r=[],n.add.forEach((function(e){r.push(Object(C.g)(a,"/form/assigned/team/add","POST",{formId:e,teamId:t.props.id}))})),n.rm.forEach((function(e){r.push(Object(C.g)(a,"/form/assigned/team/remove","POST",{formId:e,teamId:t.props.id}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(C.t)(a,t.props.id));case 12:o=s.sent,Object(C.D)("Form selection saved."),t.setState({teamn:o,selectedFormsOption:e}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(C.C)(s.t0,"Unable to add/remove form.");case 20:t.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},t.handleTurfChange=function(e){var a,n,r,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=t.state.global,e||(e=[]),t.props.refer.setState({saving:!0}),s.prev=3,n=Object(C.h)(t.state.selectedTurfOption,e),r=[],n.add.forEach((function(e){r.push(Object(C.g)(a,"/turf/assigned/team/add","POST",{turfId:e,teamId:t.props.id}))})),n.rm.forEach((function(e){r.push(Object(C.g)(a,"/turf/assigned/team/remove","POST",{turfId:e,teamId:t.props.id}))})),s.next=10,l.a.awrap(Promise.all(r));case 10:return s.next=12,l.a.awrap(Object(C.t)(a,t.props.id));case 12:o=s.sent,Object(C.D)("Turf selection saved."),t.setState({team:o,selectedTurfOption:e}),s.next=20;break;case 17:s.prev=17,s.t0=s.catch(3),Object(C.C)(s.t0,"Unable to add/remove turf.");case 20:t.props.refer.setState({saving:!1});case 21:case"end":return s.stop()}}),null,null,[[3,17]])},t._loadData=function(){var e,a,r,o,s,c,i,d,p,f,h,b,v,g,E,O;return l.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:return e=t.state.global,a={},r=[],o=[],s=[],c=[],i=[],d=[],t.setState({loading:!0}),y.prev=3,y.next=6,l.a.awrap(Promise.all([Object(C.t)(e,t.props.id),Object(C.y)(e),Object(C.y)(e,"team",t.props.id),Object(C.w)(e,t.props.id),Object(C.w)(e),Object(C.n)(e,t.props.id),Object(C.n)(e)]));case 6:p=y.sent,f=Object(n.a)(p,7),a=f[0],r=f[1],o=f[2],s=f[3],c=f[4],i=f[5],d=f[6],y.next=21;break;case 17:return y.prev=17,y.t0=y.catch(3),Object(C.C)(y.t0,"Unable to load team info."),y.abrupt("return",t.setState({loading:!1}));case 21:h=[],b=[],v=[],g=[],E=[],O=[],r.forEach((function(a){h.push({value:Object(C.z)(a),id:a.id,label:m.a.createElement(D.a,{global:e,key:a.id,volunteer:a,refer:Object(u.a)(t)})})})),o.forEach((function(a){g.push({value:Object(C.z)(a),id:a.id,label:m.a.createElement(D.a,{global:e,key:a.id,volunteer:a,refer:Object(u.a)(t)})})})),c.forEach((function(a){v.push({value:Object(C.z)(a),id:a.id,label:m.a.createElement(x.a,{global:e,key:a.id,turf:a,refer:Object(u.a)(t)})})})),s.forEach((function(a){E.push({value:Object(C.z)(a),id:a.id,label:m.a.createElement(x.a,{global:e,key:a.id,turf:a,refer:Object(u.a)(t)})})})),d.forEach((function(a){b.push({value:Object(C.z)(a),id:a.id,label:m.a.createElement(T.a,{global:e,key:a.id,form:a,refer:Object(u.a)(t)})})})),i.forEach((function(a){O.push({value:Object(C.z)(a),id:a.id,label:m.a.createElement(T.a,{global:e,key:a.id,form:a,refer:Object(u.a)(t)})})})),t.setState({team:a,memberOptions:h,turfOptions:v,formOptions:b,selectedMembersOption:g,selectedTurfOption:E,selectedFormsOption:O,loading:!1});case 34:case"end":return y.stop()}}),null,null,[[3,17]])},t.state={global:e.global,team:t.props.team,selectedMembersOption:[],selectedFormsOption:[],selectedTurfOption:[]},t}return Object(d.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){this.state.team||this._loadData()}},{key:"render",value:function(){var t=this.state.team;return!t||this.state.loading?m.a.createElement(y.a,null):m.a.createElement("div",null,m.a.createElement("div",{style:{display:"flex",padding:"10px"}},m.a.createElement("div",{style:{flex:1,overflow:"auto",padding:"5px 10px"}},m.a.createElement(C.b,{icon:P.s,style:{width:20,height:20,color:"gray"}})," ",t.name," ",this.props.edit?"":m.a.createElement(f.b,{to:"/teams/view/"+t.id},"view"))),this.props.edit?m.a.createElement(U,{global:e,team:t,refer:this}):"")}}]),a}(p.Component),U=function(e){return m.a.createElement("div",null,m.a.createElement("br",null),m.a.createElement("div",null,"Members of this team:",m.a.createElement(g.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.memberOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})),m.a.createElement("br",null),m.a.createElement("div",null,"Form this team is assigned to:",m.a.createElement(g.a,{value:e.refer.state.selectedFormsOption,onChange:e.refer.handleFormsChange,options:e.refer.state.formOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),m.a.createElement("br",null),"Turf this team assigned to:",m.a.createElement(g.a,{value:e.refer.state.selectedTurfOption,onChange:e.refer.handleTurfChange,options:e.refer.state.turfOptions,isMulti:!0,isSearchable:!0,placeholder:"None"})))}}).call(this,a(34))},53:function(e,t,a){"use strict";var n=a(5),r=a.n(n),l=a(15),o=a(16),s=a(19),c=a(17),i=a(12),u=a(18),d=a(0),p=a.n(d),m=a(22),f=a(47),h=a(70),b=a.n(h),v=a(21),g=a(55),E=a.n(g),O=a(87),y=a(1010),j=a(1012),k=a(1013),S=a(3),w=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})},a._loadData=function(){var e,t,n,l,o;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=a.state.global,a.setState({loading:!0}),t=[],n=[],l=[],o={},s.prev=5,s.next=8,r.a.awrap(Object(S.n)(e));case 8:return t=s.sent,s.next=11,r.a.awrap(Object(S.l)(e));case 11:(n=s.sent).forEach((function(e){o[e.id]={label:e.name,type:e.type,optional:!0,options:e.values}})),s.next=18;break;case 15:s.prev=15,s.t0=s.catch(5),Object(S.C)(s.t0,"Unable to load forms.");case 18:a.setState({forms:t,attributes:n,attributes_selected:l,fields:o,loading:!1});case 19:case"end":return s.stop()}}),null,null,[[5,15]])},a._deleteForm=function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.state.global,a.setState({saving:!0,menuDelete:!1}),n.prev=2,n.next=5,r.a.awrap(Object(S.g)(t,"/form/delete","POST",{formId:e}));case 5:Object(S.D)("Form has been deleted."),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),Object(S.C)(n.t0,"Unable to delete form.");case 11:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/forms/",a._loadData();case 14:case"end":return n.stop()}}),null,null,[[2,8]])},a._createForm=function(){var e,t,n,l,o,s;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=a.state,t=e.global,n=e.attributes_selected,null!==(l=a.addFormForm.getValue())){c.next=4;break}return c.abrupt("return");case 4:if((o=l.name.trim()).match(/^[a-zA-Z0-9\-_ ]+$/)){c.next=8;break}return Object(S.C)({},"From name can only contain alphanumeric characters, and spaces and dashes."),c.abrupt("return");case 8:if(!(o.length>255)){c.next=11;break}return Object(S.C)({},"Form name cannot be longer than 255 characters."),c.abrupt("return");case 11:return a.setState({saving:!0}),c.prev=12,s={name:o,attributes:n.map((function(e){return e.id}))},c.next=16,r.a.awrap(Object(S.g)(t,"/form/create","POST",s));case 16:Object(S.D)("Form has been created."),c.next=22;break;case 19:c.prev=19,c.t0=c.catch(12),Object(S.C)(c.t0,"Unable to create form.");case 22:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/forms/",a._loadData();case 25:case"end":return c.stop()}}),null,null,[[12,19]])},a.atupdate=function(e){var t=e.attributes_selected;a.setState({attributes_selected:t})};var n=localStorage.getItem("formsperpage");n||(n=5);var o={},u=Object.keys(o);return a.state={global:e.global,loading:!0,forms:[],attributes:[],attributes_selected:[],fields:o,order:u,search:"",perPage:n,pageNum:1,menuDelete:!1},a.formServerItems=E.a.struct({name:E.a.String}),a.formServerOptions={fields:{name:{label:"Form Name",error:"You must enter a form name."}}},a.onTypeSearch=a.onTypeSearch.bind(Object(i.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(i.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handlePageNumChange",value:function(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"onChangeForm",value:function(e){this.setState({addFormForm:e})}},{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state.global,a=[];return this.state.forms.forEach((function(t){e.state.search&&!Object(S.z)(t).includes(e.state.search)||a.push(t)})),p.a.createElement(m.a,null,p.a.createElement("div",null,p.a.createElement(f.a,{exact:!0,path:"/forms/",render:function(){return p.a.createElement(S.e,{flag:e.state.loading,func:function(){return e._loadData()}},"Search:"," ",p.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),p.a.createElement("br",null),p.a.createElement(C,{global:t,forms:a,refer:e}))}}),p.a.createElement(f.a,{path:"/forms/add",render:function(t){return p.a.createElement("div",null,p.a.createElement(E.a.form.Form,{ref:function(t){return e.addFormForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeForm(t)},value:e.state.addFormForm}),p.a.createElement(N,{onChange:e.atupdate,attributes:e.state.attributes,selected:e.state.attributes_selected}),p.a.createElement("button",{style:{margin:25},onClick:function(){return e._createForm()}},"Create Form"))}}),p.a.createElement(f.a,{path:"/forms/view/:id",render:function(a){return p.a.createElement("div",null,p.a.createElement(L,{global:t,key:a.match.params.id,id:a.match.params.id,edit:!0,refer:e}),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement(O.a,{onClick:e.handleClickDelete,color:"primary"},"Delete Form"),p.a.createElement(y.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},p.a.createElement(j.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this form?"),p.a.createElement(k.a,null,p.a.createElement(O.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),p.a.createElement(O.a,{onClick:function(){return e._deleteForm(a.match.params.id)},color:"primary"},"Yes"))))}}),p.a.createElement(S.a,{flag:this.state.saving})))}}]),t}(d.Component),C=function(e){var t=e.refer.state.perPage,a=p.a.createElement("div",null),n=[];return e.forms.forEach((function(a,r){Math.floor(r/t)+1===e.refer.state.pageNum&&n.push(p.a.createElement(L,{global:e.global,key:a.id,form:a,refer:e.refer}))})),a=p.a.createElement("div",{style:{display:"flex"}},p.a.createElement(b.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.forms.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",p.a.createElement("div",{style:{width:75}},"# Per Page"," ",p.a.createElement(v.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),p.a.createElement("div",null,p.a.createElement("h3",null,e.type,"Forms (",e.forms.length,")"),p.a.createElement(m.b,{to:"/forms/add"},p.a.createElement("button",null,"Add Form")),a,n,a)},x=a(48),T=a(98),D=a(233);var P=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),l=Object(x.a)(r,1)[0];return n.splice(a,0,l),n},I=function(e,t,a,n){var r=Array.from(e),l=Array.from(t),o=r.splice(a.index,1),s=Object(x.a)(o,1)[0];l.splice(n.index,0,s);var c={};return c[a.droppableId]=r,c[n.droppableId]=l,c},N=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).getList=function(e){return a.state[a.id2List[e]]},a.onDragEnd=function(e){var t=a.state.onChange,n=e.source,r=e.destination;if(r)if(n.droppableId===r.droppableId){var l=P(a.getList(n.droppableId),n.index,r.index),o={attributes:l};"droppable2"===n.droppableId&&(o={attributes_selected:l}),a.setState(o,(function(){return t(a.state)}))}else{var s=I(a.getList(n.droppableId),a.getList(r.droppableId),n,r);a.setState({attributes:s.droppable,attributes_selected:s.droppable2},(function(){return t(a.state)}))}};var n=localStorage.getItem("formsperpage");n||(n=5);Object.keys({});return a.state={onChange:e.onChange,attributes:[],attributes_selected:e.selected},e.attributes.forEach((function(e){-1===a.state.attributes_selected.map((function(e){return e.id})).indexOf(e.id)&&a.state.attributes.push(e)})),a.id2List={droppable:"attributes",droppable2:"attributes_selected"},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=(e.refer,e.attributes),a=e.attributes_selected;return p.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},p.a.createElement(D.a,{onDragEnd:this.onDragEnd},p.a.createElement(_,{label:"Available Attributes",droppableId:"droppable",attributes:t}),"\xa0 Drag to assign \xa0",p.a.createElement(_,{label:"Attributes on this Form",droppableId:"droppable2",attributes:a})))}}]),t}(d.Component),_=function(e){return p.a.createElement(D.c,{droppableId:e.droppableId},(function(t,a){return p.a.createElement("div",{ref:t.innerRef,style:(n=a.isDraggingOver,{background:n?"lightblue":"lightgrey",padding:8,width:250})},e.label,e.attributes.map((function(e,t){return p.a.createElement(D.b,{key:e.id,draggableId:e.id,index:t},(function(t,a){return p.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:(n=a.isDragging,r=t.draggableProps.style,Object(T.a)({userSelect:"none",padding:16,margin:"0 0 ".concat(8,"px 0"),background:n?"lightgreen":"grey"},r))}),e.label+(e.required?" *":"")," :"," ",function(e){switch(e){case"String":return"Text Input";case"TEXTBOX":return"Text Box";case"Number":return"Number";case"Boolean":return"On/Off Switch";case"SAND":return"Agree/Disagree";case"List":return"Select from List";default:return e}}(e.type)," ");var n,r}))})),t.placeholder);var n}))},A=a(153),F=a(29),M=a(77),U=a(49),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleTeamsChange=function(e){var t,n,l;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.state.global,e||(e=[]),a.props.refer.setState({saving:!0}),o.prev=3,n=Object(S.h)(a.state.selectedTeamsOption,e),l=[],n.add.forEach((function(e){l.push(Object(S.g)(t,"/form/assigned/team/add","POST",{teamId:e,formId:a.props.id}))})),n.rm.forEach((function(e){l.push(Object(S.g)(t,"/form/assigned/team/remove","POST",{teamId:e,formId:a.props.id}))})),o.next=10,r.a.awrap(Promise.all(l));case 10:Object(S.D)("Team assignments saved."),a.setState({selectedTeamsOption:e}),o.next=17;break;case 14:o.prev=14,o.t0=o.catch(3),Object(S.C)(o.t0,"Unable to add/remove teams.");case 17:a.props.refer.setState({saving:!1});case 18:case"end":return o.stop()}}),null,null,[[3,14]])},a.handleAttributeChange=function(e){var t,n,l;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.attributes_selected,n=a.state.global,o.prev=2,o.next=5,r.a.awrap(Object(S.g)(n,"/form/update","POST",{formId:a.props.id,attributes:t.map((function(e){return e.id}))}));case 5:l=o.sent,console.warn({blah:l}),Object(S.D)("Attributes assignments saved."),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),Object(S.C)(o.t0,"Unable to add/remove attribute.");case 13:case"end":return o.stop()}}),null,null,[[2,10]])},a.handleMembersChange=function(e){var t,n,l;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=a.state.global,e||(e=[]),a.props.refer.setState({saving:!0}),o.prev=3,n=Object(S.h)(a.state.selectedMembersOption,e),l=[],n.add.forEach((function(e){l.push(Object(S.g)(t,"/form/assigned/volunteer/add","POST",{vId:e,formId:a.props.id}))})),n.rm.forEach((function(e){l.push(Object(S.g)(t,"/form/assigned/volunteer/remove","POST",{vId:e,formId:a.props.id}))})),o.next=10,r.a.awrap(Promise.all(l));case 10:Object(S.D)("Volunteer assignments saved."),a.setState({selectedMembersOption:e}),o.next=17;break;case 14:o.prev=14,o.t0=o.catch(3),Object(S.C)(o.t0,"Unable to add/remove teams.");case 17:a.props.refer.setState({saving:!1});case 18:case"end":return o.stop()}}),null,null,[[3,14]])},a._loadData=function(){var e,t,n,l,o,s,c,u,d,m,f,h,b;return r.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:return e=a.state.global,t={},n=[],l=[],o=[],s=[],c=[],a.setState({loading:!0}),v.prev=3,v.next=6,r.a.awrap(Promise.all([Object(S.m)(e,a.props.id,!0),Object(S.y)(e),Object(S.y)(e,"form",a.props.id),Object(S.u)(e),Object(S.u)(e,"form",a.props.id),Object(S.l)(e)]));case 6:u=v.sent,d=Object(x.a)(u,6),t=d[0],n=d[1],l=d[2],o=d[3],s=d[4],c=d[5],v.next=20;break;case 16:return v.prev=16,v.t0=v.catch(3),Object(S.C)(v.t0,"Unable to load form info."),v.abrupt("return",a.setState({loading:!1}));case 20:m=[],f=[],h=[],b=[],o.forEach((function(t){m.push({value:Object(S.z)(t),id:t.id,label:p.a.createElement(U.a,{global:e,key:t.id,team:t,refer:Object(i.a)(a)})})})),s.forEach((function(t){h.push({value:Object(S.z)(t),id:t.id,label:p.a.createElement(U.a,{global:e,key:t.id,team:t,refer:Object(i.a)(a)})})})),n.forEach((function(t){f.push({value:Object(S.z)(t),id:t.id,label:p.a.createElement(M.a,{global:e,key:t.id,volunteer:t,refer:Object(i.a)(a)})})})),l.forEach((function(t){b.push({value:Object(S.z)(t),id:t.id,label:p.a.createElement(M.a,{global:e,key:t.id,volunteer:t,refer:Object(i.a)(a)})})})),a.setState({form:t,attributes:c,attributes_selected:t.attributes.map((function(e){return e.label||(e.label=e.name),e})),volunteers:n,teamOptions:m,membersOption:f,selectedTeamsOption:h,selectedMembersOption:b,loading:!1});case 29:case"end":return v.stop()}}),null,null,[[3,16]])},a.state={global:e.global,form:a.props.form,selectedTeamsOption:[],selectedMembersOption:[],attributes:[],attributes_selected:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.state.form||this._loadData()}},{key:"render",value:function(){var e=this.state,t=e.global,a=e.form,n=e.attributes,r=e.attributes_selected;return!a||this.state.loading?p.a.createElement(A.a,null):p.a.createElement("div",null,p.a.createElement("div",{style:{display:"flex",padding:"10px"}},p.a.createElement("div",{style:{padding:"5px 10px"}},p.a.createElement(S.b,{icon:F.d,style:{width:20,height:20,color:"gray"}})," ",a.name," ",this.props.edit?"":p.a.createElement(m.b,{to:"/forms/view/"+a.id},"view"))),this.props.edit?p.a.createElement(V,{global:t,form:a,refer:this,attributes:n,selected:r}):"")}}]),t}(d.Component),V=function(e){return p.a.createElement("div",null,p.a.createElement("div",null,p.a.createElement("br",null),"Teams assigned to this form:",p.a.createElement(v.a,{value:e.refer.state.selectedTeamsOption,onChange:e.refer.handleTeamsChange,options:e.refer.state.teamOptions,isMulti:!0,isSearchable:!0,placeholder:"None"}),p.a.createElement("br",null),"Volunteers assigned directly to this form:",p.a.createElement(v.a,{value:e.refer.state.selectedMembersOption,onChange:e.refer.handleMembersChange,options:e.refer.state.membersOption,isMulti:!0,isSearchable:!0,placeholder:"None"})),p.a.createElement("br",null),p.a.createElement(N,{onChange:e.refer.handleAttributeChange,attributes:e.attributes,selected:e.selected}))};a.d(t,"d",(function(){return w})),a.d(t,"c",(function(){return N})),a.d(t,"a",(function(){return L})),a.d(t,"b",(function(){return V}))},54:function(e,t,a){"use strict";var n=a(219),r=(a(220),a(0)),l=a.n(r),o=a(22),s=a(70),c=a.n(s),i=a(21),u=function(e){var t=e.refer.state.perPage,a=l.a.createElement("div",null),r=[];return e.turf.forEach((function(a,o){Math.floor(o/t)+1===e.refer.state.pageNum&&r.push(l.a.createElement(n.a,{global:e.global,key:a.id,turf:a,refer:e.refer}))})),a=l.a.createElement("div",{style:{display:"flex"}},l.a.createElement(c.a,{previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:e.turf.length/t,marginPagesDisplayed:1,pageRangeDisplayed:8,onPageChange:e.refer.handlePageClick,containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active"}),"\xa0\xa0\xa0",l.a.createElement("div",{style:{width:75}},"# Per Page"," ",l.a.createElement(i.a,{value:{value:t,label:t},onChange:e.refer.handlePageNumChange,options:[{value:5,label:5},{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]}))),l.a.createElement("div",null,l.a.createElement("h3",null,e.type,"Turf (",e.turf.length,")"),l.a.createElement(o.b,{to:"/turf/add"},l.a.createElement("button",null,"Add Turf")),a,r,a)},d=a(15),p=a(16),m=a(19),f=a(17),h=a(18),b=a(153),v=a(102),g=a(3),E=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleStateChange=function(e){e||(e=[]),a.setState({typeOptions:[{value:"state",label:"State"},{value:"cd",label:"Congressional"},{value:"sldu",label:v.us_states[e.value].sldu},{value:"sldl",label:v.us_states[e.value].sldl}]}),a.props.refer.handleStateChange(e)},a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.refer.state.selectedDrawOption)return l.a.createElement("br",null);var t=[];switch(Object.keys(v.us_states).map((function(e){return t.push({value:e,label:v.us_states[e].name})})),this.props.refer.state.selectedDrawOption.value){case"select":return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("br",null),"State or region:",l.a.createElement(i.a,{value:this.props.refer.state.selectedStateOption,onChange:this.handleStateChange,options:t,isSearchable:!0,placeholder:"Select state or region"})),this.props.refer.state.selectedStateOption?l.a.createElement("div",null,l.a.createElement("br",null),"District Type:",l.a.createElement(i.a,{value:this.props.refer.state.selectedTypeOption,onChange:this.props.refer.handleTypeChange,onMenuClose:this.props.refer.selectedTypeFetch,options:this.state.typeOptions,isSearchable:!1,placeholder:"Select district for this turf"})):"",this.props.refer._showDistrictOption()?l.a.createElement("div",null,l.a.createElement("br",null),"District Number:",this.props.refer.state.districtOptions.length?l.a.createElement(i.a,{value:this.props.refer.state.selectedDistrictOption,onChange:this.props.refer.handleDistrictChange,options:this.props.refer.state.districtOptions,isSearchable:!0,placeholder:"Select district for this turf"}):l.a.createElement(b.a,null)):"");case"import":return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("input",{type:"file",accept:".geojson,.json",onChange:function(t){return e.props.refer.handleImportFiles(t.target.files)}}));case"radius":return l.a.createElement("div",null,l.a.createElement("br",null),"Type the address:",l.a.createElement(g.d,{debounce:500,value:this.props.refer.state.address,onChange:this.props.refer.onTypeAddress,onSelect:this.props.refer.submitAddress}));case"draw":return l.a.createElement("div",null,l.a.createElement("br",null),"Use a"," ",l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://google-developers.appspot.com/maps/documentation/utils/geojson/"},"GeoJSON Draw Tool"),', save the file, and then select the "Import GeoJSON shape file" option.');default:return l.a.createElement("div",null,"Unknown generation method.")}}}]),t}(r.Component),O=a(5),y=a.n(O),j=a(12),k=a(47),S=a(109),w=a(480),C=a.n(w),x=a(55),T=a.n(x),D=a(87),P=a(1010),I=a(1012),N=a(1013),_=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleClickDelete=function(){a.setState({menuDelete:!0})},a.handleCloseDelete=function(){a.setState({menuDelete:!1})},a.handlePageClick=function(e){a.setState({pageNum:e.selected+1})},a.submitAddress=function(e){var t,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a.setState({address:e,saving:!0}),r.prev=1,r.next=4,y.a.awrap(Object(S.geocodeByAddress)(e));case 4:return t=r.sent,r.next=7,y.a.awrap(Object(S.getLatLng)(t[0]));case 7:n=r.sent,a.setState({addressCoords:n}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),Object(g.C)(r.t0,"Unable to search or geocode address.");case 14:a.setState({saving:!1});case 15:case"end":return r.stop()}}),null,null,[[1,11]])},a.handleDrawChange=function(e){a.setState({selectedDrawOption:e,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,importFileData:null,addressCoords:null,address:""})},a.handleStateChange=function(e){a.setState({selectedStateOption:e})},a.handleTypeChange=function(e){a.setState({selectedTypeOption:e})},a.handleDistrictChange=function(e){a.setState({selectedDistrictOption:e})},a.handleImportFiles=function(e){a.setState({saving:!0});var t=new FileReader;t.onload=function(e){a.setState({importFileData:e.target.result,saving:!1})},t.readAsText(e[0])},a._deleteTurf=function(e){var t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=a.state.global,a.setState({saving:!0,menuDelete:!1}),n.prev=2,n.next=5,y.a.awrap(Object(g.g)(t,"/turf/delete","POST",{turfId:e}));case 5:Object(g.D)("Turf has been deleted."),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),Object(g.C)(n.t0,"Unable to delete turf.");case 11:a.setState({saving:!1}),a._loadData(),window.location.href="/HelloVoterHQ/#/turf/";case 14:case"end":return n.stop()}}),null,null,[[2,8]])},a._createTurf=function(){var e,t,n,r,l,o,s,c,i,u,d,p;return y.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e=a.state.global,null!==(t=a.addTurfForm.getValue())){m.next=4;break}return m.abrupt("return");case 4:if(a.setState({saving:!0}),n=[],null===a.state.importFileData){m.next=17;break}m.prev=7,n.push(JSON.parse(a.state.importFileData)),m.next=15;break;case 11:return m.prev=11,m.t0=m.catch(7),Object(g.C)(m.t0,"Unable to parse import data file."),m.abrupt("return",a.setState({saving:!1}));case 15:m.next=55;break;case 17:if("radius"!==a.state.selectedDrawOption.value){m.next=21;break}n.push(C()([a.state.addressCoords.lng,a.state.addressCoords.lat],1e3)),m.next=55;break;case 21:if(r=a.state.selectedStateOption.value,m.prev=22,!a.state.selectedDistrictOption||"all"!==a.state.selectedDistrictOption.value){m.next=41;break}m.t1=y.a.keys(a.state.districtOptions);case 25:if((m.t2=m.t1()).done){m.next=39;break}if(l=m.t2.value,"all"!==a.state.districtOptions[l].value){m.next=29;break}return m.abrupt("continue",25);case 29:return m.next=31,y.a.awrap(fetch(a.urlFromDist(r,a.state.selectedTypeOption.value,a.state.districtOptions[l].value)));case 31:return o=m.sent,m.next=34,y.a.awrap(o.json());case 34:(s=m.sent).name=a.state.districtOptions[l].value,n.push(s),m.next=25;break;case 39:m.next=49;break;case 41:return m.next=43,y.a.awrap(fetch(a.urlFromDist(r,a.state.selectedTypeOption.value,a.state.selectedDistrictOption?a.state.selectedDistrictOption.value:null)));case 43:return c=m.sent,m.t3=n,m.next=47,y.a.awrap(c.json());case 47:m.t4=m.sent,m.t3.push.call(m.t3,m.t4);case 49:m.next=55;break;case 51:return m.prev=51,m.t5=m.catch(22),Object(g.C)(m.t5,"Unable to fetch district info data."),m.abrupt("return",a.setState({saving:!1}));case 55:m.prev=55,m.t6=y.a.keys(n);case 57:if((m.t7=m.t6()).done){m.next=68;break}return i=m.t7.value,u=n[i],d=void 0,p=void 0,d=u.geometry?u.geometry:u,p=a.state.selectedDistrictOption&&"all"===a.state.selectedDistrictOption.value?t.name+" "+u.name:t.name,m.next=66,y.a.awrap(Object(g.g)(e,"/turf/create","POST",{name:p,geometry:d}));case 66:m.next=57;break;case 68:Object(g.D)("Turf has been created."),m.next=74;break;case 71:m.prev=71,m.t8=m.catch(55),Object(g.C)(m.t8,"Unable to create turf.");case 74:a.setState({saving:!1}),window.location.href="/HelloVoterHQ/#/turf/",a._loadData();case 77:case"end":return m.stop()}}),null,null,[[7,11],[22,51],[55,71]])},a.selectedTypeFetch=function(){var e,t,n,r,l;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(a.state.selectedTypeOption){o.next=2;break}return o.abrupt("return");case 2:a.setState({districtOptions:[]}),t=a.state.selectedStateOption.value,o.t0=a.state.selectedTypeOption.value,o.next="cd"===o.t0?7:"sldu"===o.t0?9:"sldl"===o.t0?11:13;break;case 7:return e="cds/2016/",o.abrupt("break",14);case 9:return e="states/"+t+"/sldu/",o.abrupt("break",14);case 11:return e="states/"+t+"/sldl/",o.abrupt("break",14);case 13:return o.abrupt("return");case 14:return o.next=16,y.a.awrap(fetch("https://api.github.com/repos/OurVoiceUSA/districts/contents/"+e));case 16:return n=o.sent,r=[{value:"all",label:"Create all of them!"}],o.next=20,y.a.awrap(n.json());case 20:l=o.sent,o.t1=a.state.selectedTypeOption.value,o.next="cd"===o.t1?24:26;break;case 24:return l.forEach((function(e){e.name.includes(a.state.selectedStateOption.value)&&r.push({value:e.name,label:e.name})})),o.abrupt("break",27);case 26:l.forEach((function(e){var t=e.name.replace(".geojson","");r.push({value:t,label:t})}));case 27:a.setState({districtOptions:r});case 28:case"end":return o.stop()}}))},a._loadData=function(){var e,t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.state.global,a.setState({loading:!0,search:""}),t=[],n.prev=3,n.next=6,y.a.awrap(Object(g.w)(e));case 6:t=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),Object(g.C)(n.t0,"Unable to load turf.");case 12:a.setState(a.initState()),a.setState({loading:!1,turf:t});case 14:case"end":return n.stop()}}),null,null,[[3,9]])},a.state=a.initState(e),a.state.global=e.global,a.formServerItems=T.a.struct({name:T.a.String}),a.formServerOptions={fields:{name:{label:"Turf Name",error:"You must enter a turf name."}}},a.onTypeAddress=function(e){return a.setState({address:e})},a.onTypeSearch=a.onTypeSearch.bind(Object(j.a)(a)),a.handlePageNumChange=a.handlePageNumChange.bind(Object(j.a)(a)),a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"initState",value:function(e){var t=localStorage.getItem("turfperpage");return t||(t=5),{loading:!0,selectedDrawOption:null,selectedStateOption:null,selectedTypeOption:null,selectedDistrictOption:null,districtOptions:[],turf:[],thisTurf:{},importFileData:null,address:"",addressCoords:null,search:"",perPage:t,pageNum:1,menuDelete:!1}}},{key:"handlePageNumChange",value:function(e){localStorage.setItem("volunteersperpage",e.value),this.setState({pageNum:1,perPage:e.value})}},{key:"onTypeSearch",value:function(e){this.setState({search:e.target.value.toLowerCase(),pageNum:1})}},{key:"onChangeTurf",value:function(e){this.setState({addTurfForm:e})}},{key:"_showDistrictOption",value:function(){if(!this.state.selectedTypeOption)return!1;switch(this.state.selectedTypeOption.value){case"cd":case"sldu":case"sldl":return!0;default:return!1}}},{key:"_showSubmitButton",value:function(){return!this.state.saving&&(!!this.state.selectedDrawOption&&(!(!this.state.selectedTypeOption||"state"!==this.state.selectedTypeOption.value)||(!(!this._showDistrictOption()||!this.state.selectedDistrictOption)||(null!==this.state.importFileData||null!==this.state.addressCoords))))}},{key:"urlFromDist",value:function(e,t,a){var n;switch(t){case"state":n="states/"+e+"/shape.geojson";break;case"cd":n="cds/2016/"+a+"/shape.geojson";break;case"sldu":n="states/"+e+"/sldu/"+a+".geojson";break;case"sldl":n="states/"+e+"/sldl/"+a+".geojson";break;default:throw new Error("unknown selectedTypeOption")}return"https://raw.githubusercontent.com/OurVoiceUSA/districts/gh-pages/"+n}},{key:"componentDidMount",value:function(){this._loadData()}},{key:"render",value:function(){var e=this,t=this.state.global,a=[{value:"select",label:"Select from legislative boundary"},{value:"import",label:"Import GeoJSON shape file"},{value:"radius",label:"Area surrounding an address"},{value:"draw",label:"Manually draw with your mouse"}],r=[];return this.state.turf.forEach((function(t){e.state.search&&!Object(g.z)(t).includes(e.state.search)||r.push(t)})),l.a.createElement(o.a,null,l.a.createElement("div",null,l.a.createElement(k.a,{exact:!0,path:"/turf/",render:function(){return l.a.createElement(g.e,{flag:e.state.loading,func:e._loadData},"Search:"," ",l.a.createElement("input",{type:"text",value:e.state.value,onChange:e.onTypeSearch,"data-tip":"Search by name, email, location, or admin"}),l.a.createElement("br",null),l.a.createElement(u,{global:t,turf:r,refer:e}))}}),l.a.createElement(k.a,{exact:!0,path:"/turf/add",render:function(){return l.a.createElement("div",null,l.a.createElement(T.a.form.Form,{ref:function(t){return e.addTurfForm=t},type:e.formServerItems,options:e.formServerOptions,onChange:function(t){return e.onChangeTurf(t)},value:e.state.addTurfForm}),l.a.createElement("br",null),"Method of generating turf:",l.a.createElement(i.a,{value:e.state.selectedDrawOption,onChange:e.handleDrawChange,options:a,isSearchable:!1,placeholder:"Select method"}),l.a.createElement(E,{refer:e}),e._showSubmitButton()?l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("button",{onClick:function(){return e._createTurf()}},"Submit")):"")}}),l.a.createElement(k.a,{path:"/turf/view/:id",render:function(a){return l.a.createElement("div",null,l.a.createElement(n.a,{global:t,key:a.match.params.id,id:a.match.params.id,edit:!0,refer:e}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(D.a,{onClick:e.handleClickDelete,color:"primary"},"Delete Turf"),l.a.createElement(P.a,{open:e.state.menuDelete,onClose:e.handleCloseDelete,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(I.a,{id:"alert-dialog-title"},"Are you sure you wish to delete this turf?"),l.a.createElement(N.a,null,l.a.createElement(D.a,{onClick:e.handleCloseDelete,color:"primary",autoFocus:!0},"No"),l.a.createElement(D.a,{onClick:function(){return e._deleteTurf(a.match.params.id)},color:"primary"},"Yes"))))}}),l.a.createElement(g.a,{flag:this.state.saving})))}}]),t}(r.Component);a.d(t,"a",(function(){return n.a})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return E})),a.d(t,"c",(function(){return _}))},543:function(e,t,a){e.exports=a(1006)},548:function(e,t,a){},571:function(e,t){},573:function(e,t){},608:function(e,t){},609:function(e,t){},77:function(e,t,a){"use strict";var n=a(173);a.d(t,"a",(function(){return n.a}));var r=a(451);a.d(t,"b",(function(){return r.a}))},967:function(e,t,a){},968:function(e,t,a){},974:function(e,t,a){}},[[543,1,2]]]);
//# sourceMappingURL=main.03442373.chunk.js.map